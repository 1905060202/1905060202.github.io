<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JavaWeb编程基础(Servlet) | 胡小宁的博客</title><meta name="keywords" content="web开发,Java Web,Servlet"><meta name="author" content="胡小宁"><meta name="copyright" content="胡小宁"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JavaWeb编程基础（Servlet）最近在做一个SpringBoot的项目，当我真正动手写完了一个登陆功能之后，倏然觉得自己对整个JavaWeb的开发只停留在遵循规范这一层面，并未真正静下心来去思考原理。所以，基于这个原因，我准备从头开始学习JavaWeb的开发，彻底搞懂背后的细节。 2021.11.23 ServletServlet 是 Server Applet 的缩写，是一种使用 Jav">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb编程基础(Servlet)">
<meta property="og:url" content="http://1905060202.github.io/2021/11/23/JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80-Servlet/index.html">
<meta property="og:site_name" content="胡小宁的博客">
<meta property="og:description" content="JavaWeb编程基础（Servlet）最近在做一个SpringBoot的项目，当我真正动手写完了一个登陆功能之后，倏然觉得自己对整个JavaWeb的开发只停留在遵循规范这一层面，并未真正静下心来去思考原理。所以，基于这个原因，我准备从头开始学习JavaWeb的开发，彻底搞懂背后的细节。 2021.11.23 ServletServlet 是 Server Applet 的缩写，是一种使用 Jav">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://1905060202.github.io/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg">
<meta property="article:published_time" content="2021-11-23T08:43:45.000Z">
<meta property="article:modified_time" content="2021-11-23T09:26:34.359Z">
<meta property="article:author" content="胡小宁">
<meta property="article:tag" content="web开发">
<meta property="article:tag" content="Java Web">
<meta property="article:tag" content="Servlet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://1905060202.github.io/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://1905060202.github.io/2021/11/23/JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80-Servlet/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"6456TWTNI2","apiKey":"cf5116dbc73ddb4c9ee08cca50344cf5","indexName":"bloghu","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":200,"position":"top","messagePrev":"这篇博文已经是","messageNext":"天前更新的了, 文章中的内容很可能过时了。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb编程基础(Servlet)',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-11-23 17:26:34'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/you.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">86</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">胡小宁的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb编程基础(Servlet)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-11-23T08:43:45.000Z" title="发表于 2021-11-23 16:43:45">2021-11-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-11-23T09:26:34.359Z" title="更新于 2021-11-23 17:26:34">2021-11-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb编程基础(Servlet)"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JavaWeb编程基础（Servlet）"><a href="#JavaWeb编程基础（Servlet）" class="headerlink" title="JavaWeb编程基础（Servlet）"></a>JavaWeb编程基础（Servlet）</h1><p>最近在做一个SpringBoot的项目，当我真正动手写完了一个登陆功能之后，倏然觉得自己对整个JavaWeb的开发只停留在遵循规范这一层面，并未真正静下心来去思考原理。所以，基于这个原因，我准备从头开始学习JavaWeb的开发，彻底搞懂背后的细节。</p>
<p>2021.11.23</p>
<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>Servlet 是 Server Applet 的缩写，是一种使用 Java 语言来开发动态网站的技术。</p>
<p> Java 是一种功能强大的通用型编程语言，可以处理 HTTP 请求，可以访问数据库，可以生成 HTML 代码，您完全可以使用原生 Java 来开发动态网站。但是，使用原生 Java 开发动态网站非常麻烦，需要自己解析 HTTP 请求的报头，需要自己分析用户的请求参数，需要自己加载数据库组件……种种原因导致使用原生 Java 开发动态网站几乎是一件不能被接受的事情。正是基于这种原因，Java 官方后来推出了 Servlet 技术，它对开发动态网站需要使用的原生 Java API 进行了封装，形成了一套新的 API，称为 Servlet API。</p>
<p> 使用 Servlet 开发动态网站非常方便，程序员只需要集中精力处理业务逻辑，不需要再为那些基础性的、通用性的功能编写代码，这使得 Servlet 在动态网站开发领域具备了很高的实用性。</p>
<p> Servlet 基于 Java，可以使用几乎全部的 Java API，所以它的功能异常强大，完全可以胜任企业级开发，能够处理那些高并发、大吞吐量、业务逻辑复杂的应用场景。</p>
<p> 您可以这样理解，Servlet 是 Sun 公司推出的一种基于 Java 的动态网站开发技术。编写 Servlet 代码需要遵循 Java 语法，一个 Servlet 程序其实就是一个按照 Servlet 规范编写的 Java 类。Servlet 程序需要先编译成字节码文件（<code>.class</code>文件），然后再部署到服务器运行。</p>
<h2 id="Servlet-是一种规范"><a href="#Servlet-是一种规范" class="headerlink" title="Servlet 是一种规范"></a>Servlet 是一种规范</h2><p>严格来说，Servlet 只是一套 Java Web 开发的规范，或者说是一套 Java Web 开发的技术标准。只有规范并不能做任何事情，必须要有人去实现它。所谓实现 Servlet 规范，就是真正编写代码去实现 Servlet 规范提到的各种功能，包括类、方法、属性等。</p>
<p> Servlet 规范是开放的，除了 Sun 公司，其它公司也可以实现 Servlet 规范，目前常见的实现了 Servlet 规范的产品包括 Tomcat、Weblogic、Jetty、Jboss、WebSphere 等，它们都被称为“Servlet 容器”。Servlet 容器用来管理程序员编写的 Servlet 类。</p>
<h2 id="Servlet-接口"><a href="#Servlet-接口" class="headerlink" title="Servlet 接口"></a>Servlet 接口</h2><p>所有的 Servlet 功能都是通过一个名为<code>Servlet</code>的接口（Interface）向外暴露的，编写 Servlet 代码，可以从实现 Servlet 接口开始，就像下面这样：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">·        <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">ServletDemo</span> <span class="hljs-symbol">implements</span> <span class="hljs-symbol">Servlet</span> &#123;<br>·            <span class="hljs-comment">//<span class="hljs-doctag">TODO:</span></span><br>·        &#125;<br></code></pre></td></tr></table></figure>

<p> 直接实现 Servlet 接口比较麻烦，需要实现很多方法，所以 Servlet 规范又提供了两个抽象类，分别是 GenericServlet 类和 HttpServlet 类，它们都实现了 Servlet 接口的很多常用功能。和 GenericServlet 类相比，HttpServlet 类更加方便，所以实际开发中一般都继承自 HttpServlet 类。</p>
<h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><p>Servlet 是第一代 Java Web 开发技术，它将 HTML 代码以字符串的形式向外输出，编写 HTML 文档就是在拼接字符串，非常麻烦，所以 Java 官方又推出了第二代 Web 开发技术——JSP。</p>
<p> JSP 才是现代化的 Web 开发技术，它允许 HTML 代码和 JSP 代码分离，让程序员能够在 HTML 文档中直接嵌入 JSP 代码。 </p>
<p> 现在没有人直接使用 Servlet 开发动态网站，大家都转向了 JSP 阵营。但是 JSP 依赖于 Servlet，用户访问 JSP 页面时，JSP 代码会被翻译成 Servlet 代码，最终，HTML 代码还是以字符串的形式向外输出的。您看，JSP 只是在 Servlet 的基础上做了进一步封装。</p>
<p> JSP 代码可以调用 Servlet 类，程序员可以将部分功能在 Servlet 中实现，然后在 JSP 中调用即可。</p>
<p> 总之，Servlet 是 JSP 的基础，Servlet 虽然不直接面向用户，但是它依然是 JSP 的后台支撑，想玩转 JSP，必须先玩转 Servlet。</p>
<p> 学习顺序：</p>
<p>·    学习 Servlet 的正确顺序是：Java –&gt; Servlet。</p>
<p>·    学习 JSP 的正确顺序是：Java –&gt; Servlet –&gt; JSP。</p>
<h1 id="Servlet容器（Web容器）是什么"><a href="#Servlet容器（Web容器）是什么" class="headerlink" title="Servlet容器（Web容器）是什么"></a>Servlet容器（Web容器）是什么</h1><h2 id="Web-服务器"><a href="#Web-服务器" class="headerlink" title="Web 服务器"></a>Web 服务器</h2><p>初学者可能认为，只要有 Web 服务器，我们编写的网站代码就可以运行了，就可以访问数据库了，就可以注册登录并发布文章了，这其实是一种误解。</p>
<p> 我们通常所说的 Web 服务器，比如 Apache、Nginx、IIS 等，它们的功能往往都比较单一，只能提供 http(s) 服务，让用户访问静态资源（HTML 文档、图片、CSS 文件、JavaScript 文件等），它们不能执行任何编程语言，也不能访问数据库，更不能让用户注册和登录。</p>
<p> 也就是说，如果只有 Web 服务器，那您只能部署静态网站，不能部署动态网站。要想部署动态网站，必须要有编程语言运行环境（运行时，Runtime）的和数据库管理系统的支持。</p>
<h4 id="运行环境（运行时）"><a href="#运行环境（运行时）" class="headerlink" title="运行环境（运行时）"></a>运行环境（运行时）</h4><p>开发网站使用的编程语言一般都是脚本语言（比如 PHP、ASP、Python），部署网站时都是将源代码直接扔到服务器上，然而源代码自己并不能运行，必须要有解释器的支持；当用户访问动态页面时，解释器负责分析、编译和执行源代码，然后得到处理结果。</p>
<p> 解释器是执行脚本语言的核心部件，除此以外还有一些辅助性的部件，例如：</p>
<p>·    垃圾回收器：负责及时释放不需要的内存，腾出资源供其它页面使用；</p>
<p>·    标准库：任何编程语言都会附带标准库，它们提供了很多通用性的功能，极大地提高了开发效率，避免重复造轮子。</p>
<p> 我们习惯将以上各种支持脚本语言运行的部件统称为运行环境，或者运行时（Runtime）。</p>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><p>Web 服务器不带数据库，编程语言也不带数据库，数据库是一款独立的软件；要想实现用户注册、发布文章、提交评论等功能，就必须安装一款数据库，比如 MySQL、Oracle、SQL Server 等。</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>部署动态网站一般至少需要三个组件，分别是 Web 服务器、脚本语言运行时和数据库，例如，部署 PHP 网站一般选择「Apache + PHP 运行时 + MySQL」的组合。</p>
<p><img src="/images/python/clip_image001.jpg"></p>
<h2 id="Web-容器"><a href="#Web-容器" class="headerlink" title="Web 容器"></a>Web 容器</h2><p>我们知道，Servlet 是基于 Java 语言的，运行 Servlet 必然少不了 JRE 的支持，它负责解析和执行字节码文件（<code>.class</code>文件）。然而 JRE 只包含了 Java 虚拟机（JVM）、Java 核心类库和一些辅助性性文件，它并不支持 Servlet 规范。要想运行 Servlet 代码，还需要一种额外的部件，该部件必须支持 Servlet 规范，实现了 Servlet 接口和一些基础类，这种部件就是 Servlet 容器。</p>
<p> Servlet 容器就是 Servlet 代码的运行环境（运行时），它除了实现 Servlet 规范定义的各种接口和类，为 Servlet 的运行提供底层支持，还需要管理由用户编写的 Servlet 类，比如实例化类（创建对象）、调用方法、销毁类等。</p>
<p> Servlet 中的容器和生活中的容器是类似的概念：生活中容器用来装水、装粮食，Servlet 中的容器用来装类，装对象。</p>
<p> 读者可能会提出疑问，我们自己编写的 Servlet 类为什么需要 Servlet 容器来管理呢？这是因为我们编写的 Servlet 类没有 main() 函数，不能独立运行，只能作为一个模块被载入到 Servlet 容器，然后由 Servlet 容器来实例化，并调用其中的方法。</p>
<p> 一个动态页面对应一个 Servlet 类，开发一个动态页面就是编写一个 Servlet 类，当用户请求到达时，Servlet 容器会根据配置文件（web.xml）来决定调用哪个类。</p>
<p> 下图演示了 Servlet 容器在整个 HTTP 请求流程中的位置：</p>
<p><img src="/images/python/clip_image002-16376571425081.jpg" alt="HTTP请求流程"></p>
<p> 您看，Web 服务器是整个动态网站的“大门”，用户的 HTTP 请求首先到达 Web 服务器，Web 服务器判断该请求是静态资源还是动态资源：如果是静态资源就直接返回，此时相当于用户下载了一个服务器上的文件；如果是动态资源将无法处理，必须将该请求转发给 Servlet 容器。</p>
<p> Servlet 容器接收到请求以后，会根据配置文件（web.xml）找到对应的 Servlet 类，将它加载并实例化，然后调用其中的方法来处理用户请求；处理结束后，Servlet 容器将处理结果再转交给 Web 服务器，由 Web 服务器将处理结果进行封装，以 HTTP 响应的形式发送给最终的用户。</p>
<p> 常用的 Web 容器有 Tomcat、Jboss、Jetty、WebLogic 等，其中 Tomcat 由 Java 官方提供，是初学者最常使用的。</p>
<p> 为了简化部署流程，Web 容器往往也会自带 Web 服务器模块，提供基本的 HTTP 服务，所以您可以不用再安装 Apache、IIS、Nginx 等传统意义上的服务器，只需要安装一款 Web 容器，就能部署 Servlet 网站了。正是由于这个原因，有的教材将 Tomcat 称为 Web 容器，有的教材又将 Tomcat 称为 Web 服务器，两者的概念已经非常模糊了。</p>
<p> 将 Web 容器当做服务器使用后，上面的流程图就变成了下面的样子：</p>
<p><img src="/images/python/clip_image003.jpg" alt="HTTP 请求流程"></p>
<p> 注意，Servlet 容器自带的 Web 服务器模块虽然没有传统的 Web 服务器强大，但是也足以应付大部分开发场景，对初学者来说是足够的。当然，您也可以将传统的 Web 服务器和 Servlet 容器组合起来，两者分工协作，各司其职，共同完成 HTTP 请求。</p>
<h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><p>Servlet 容器就是 Servlet 程序的运行环境，它主要包含以下几个功能：</p>
<p>·    实现 Servlet 规范定义的各种接口和类，为 Servlet 的运行提供底层支持；</p>
<p>·    管理用户编写的 Servlet 类，以及实例化以后的对象；</p>
<p>·    提供 HTTP 服务，相当于一个简化的服务器。</p>
<h1 id="Tomcat目录结构"><a href="#Tomcat目录结构" class="headerlink" title="Tomcat目录结构"></a>Tomcat目录结构</h1><p>Tomcat 解压完成以后会看到如表1所示的很多目录，这些目录都有各自的用途，初学者有必要了解一下。</p>
<table>
<thead>
<tr>
<th>Tomcat 子目录及其说明</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>子目录</strong></td>
<td><strong>说明</strong></td>
</tr>
<tr>
<td>bin</td>
<td>命令中心（启动命令，关闭命令……）</td>
</tr>
<tr>
<td>conf</td>
<td>配置中心（端口号，内存大小……）</td>
</tr>
<tr>
<td>lib</td>
<td>Tomcat 的库文件。Tomcat 运行时需要的 jar 包所在的目录。</td>
</tr>
<tr>
<td>logs</td>
<td>存放日志文件。</td>
</tr>
<tr>
<td>temp</td>
<td>存储临时产生的文件，即缓存。</td>
</tr>
<tr>
<td>webapps</td>
<td>存放项目的文件，web 应用放置到此目录下浏览器可以直接访问。</td>
</tr>
<tr>
<td>work</td>
<td>编译以后的 class 文件。</td>
</tr>
</tbody></table>
<h2 id="1-bin-目录"><a href="#1-bin-目录" class="headerlink" title="1. bin 目录"></a>1. bin 目录</h2><p>bin 目录用来存放 Tomcat 命令，主要分为两大类，一类是以<code>.sh</code>结尾的 Linux 命令，另一类是以<code>.bat</code>结尾的 Windows 命令。很多环境变量都在此处设置，例如 JDK 路径、Tomcat 路径等。</p>
<p><img src="/images/python/clip_image004.gif" alt="bin 目录包含的内容"><br> 图1：bin 目录包含的内容</p>
<p> 下面是几个常用的 Tomcat 命令：</p>
<p>·    startup.sh/startup.bat：用来启动 Tomcat；</p>
<p>·    shutdown.sh/shutdown.bat：用来关闭 Tomcat；</p>
<p>·    catalina.bat/ catalina.bat：用来设置 Tomcat 的内存。</p>
<h2 id="2-conf-目录"><a href="#2-conf-目录" class="headerlink" title="2. conf 目录"></a>2. conf 目录</h2><p>conf 目录主要是用来存放 Tomcat 的配置文件，如下图所示：</p>
<p><img src="/images/python/clip_image005.gif" alt="conf 目录包含的内容"><br> 图2：conf 目录包含的内容</p>
<p> 下面是常用到的几个文件：</p>
<p>·    server.xml 用来设置域名、IP、端口号、默认加载的项目、请求编码等；</p>
<p>·    context.xml 用来配置数据源等；</p>
<p>·    tomcat-users.xml 用来配置和管理 Tomcat 的用户与权限；</p>
<p>·    web.xml 可以设置 Tomcat 支持的文件类型；</p>
<p>·    在 Catalina 目录下可以设置默认加载的项目。 </p>
<h2 id="3-lib-目录"><a href="#3-lib-目录" class="headerlink" title="3. lib 目录"></a>3. lib 目录</h2><p>lib 目录主要用来存放 Tomcat 运行需要加载的 jar 包。</p>
<p><img src="/images/python/clip_image006.gif" alt="lib 目录包含的内容"><br> 图3：lib 目录包含的内容</p>
<h2 id="4-logs-目录"><a href="#4-logs-目录" class="headerlink" title="4. logs 目录"></a>4. logs 目录</h2><p>logs 目录用来存放 Tomcat 在运行过程中产生的日志文件，清空该目录中的文件不会对 Tomcat 的运行带来影响。</p>
<p> 在 Windows 系统中，控制台的输出日志在 catalina.xxxx-xx-xx.log 文件中；在 Linux 系统中，控制台的输出日志在 catalina.out 文件中。</p>
<h2 id="5-temp-目录"><a href="#5-temp-目录" class="headerlink" title="5. temp 目录"></a>5. temp 目录</h2><p>temp 目录用来存放 Tomcat 在运行过程中产生的临时文件，清空该目录中的文件不会对 Tomcat 的运行带来影响。 </p>
<p><img src="/images/python/clip_image007.gif" alt="temp 目录包含的内容"><br> 图4：temp 目录包含的内容</p>
<h2 id="6-webapps-目录"><a href="#6-webapps-目录" class="headerlink" title="6. webapps 目录"></a>6. webapps 目录</h2><p>webapps 目录用来存放应用程序（也就是通常所说的网站），当 Tomcat 启动时会去加载 webapps 目录下的应用程序，我们编写的 Servlet 程序就可以放在这里。Tomcat 允许以文件夹、war 包、jar 包的形式发布应用。</p>
<p><img src="/images/python/clip_image008.gif" alt="webapps 目录包含的内容"><br> 图5：webapps 目录包含的内容</p>
<h2 id="7-work-目录"><a href="#7-work-目录" class="headerlink" title="7. work 目录"></a>7. work 目录</h2><p>work 目录用来存放 Tomcat 在运行时的编译文件（也即 class 字节码文件），例如 JSP 编译后的文件。清空 work 目录，然后重启 Tomcat，可以达到清除缓存的作用。</p>
<h1 id="Servlet三种创建方式"><a href="#Servlet三种创建方式" class="headerlink" title="Servlet三种创建方式"></a>Servlet三种创建方式</h1><p>在 Servlet 中，一个动态网页对应一个 Servlet 类，我们可以通过 web.xml 配置文件将 URL 路径和 Servlet 类对应起来。访问一个动态网页的过程，实际上是将对应的 Servlet 类加载、实例化并调用相关方法的过程；网页上显示的内容，就是通过 Servlet 类中的某些方法向浏览器输出的 HTML 语句。</p>
<p> 所以，使用 Servlet 创建动态网页的第一步，就是创建 Servlet 类。</p>
<p> Servlet 规范的最顶层是一个名为 javax.servlet.Servlet 的接口，所有的 Servlet 类都要直接或者间接地实现该接口。直接实现 Servlet 接口不太方便，所以 Servlet 又内置了两个 Servlet 接口的实现类（抽象类），分别为 GenericServlet 和 HttpServlet，因此，创建 Servlet 类有如下三种方式：</p>
<ol>
<li><p>实现 javax.servlet.Servlet 接口，重写其全部方法。</p>
</li>
<li><p>继承 javax.servlet.GenericServlet 抽象类，重写 service() 方法。</p>
</li>
<li><p>继承 javax.servlet.http.HttpServlet 抽象类，重写 doGet() 或 doPost() 方法。</p>
</li>
</ol>
<h2 id="Servlet、GenericServlet-、HttpServlet-的关系"><a href="#Servlet、GenericServlet-、HttpServlet-的关系" class="headerlink" title="Servlet、GenericServlet 、HttpServlet 的关系"></a>Servlet、GenericServlet 、HttpServlet 的关系</h2><p>下图展示了 Servlet、GenericServlet 以及 HttpServlet 三者之间的关系，其中 MyServlet 是我们自定义的 Servlet 类。</p>
<p><img src="/images/python/clip_image009.png" alt="Servlet 关系图"></p>
<p> 由上图可知：</p>
<ol>
<li><p>GenericServlet 是实现了 Servlet 接口的抽象类。</p>
</li>
<li><p>HttpServlet 是 GenericServlet 的子类，具有 GenericServlet 的一切特性。</p>
</li>
<li><p>Servlet 程序（MyServlet 类）是一个实现了 Servlet 接口的 Java 类。</p>
</li>
</ol>
<h2 id="Servlet-接口-1"><a href="#Servlet-接口-1" class="headerlink" title="Servlet 接口"></a>Servlet 接口</h2><p>javax.servlet.Servlet 是 Servlet API 的核心接口，所有的 Servlet 类都直接或间接地实现了这一接口。</p>
<p> Servlet 接口中定义了 5 个方法，下面我们对他们做简单的介绍。</p>
<table>
<thead>
<tr>
<th><strong>返回值</strong></th>
<th><strong>方法</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>void</td>
<td>init(ServletConfig config)</td>
<td>Servlet 实例化之后，由 Servlet  容器调用，用来初始化 Servlet 对象。该方法只能被调用一次。   参数 config 用来向 Servlet 传递配置信息。</td>
</tr>
<tr>
<td>void</td>
<td>service(ServletRequest req,ServletResponse res)</td>
<td>Servlet 容器调用该方法处理客户端请求。</td>
</tr>
<tr>
<td>void</td>
<td>destroy()</td>
<td>服务器关闭、重启或者 Servlet 对象被移除时，由 Servlet 容器调用，负责释放 Servlet 对象占用的资源。</td>
</tr>
<tr>
<td>ServletConfig</td>
<td>getServletConfig()</td>
<td>该方法用来获取 ServletConfig 对象，该对象中包含了 Servlet 的初始化参数。</td>
</tr>
<tr>
<td>String</td>
<td>getServletInfo()</td>
<td>该方法用于获取 Servlet 的信息，例如作者、版本、版权等。</td>
</tr>
</tbody></table>
<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例 1"></a>示例 1</h4><p>通过实现 Servlet 接口创建 Servlet，示例代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>  <span class="hljs-keyword">package</span> net.biancheng.www;<br><span class="hljs-number">2.</span>   <br><span class="hljs-number">3.</span>  <span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-number">4.</span>  <span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-number">5.</span>  <span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-number">6.</span>   <br><span class="hljs-number">7.</span>  <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Servlet</span> </span>&#123;<br><span class="hljs-number">8.</span>   <br><span class="hljs-number">9.</span>      <span class="hljs-comment">//Servlet 实例被创建后，调用 init() 方法进行初始化，该方法只能被调用一次</span><br><span class="hljs-number">10.</span>     <span class="hljs-meta">@Override</span><br><span class="hljs-number">11.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br><span class="hljs-number">12.</span>     &#125;<br><span class="hljs-number">13.</span>  <br><span class="hljs-number">14.</span>     <span class="hljs-comment">//返回 ServletConfig 对象，该对象包含了 Servlet 的初始化参数</span><br><span class="hljs-number">15.</span>     <span class="hljs-meta">@Override</span><br><span class="hljs-number">16.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> ServletConfig <span class="hljs-title">getServletConfig</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-number">17.</span>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br><span class="hljs-number">18.</span>     &#125;<br><span class="hljs-number">19.</span>  <br><span class="hljs-number">20.</span>     <span class="hljs-comment">//每次请求，都会调用一次 service() 方法</span><br><span class="hljs-number">21.</span>     <span class="hljs-meta">@Override</span><br><span class="hljs-number">22.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">23.</span>         <span class="hljs-comment">//设置字符集</span><br><span class="hljs-number">24.</span>         servletResponse.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><span class="hljs-number">25.</span>         <span class="hljs-comment">//使用PrintWriter.write()方法向前台页面输出内容</span><br><span class="hljs-number">26.</span>         PrintWriter writer = servletResponse.getWriter();<br><span class="hljs-number">27.</span>         writer.write(<span class="hljs-string">&quot;胡小宁的博客欢迎你的到来，网址: 1905060202.github.io&quot;</span>);<br><span class="hljs-number">28.</span>         writer.close();<br><span class="hljs-number">29.</span>     &#125;<br><span class="hljs-number">30.</span>  <br><span class="hljs-number">31.</span>     <span class="hljs-comment">//返回关于 Servlet 的信息，例如作者、版本、版权等</span><br><span class="hljs-number">32.</span>     <span class="hljs-meta">@Override</span><br><span class="hljs-number">33.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getServletInfo</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-number">34.</span>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br><span class="hljs-number">35.</span>     &#125;<br><span class="hljs-number">36.</span>  <br><span class="hljs-number">37.</span>     <span class="hljs-comment">//Servelet 被销毁时调用</span><br><span class="hljs-number">38.</span>     <span class="hljs-meta">@Override</span><br><span class="hljs-number">39.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-number">40.</span>     &#125;<br><span class="hljs-number">41.</span> &#125;<br></code></pre></td></tr></table></figure>
<h2 id="GenericServlet-抽象类"><a href="#GenericServlet-抽象类" class="headerlink" title="GenericServlet 抽象类"></a>GenericServlet 抽象类</h2><p>javax.servlet.GenericServlet 实现了 Servlet 接口，并提供了除 service() 方法以外的其他四个方法的简单实现。通过继承 GenericServlet 类创建 Servlet ，只需要重写 service() 方法即可，大大减少了创建 Servlet 的工作量。</p>
<p> GenericServlet 类中还提供了以下方法，用来获取 Servlet 的配置信息。</p>
<table>
<thead>
<tr>
<th><strong>返回值</strong></th>
<th><strong>方法</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>String</td>
<td>getInitParameter(String name)</td>
<td>返回名字为 name 的初始化参数的值，初始化参数在 web.xml 中进行配置。如果参数不存在，则返回 null。</td>
</tr>
<tr>
<td>Enumeration<String></td>
<td>getInitParameterNames()</td>
<td>返回 Servlet 所有初始化参数的名字的枚举集合，若 Servlet 没有初始化参数，返回一个空的枚举集合。</td>
</tr>
<tr>
<td>ServletContext</td>
<td>getServletContext()</td>
<td>返回 Servlet 上下文对象的引用。</td>
</tr>
<tr>
<td>String</td>
<td>getServletName()</td>
<td>返回此 Servlet 实例的名称。</td>
</tr>
</tbody></table>
<h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例 2"></a>示例 2</h4><p>通过继承 GenericServlet 抽象类创建 Servlet，示例代码如下。</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-number">1.</span>  <span class="hljs-keyword">package</span> net.biancheng.www;<br><span class="hljs-number">2.</span>   <br><span class="hljs-number">3.</span>  <span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-number">4.</span>  <span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br><span class="hljs-number">5.</span>  <span class="hljs-keyword">import</span> java.io.<span class="hljs-type">PrintWriter</span>;<br><span class="hljs-number">6.</span>   <br><span class="hljs-number">7.</span>  public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GenericServlet</span> </span>&#123;<br><span class="hljs-number">8.</span>   <br><span class="hljs-number">9.</span>      <span class="hljs-meta">@Override</span><br><span class="hljs-number">10.</span>     public void service(<span class="hljs-type">ServletRequest</span> servletRequest, <span class="hljs-type">ServletResponse</span> servletResponse) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br><span class="hljs-number">11.</span>         <span class="hljs-comment">//设置字符集</span><br><span class="hljs-number">12.</span>         servletResponse.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><span class="hljs-number">13.</span>         <span class="hljs-comment">//使用PrintWriter.write()方法向前台页面输出内容</span><br><span class="hljs-number">14.</span>         <span class="hljs-type">PrintWriter</span> writer = servletResponse.getWriter();<br><span class="hljs-number">15.</span>         writer.write(<span class="hljs-string">&quot;胡小宁的博客欢迎你的到来，网址: 1905060202.github.io &quot;</span>);<br><span class="hljs-number">16.</span>         writer.close();<br><span class="hljs-number">17.</span>     &#125;<br><span class="hljs-number">18.</span> &#125;<br></code></pre></td></tr></table></figure>
<h2 id="HttpServlet-抽象类"><a href="#HttpServlet-抽象类" class="headerlink" title="HttpServlet 抽象类"></a>HttpServlet 抽象类</h2><p>javax.servlet.http.HttpServlet 继承了 GenericServlet 抽象类，用于开发基于 HTTP 协议的 Servlet 程序。由于 Servlet 主要用来处理 HTTP 的请求和响应，所以通常情况下，编写的 Servlet 类都继承自 HttpServlet。</p>
<p> 在 HTTP/1.1 协议中共定义了 7 种请求方式，即 GET、POST、HEAD、PUT、DELETE、TRACE 和 OPTIONS。</p>
<p> HttpServlet 针对这 7 种请求方式分别定义了 7 种方法，即 doGet()、doPost()、doHead()、doPut()、doDelete()、doTrace() 和 doOptions()。</p>
<p> HttpServlet 重写了 service() 方法，该方法会先获取客户端的请求方式，然后根据请求方式调用对应 doXxx 方法。</p>
<h4 id="示例-3"><a href="#示例-3" class="headerlink" title="示例 3"></a>示例 3</h4><p>由于我们使用的请求方式主要是 GET 和 POST，所以通过继承 HttpServlet 类创建 Servlet 时，只需要重写 doGet 或者 doPost 方法，代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>  <span class="hljs-keyword">package</span> net.biancheng.www;<br><span class="hljs-number">2.</span>   <br><span class="hljs-number">3.</span>  <span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-number">4.</span>  <span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-number">5.</span>  <span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-number">6.</span>  <span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-number">7.</span>  <span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-number">8.</span>  <span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-number">9.</span>   <br><span class="hljs-number">10.</span> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><span class="hljs-number">11.</span>  <br><span class="hljs-number">12.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">13.</span>         <span class="hljs-comment">//使用PrintWriter.write()方法向前台页面输出内容</span><br><span class="hljs-number">14.</span>         resp.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><span class="hljs-number">15.</span>         PrintWriter writer = resp.getWriter();<br><span class="hljs-number">16.</span>         writer.write(<span class="hljs-string">&quot;胡小宁的博客欢迎你的到来，网址: 1905060202.github.io &quot;</span>);<br><span class="hljs-number">17.</span>         writer.close();<br><span class="hljs-number">18.</span>     &#125;<br><span class="hljs-number">19.</span>  <br><span class="hljs-number">20.</span>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">21.</span>         <span class="hljs-comment">//使用PrintWriter.write()方法gaifang向前台页面输出内容</span><br><span class="hljs-number">22.</span>         PrintWriter writer = resp.getWriter();<br><span class="hljs-number">23.</span>         writer.write(<span class="hljs-string">&quot;胡小宁的博客欢迎你的到来，网址: 1905060202.github.io &quot;</span>);<br><span class="hljs-number">24.</span>         writer.close();<br><span class="hljs-number">25.</span>         doGet(req, resp);<br><span class="hljs-number">26.</span>     &#125;<br><span class="hljs-number">27.</span> &#125;<br></code></pre></td></tr></table></figure>
<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>上面演示了三种创建 Servlet 的方式，那么在实际开发中，我们究竟该选择哪一种呢？下面我们就来分析和对比一下。</p>
<h4 id="1-Servlet-接口"><a href="#1-Servlet-接口" class="headerlink" title="1) Servlet 接口"></a>1) Servlet 接口</h4><p>通过实现 Servlet 接口创建 Servlet 类，需要重写其全部的方法，比较繁琐，所以我们很少使用该方法创建 Servlet。</p>
<h4 id="2-GenericServlet-类"><a href="#2-GenericServlet-类" class="headerlink" title="2) GenericServlet 类"></a>2) GenericServlet 类</h4><p>GenericServlet 抽象类实现了 Servlet 接口，并对 Servlet 接口中除 service() 方法外的其它四个方法进行了简单实现。通过继承 GenericServlet 创建 Servlet，只需要重写 service() 方法即可，大大减少了创建 Servlet 的工作量。</p>
<p> Generic 是“通用”的意思，正如其名，GenericServlet 是一个通用的 Servlet 类，并没有针对某种场景进行特殊处理，尤其是 HTTP 协议，我们必须手动分析和封装 HTPP 协议的请求信息和响应信息。</p>
<h4 id="3-HttpServlet-类"><a href="#3-HttpServlet-类" class="headerlink" title="3) HttpServlet 类"></a>3) HttpServlet 类</h4><p>HttpServlet 是 GenericServlet 的子类，它在 GenericServlet 的基础上专门针对 HTTP 协议进行了处理。HttpServlet 为 HTTP 协议的每种请求方式都提供了对应的方法，名字为 doXxx()，例如：</p>
<p>·    处理 GET 请求的方法为 doGet()；</p>
<p>·    处理 POST 请求的方法为 doPost()。</p>
<p> 正如其名，HttpServlet 就是专为 HTTP 协议而量身打造的 Servlet 类。</p>
<p> <strong>在互联网上，人们都是通过 HTTP 协议来访问动态网页的，其中使用最频繁的就是 GET 方式和 POST 方式，因此，我们通常基于 HttpServlet 来创建 Servlet 类，这样就省去了处理 HTTP 请求的过程。</strong></p>
<h1 id="Servlet的部署和访问"><a href="#Servlet的部署和访问" class="headerlink" title="Servlet的部署和访问"></a>Servlet的部署和访问</h1><p>Servlet 没有 main() 方法，不能独立运行，但它可以作为 JavaWeb 应用的一个组件被部署到 Servlet 容器中，由容器来实例化和调用 Servlet 的方法，例如：doGet() 、doPost() 等。</p>
<p> 那么，JavaWeb 应用是什么呢？Servlet 是如何部署和访问的呢？本节我们将针对这些问题进行讲解。</p>
<h3 id="JavaWeb-应用"><a href="#JavaWeb-应用" class="headerlink" title="JavaWeb 应用"></a>JavaWeb 应用</h3><p>JavaWeb 应用由一组 Servlet/JSP、HTML 文件、相关 Java 类、以及其他的资源组成，它可以在由各种供应商提供的 Servlet 容器中运行。由 JavaWeb 应用的定义可知， Servlet 是 JavaWeb 应用的一个组件。</p>
<p> 为了让 Servlet 容器顺利地找到 JavaWeb 应用的各个组件，Servlet 规范规定，JavaWeb 应用必须采用固定的目录结构，即每种组件在 JavaWeb 应用中都有固定的存放目录。</p>
<p> 以 Tomcat 为例，通常将 JavaWeb 应用存放到 Tomcat 的 webapps 目录下。在 webapps 下，每一个子目录都是一个独立的 Web 应用，子目录的名字就是 Web 应用的名字，也被称为 Web 应用的上下文根。用户可以通过这个上下文根来访问 JavaWeb 应用中的资源。</p>
<p> webapps 的目录结构如下图。</p>
<p><img src="/images/python/clip_image010.png" alt="JavaWeb 结构图"></p>
<p> 下表中对 webapps 下各个目录进行了介绍。</p>
<table>
<thead>
<tr>
<th><strong>目录</strong></th>
<th><strong>描述</strong></th>
<th><strong>是否必需</strong></th>
</tr>
</thead>
<tbody><tr>
<td>\servletDemo</td>
<td>Web 应用的根目录，属于该 Web 应用的所有资源都存放在这个目录下。</td>
<td>是</td>
</tr>
<tr>
<td>\servletDemo\WEB-INF</td>
<td>存放 web.xml、lib 目录以及  classes 目录等。</td>
<td>是</td>
</tr>
<tr>
<td>\servletDemo\WEB-INF\classes</td>
<td>存放各种 .class 文件或者包含 .class 文件的目录，Servlet 类的 .class 文件也存放在此。</td>
<td>否</td>
</tr>
<tr>
<td>\servletDemo\WEB-INF\lib</td>
<td>存放应用所需的各种 jar 包，例如 JDBC 驱动程序的 jar 包。</td>
<td>否</td>
</tr>
<tr>
<td>\servletDemo\WEB-INF\web.xml</td>
<td>web.xml 中包含应用程序的配置和部署信息。</td>
<td>是</td>
</tr>
</tbody></table>
<h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>在 Tomcat 中部署 JavaWeb 应用最快捷的方式，就是直接将 JavaWeb 应用的所有文件复制到 Tomcat 的 /webapps 目录下。在默认情况下，Tomcat 会自动加载 webapps 目录下的 JavaWeb 应用，并把它发布到名为 localhost 的虚拟主机中。</p>
<p> Tomcat 既可以运行采用开放式目录结构（只编译不打包）的 Web 应用，也可以运行 Web 应用的打包文件（WAR 文件）。在开发阶段，为了方便程序调试，通常采用开放式的目录结构部署 JavaWeb 应用。在开发完成，进入产品发布阶段时，就应该将整个应用打包成 WAR 文件，再进行部署。</p>
<p>即使采用 WAR 文件的形式发布，Tomcat 启动时也会将 WAR 文件自动展开为开放式的目录结构。</p>
<p>在本案例中，我们将采用开放式的目录结构进行部署，具体操作步骤如下。 </p>
<h4 id="1-进入-Windows-DOS-命令行窗口"><a href="#1-进入-Windows-DOS-命令行窗口" class="headerlink" title="1. 进入 Windows DOS 命令行窗口"></a>1. 进入 Windows DOS 命令行窗口</h4><p>我们知道，编译 Java 源代码一般可以通过两种方式完成：DOS 命令行 和 IDE（集成开发环境）。使用 IDE 可以一键完成编译工作，十分的方便，但 IDE 给我们带来方便的同时，也隐藏了编译过程中的许多细节，我们无法了解其中的原理和机制。</p>
<p> 对于初学者来说，为了更加深刻地理解 Servlet 的运行原理和机制，最好的办法就是使用 DOS 命令行进行编译。</p>
<p> 使用快捷键 “Windows + R”，打开运行对话框，在对话框输入<code>cmd</code>，点击“确定”，进入 Windows 系统命令行窗口，如图。</p>
<p><img src="/images/python/clip_image011.jpg" alt="cmd"></p>
<h4 id="2-引入-javax-servlet-包"><a href="#2-引入-javax-servlet-包" class="headerlink" title="2. 引入 javax.servlet 包"></a><strong>2.</strong> <strong>引入 javax.servlet 包</strong></h4><p>由于 Servlet 是 JavaEE 下的技术标准，不是 JDK 的组成部分，所以在编译 Servlet 前，需要先引入 servlet-api.jar 包（在 Apache Tomcat 安装目录下的 lib 文件夹中提供了此 jar 包）。</p>
<p> 使用命令<code>set classpath</code>可以将 servlet-api.jar 引入，该命令的语法如下，其中 path 表示引入 jar 包的路径。</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">·        <span class="hljs-built_in">set</span> classpath = <span class="hljs-built_in">path</span><br></code></pre></td></tr></table></figure>

<p> 为了方便操作，可以先在命令行中输入<code>set classpath=</code>，然后将 servlet-api.jar 文件拖进命令行内，回车执行。</p>
<p><img src="/images/python/clip_image012-16376571425082.png" alt="set calsspath"></p>
<p> <strong>注：</strong><code>**set classpath**</code><strong>命令用来为当前窗口设置临时环境变量，只在当前窗口下有效。**</strong></p>
<p>**</p>
<h4 id="3-编译-Servlet"><a href="#3-编译-Servlet" class="headerlink" title="3. 编译 Servlet"></a><strong>3.</strong> <strong>编译 Servlet</strong></h4><p>1）在命令提示符中使用 <code>cd</code>命令进入 MyServlet.java 所在的目录。</p>
<p><img src="/images/python/clip_image013.png" alt="servlet cd"></p>
<p> 2）使用 <code>javac -encoding UTF-8 -d . MyServlet.java</code>命令进行编译，若没有报错，则编译成功。</p>
<p><img src="/images/python/clip_image014.png"></p>
<p> 其中：</p>
<p>·    <code>javac</code> ：编译命令；</p>
<p>·    <code>-encoding UTF-8</code>：用于指定编译源文件时的字符编码，这里指定为 UTF-8；</p>
<p>·    <code>javac -d</code>：带包编译 ；</p>
<p>·    <code> .</code>：表示当前位置。</p>
<p> 3）进入 MyServlet.java 文件所在的目录，可发现新增了编译后的目录和 .classes 字节码文件，自此我们就完成了对 Servlet 的编译工作。</p>
<p><img src="/images/python/clip_image016-16376571425083.jpg"> </p>
<h4 id="4-创建目录结构"><a href="#4-创建目录结构" class="headerlink" title="4. 创建目录结构"></a><strong>4.</strong> <strong>创建目录结构</strong></h4><p>在完成对 Servlet 的编译后，下一步依照 JavaWeb 应用的固定目录结构，在 Tomcat 中为该 Servlet 创建目录。</p>
<ol>
<li><p>在 Tomcat 的 webapps 目录中创建 servletDemo（web 应用的名字，由自己定义）文件夹；</p>
</li>
<li><p>在 servletDemo 文件夹内创建 WEB-INF 文件夹；</p>
</li>
<li><p>在 WEB-INF 内创建 classes 文件夹；</p>
</li>
<li><p>在 WEB-INF 内创建配置文件 web.xml（可以复制 \webapps\ROOT\WEB-INF 中的 web.xml 使用）。</p>
</li>
</ol>
<h4 id="5-将-Servlet-移动到-Tomcat-目录中"><a href="#5-将-Servlet-移动到-Tomcat-目录中" class="headerlink" title="5. 将 Servlet 移动到 Tomcat 目录中"></a><strong>5.</strong> <strong>将 Servlet 移动到 Tomcat 目录中</strong></h4><p>将编译好的字节码和目录移动到 Tomcat\webapps\servletDemo\WEB-INF\classes 目录下。<br> <img src="/images/python/clip_image018-16376571425084.jpg"></p>
<h4 id="6-配置-web-xml"><a href="#6-配置-web-xml" class="headerlink" title="6. 配置 web.xml"></a><strong>6.</strong> <strong>配置 web.xml</strong></h4><p>对 webapps\servletDemo\WEB-INF 目录的 web.xml 中进行配置，具体配置代码如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">1.  <span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br>2.  <span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">3.</span>  <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">4.</span>  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://java.sun.com/xml/ns/javaee</span></span><br><span class="hljs-tag"><span class="hljs-string">5.     http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">6.</span>  <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;3.0&quot;</span> <span class="hljs-attr">metadata-complete</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>7.      <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>8.          <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>9.          <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>io.github.1905060202.www.MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>10.     <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>11.    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>12.         <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>13.         <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/MyServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>14.     <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br>15. <span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p> web.xml 中各元素含义及用法如下：</p>
<p>·    <web-app>： 根元素。</p>
<p>·    <servlet> ：用于注册 Servlet，即给 Servlet 起一个独一无二的名字。</p>
<p>·    <servlet> 包含两个主要的子元素 <servlet-name> 和 <servlet-class>，分别用于指定 Servlet 的名称和 Servlet 的完整限定名（包名+类名）。</p>
<p>·    <servlet-mapping> ：用于定义 Servlet 与 URL 之间的映射。</p>
<p>·    <servlet-mapping> 包含两个子元素 <servlet-name> 和 <url-pattern>，分别用于指定 Servlet 的名称和虚拟路径。</p>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><p>进入 Tomcat\bin 目录下双击 startup.bat，启动 Tomcat。</p>
<p><img src="/images/python/clip_image019.png" alt="tomcat 启动"></p>
<p> Tomcat 启动成功后，在地址栏中输入“<a target="_blank" rel="noopener" href="http://localhost:8080/servletDemo/MyServlet%E2%80%9D%EF%BC%8C%E8%AE%BF%E9%97%AE">http://localhost:8080/servletDemo/MyServlet”，访问</a> MyServlet，结果如下图。</p>
<p><img src="/images/python/clip_image021.jpg"></p>
<p> 访问路径 <a target="_blank" rel="noopener" href="http://localhost:8080/servletDemo/MyServlet">http://localhost:8080/servletDemo/MyServlet</a> 中，各部分含义如下：</p>
<p>·    http:// 表示 HTTP 协议；</p>
<p>·    localhost: 表示服务器 IP；</p>
<p>·    8080 表示端口号；</p>
<p>·    /servletDemo 表示 Web 应用的上下文根路径；</p>
<p>·    /MyServlet 表示资源路径，即 web.xml 中 <url-pattern> 元素的取值。</p>
<h1 id="IDEA创建Servlet项目"><a href="#IDEA创建Servlet项目" class="headerlink" title="IDEA创建Servlet项目"></a>IDEA创建Servlet项目</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>之前发现 IDEA 没法新建 Servlet 项目，正好最近要用 Servlet 写个小项目，开个文章记录一下。<br> 本文使用的 IDEA 版本为 2020.2</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li><p>首先新建项目<br> <img src="/images/python/clip_image023.png"></p>
</li>
<li><p>选择 Java 项目，直接 Next<br> <img src="/images/python/clip_image025.png"></p>
</li>
<li><p>继续 Next<br> <img src="../images/python/clip_image027.png" alt="3"></p>
</li>
<li><p>修改一下 Project Name，点击 Finish<br> <img src="/images/python/clip_image029.png"></p>
</li>
</ol>
<h2 id="添加-Framework"><a href="#添加-Framework" class="headerlink" title="添加 Framework"></a>添加 Framework</h2><ol>
<li><p>在工程上右键，选择 <code>Add Framework Support</code><br> <img src="/images/python/clip_image031.png"></p>
</li>
<li><p>勾选 Web Application，点击 OK<br> <img src="/images/python/clip_image033.png"></p>
</li>
<li><p>可以看到工程结构下多了个 web 目录<br> <img src="/images/python/clip_image035.png"></p>
</li>
</ol>
<h2 id="新建文件夹"><a href="#新建文件夹" class="headerlink" title="新建文件夹"></a>新建文件夹</h2><ol>
<li><p>在 <code>web/WEB-INF</code> 目录下新建一个 classes 文件夹<br> <img src="/images/python/clip_image036.png"></p>
</li>
<li><p>配置 Project Structure<br> <img src="/images/python/clip_image038.png"></p>
</li>
</ol>
<p>在 <code>Modules——Path</code> 下，修改 <code>Compiler Output</code>，选择 <code>Use module compile output path</code>，修改两个内容框为刚才新建的 classes 目录，点击时工构发生变化</p>
<p><img src="/images/python/clip_image040.png"></p>
<p><img src="/images/python/clip_image042.png"></p>
<h2 id="导入-servlet-api-jar"><a href="#导入-servlet-api-jar" class="headerlink" title="导入 servlet-api.jar"></a>导入 servlet-api.jar</h2><ol>
<li><p>下载 tomcat，我下载的是 tomcat8<br> <a target="_blank" rel="noopener" href="https://blog.wanvale.com/go/aHR0cHM6Ly90b21jYXQuYXBhY2hlLm9yZy8=">https://tomcat.apache.org/</a></p>
</li>
<li><p>进入 <code>Project Structure</code>——<code>Modules</code>——<code>Dependencies</code>，点击下面的加号<br> <img src="/images/python/clip_image044.png"></p>
</li>
<li><p>选择 <code>JARs or directories</code>，找到刚才下载解压的 tomcat 目录中的 <code>lib</code> 文件夹下的 <code>servlet-api.jar</code>，确定。<br> <img src="/images/python/clip_image046.png"></p>
</li>
<li><p>添加完成后选择 OK 即可<br> <img src="/images/python/clip_image048.png"></p>
</li>
</ol>
<h2 id="创建-Servlet-测试"><a href="#创建-Servlet-测试" class="headerlink" title="创建 Servlet 测试"></a>创建 Servlet 测试</h2><ol>
<li>在 src 下新建一个测试用的 Servlet<br> <img src="/images/python/clip_image050.png"></li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs scala">·        <span class="hljs-keyword">package</span> com.wanvale.lms;<br>·         <br>·         <br>·         <br>·        <span class="hljs-keyword">import</span> javax.servlet.<span class="hljs-type">ServletException</span>;<br>·         <br>·        <span class="hljs-keyword">import</span> javax.servlet.annotation.<span class="hljs-type">WebServlet</span>;<br>·         <br>·        <span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServlet</span>;<br>·         <br>·        <span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletRequest</span>;<br>·         <br>·        <span class="hljs-keyword">import</span> javax.servlet.http.<span class="hljs-type">HttpServletResponse</span>;<br>·         <br>·        <span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;<br>·         <br>·         <br>·         <br>·        <span class="hljs-meta">@WebServlet</span>(&#123;<span class="hljs-string">&quot;/test&quot;</span>, <span class="hljs-string">&quot;/get&quot;</span>&#125;)<br>·         <br>·        public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br>·         <br>·            <span class="hljs-meta">@Override</span><br>·         <br>·            <span class="hljs-keyword">protected</span> void doPost(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>·         <br>·                resp.getWriter().write(<span class="hljs-string">&quot;POST Method&quot;</span>);<br>·         <br>·            &#125;<br>·         <br>·         <br>·         <br>·            <span class="hljs-meta">@Override</span><br>·         <br>·            <span class="hljs-keyword">protected</span> void doGet(<span class="hljs-type">HttpServletRequest</span> req, <span class="hljs-type">HttpServletResponse</span> resp) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> &#123;<br>·         <br>·                resp.getWriter().write(<span class="hljs-string">&quot;GET Method&quot;</span>);<br>·         <br>·            &#125;<br>·         <br>·        &#125;<br>·         <br></code></pre></td></tr></table></figure>
<ol>
<li><p>选择菜单栏中的 <code>Run</code>——<code>Run</code><br> <img src="/images/python/clip_image052.png"></p>
</li>
<li><p>选择 <code>Edit Configuration</code><br> <img src="/images/python/clip_image053.png"></p>
</li>
<li><p>添加一个 Local Tomcat Server<br> <img src="/images/python/clip_image055.png"></p>
</li>
<li><p>点击 <code>Configure</code> 添加 Tomcat<br> <img src="/images/python/clip_image057.png"></p>
</li>
<li><p>选择 Tomcat 路径，点击 OK<br> <img src="/images/python/clip_image059.png"></p>
</li>
<li><p>配置一下 <code>Deployment</code> 和 <code>Server</code> 的参数<br> <img src="/images/python/clip_image061.png"></p>
</li>
</ol>
<p><img src="/images/python/clip_image063.png"></p>
<ol start="7">
<li>点击 Run，等待 Server 跑起来以后访问测试一下<br> <img src="/images/python/clip_image065.png"></li>
</ol>
<p><img src="/images/python/clip_image067.png"></p>
<p>至此，配置运行结束。</p>
<h1 id="WebServlet注解（Servlet注解）"><a href="#WebServlet注解（Servlet注解）" class="headerlink" title="@WebServlet注解（Servlet注解）"></a>@WebServlet注解（Servlet注解）</h1><p>在 Servlet 中，web.xml 扮演的角色十分的重要，它可以将所有的 Servlet 的配置集中进行管理，但是若项目中 Servelt 数量较多时，web.xml 的配置会变得十分的冗长。这种情况下，注解（Annotation）就是一种更好的选择。</p>
<p> 与 XML 不同，注解不需要依赖于配置文件，它可以直接在类中使用，其配置只对当前类有效，这样就避免了集中管理造成的配置冗长问题。那么 Servelt 支持注解吗？</p>
<p> 为了简化 Servlet 的配置，Servlet 3.0 中增加了注解支持，例如：@WebServlet、@WebInitParm 、@WebFilter 和 @WebLitener 等，这使得 web.xml 从 Servlet 3.0 开始不再是必选项了。下面我们对 @WebServlet 进行介绍。</p>
<h2 id="WebServlet-注解的属性"><a href="#WebServlet-注解的属性" class="headerlink" title="@WebServlet 注解的属性"></a>@WebServlet 注解的属性</h2><p>@WebServlet 用于将一个类声明为 Servlet，该注解会在部署时被容器处理，容器根据其具体的属性配置将相应的类部署为 Servlet。该注解具有下表给出的一些常用属性。</p>
<table>
<thead>
<tr>
<th><strong>属性名</strong></th>
<th><strong>类型</strong></th>
<th><strong>标签</strong></th>
<th><strong>描述</strong></th>
<th><strong>是否必需</strong></th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>String</td>
<td><servlet-name></td>
<td>指定 Servlet 的 name 属性。   如果没有显式指定，则取值为该 Servlet 的完全限定名，即包名+类名。</td>
<td>否</td>
</tr>
<tr>
<td>value</td>
<td>String[ ]</td>
<td><url-pattern></td>
<td>该属性等价于 urlPatterns 属性，两者不能同时指定。   如果同时指定，通常是忽略 value 的取值。</td>
<td>是</td>
</tr>
<tr>
<td>urlPatterns</td>
<td>String[ ]</td>
<td><url-pattern></td>
<td>指定一组 Servlet 的 URL 匹配模式。</td>
<td>是</td>
</tr>
<tr>
<td>loadOnStartup</td>
<td>int</td>
<td><load-on-startup></td>
<td>指定 Servlet 的加载顺序。</td>
<td>否</td>
</tr>
<tr>
<td>initParams</td>
<td>WebInitParam[ ]</td>
<td><init-param></td>
<td>指定一组 Servlet 初始化参数。</td>
<td>否</td>
</tr>
<tr>
<td>asyncSupported</td>
<td>boolean</td>
<td><async-supported></td>
<td>声明 Servlet 是否支持异步操作模式。</td>
<td>否</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td><description></td>
<td>指定该 Servlet 的描述信息。</td>
<td>否</td>
</tr>
<tr>
<td>displayName</td>
<td>String</td>
<td><display-name></td>
<td>指定该 Servlet 的显示名。</td>
<td>否</td>
</tr>
</tbody></table>
<h2 id="WebServlet-注解的使用"><a href="#WebServlet-注解的使用" class="headerlink" title="@WebServlet 注解的使用"></a>@WebServlet 注解的使用</h2><h4 id="1-启用注解支持"><a href="#1-启用注解支持" class="headerlink" title="1. 启用注解支持"></a>1. 启用注解支持</h4><p>web.xml 的顶层标签 <web-app> 中有一个属性：metadata-complete，该属性用于指定当前 web.xml 是否是完全的。若该属性设置为 true，则容器在部署时将只依赖 web.xml，忽略所有的注解。若不配置该属性，或者将其设置为 false，则表示启用注解支持。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml">1.	<span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br>2.	<span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">3.</span>	    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">4.</span>	    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">5.</span>	    <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;WebApp_ID&quot;</span> <span class="hljs-attr">metadata-complete</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br>6.	    <span class="hljs-comment">&lt;!-- metadata-complete取值为true，表示关闭注解支持 --&gt;</span><br>7.	    <span class="hljs-comment">&lt;!-- metadata-complete取值为false，表示启用注解支持 --&gt;</span><br>8.	<span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>由于 metadata-complete 属性的默认值是 false，即默认启用 Servlet 注解支持，所以默认情况下，使用该注解时，不必创建 web.xml 文件。</p>
<h4 id="2-使用-WebServlet-注解"><a href="#2-使用-WebServlet-注解" class="headerlink" title="2. 使用 @WebServlet 注解"></a>2. 使用 @WebServlet 注解</h4><p>@WebServlet 属于类级别的注解，标注在继承了 HttpServlet 的类之上。常用的写法是将 Servlet 的相对请求路径（即 value）直接写在注解内，如下所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">•	<span class="hljs-meta">@WebServlet(&quot;/MyServlet&quot;)</span> <br></code></pre></td></tr></table></figure>
<p>该写法省略了 urlPatterns 属性名，其完整的写法如下所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">•	<span class="hljs-meta">@WebServlet(urlPatterns = &quot;/MyServlet&quot;)</span>。<br></code></pre></td></tr></table></figure>
<p>如果 @WebServlet 中需要设置多个属性，则属性之间必须使用逗号隔开，如下所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>	<span class="hljs-keyword">package</span> net.biancheng.www;<br><span class="hljs-number">2.</span>	<br><span class="hljs-number">3.</span>	<span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-number">4.</span>	<span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-number">5.</span>	<span class="hljs-keyword">import</span> javax.servlet.annotation.WebInitParam;<br><span class="hljs-number">6.</span>	<span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-number">7.</span>	<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-number">8.</span>	<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-number">9.</span>	<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-number">10.</span>	<br><span class="hljs-number">11.</span>	<span class="hljs-meta">@WebServlet(asyncSupported = true, name = &quot;myServlet&quot;, description = &quot;name描述&quot;, loadOnStartup = 1, urlPatterns = &#123;</span><br><span class="hljs-meta">12.	        &quot;/MyServlet&quot;, &quot;/*&quot; &#125;, initParams = &#123;</span><br><span class="hljs-meta">13.	                @WebInitParam(name = &quot;编程帮&quot;, value = &quot;www.biancheng.net&quot;, description = &quot;init参数1&quot;),</span><br><span class="hljs-meta">14.	                @WebInitParam(name = &quot;京东&quot;, value = &quot;www.jd.com&quot;, description = &quot;init参数2&quot;) &#125;)</span><br><span class="hljs-number">15.</span>	<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><span class="hljs-number">16.</span>	    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1L</span>;<br><span class="hljs-number">17.</span>	<br><span class="hljs-number">18.</span>	    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="hljs-function">19.	            <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">20.</span>	    &#125;<br><span class="hljs-number">21.</span>	<br><span class="hljs-number">22.</span>	    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="hljs-function">23.	            <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">24.</span>	    &#125;<br><span class="hljs-number">25.</span>	<br><span class="hljs-number">26.</span>	&#125;<br><br></code></pre></td></tr></table></figure>
<p>注意事项：</p>
<ul>
<li>通过实现 Serlvet 接口或继承 GenericServlet 创建的 Servlet 类无法使用 @WebServlet 注解。</li>
<li>使用 @WebServlet 注解配置的 Servlet 类，不要在 web.xml 文件中再次配置该 Servlet 相关属性。若同时使用 web.xml 与 @WebServlet 配置同一 Servlet 类，则 web.xml 中 <servlet-name> 的值与注解中 name 取值不能相同，否则容器会忽略注解中的配置。</li>
</ul>
<h2 id="WebServlet-注解-和-web-xml-的优缺点"><a href="#WebServlet-注解-和-web-xml-的优缺点" class="headerlink" title="@WebServlet 注解 和 web.xml 的优缺点"></a>@WebServlet 注解 和 web.xml 的优缺点</h2><p>使用 web.xml 或 @WebServlet 注解都可以配置 Servlet， 两者各有优缺点。 @WebServlet 注解配置 Servlet  优点：@WebServlet 直接在 Servlet 类中使用，代码量少，配置简单。每个类只关注自身业务逻辑，与其他 Servlet 类互不干扰，适合多人同时开发。</p>
<p> 缺点：Servlet 较多时，每个 Servlet 的配置分布在各自的类中，不便于查找和修改。 web.xml 配置文件配置 Servlet  优点：集中管理 Servlet 的配置，便于查找和修改。</p>
<p> 缺点：代码较繁琐，可读性不强，不易于理解。</p>
<h1 id="Servlet生命周期（附带实例）"><a href="#Servlet生命周期（附带实例）" class="headerlink" title="Servlet生命周期（附带实例）"></a>Servlet生命周期（附带实例）</h1><p>生命周期是指事物从创建到毁灭的过程。人的生命周期就是从出生到死亡的过程，在这个过程中，必定会有一些与生命周期息息相关的事件，如：出生、吃饭、上学、死亡等。这些事件会在生命周期中的某个特定时刻发生。</p>
<p> Servlet 也有生命周期，Servlet 的生命周期就是 Servlet 从创建到销毁的过程。Servlet 的生命周期由 Servlet 容器管理，主要分为以下 3 个阶段。</p>
<ol>
<li>初始化阶段</li>
<li>运行时阶段</li>
<li>销毁阶段</li>
</ol>
<p> 在 javax.servlet.Servlet 接口中定义了 3 个方法：init()、service()、destory()，它们分别在 Servlet 生命周期的不同阶段被 Servlet 容器调用。</p>
<h2 id="初始化阶段"><a href="#初始化阶段" class="headerlink" title="初始化阶段"></a>初始化阶段</h2><p>Servlet 初始化是其生命周期的第一个阶段，也是其他阶段的基础。只有完成了初始化，Servlet 才能处理来自客户端的请求。</p>
<p> Servlet 初始化阶段分为 2 步：  加载和实例化 Servlet； 调用 init() 方法进行初始化。  1. 加载和实例化 Servlet  Servlet 容器负责加载和实例化 Servlet。当容器启动或首次请求某个 Servlet 时，容器会读取 web.xml 或 @WebServlet 中的配置信息，对指定的 Servlet 进行加载。加载成功后，容器会通过反射对 Servlet 进行实例化。</p>
<p>  因为 Servlet 容器是通过 Java 的反射 API 来创建 Servlet 实例的，需要调用 Servlet 的默认构造方法（default constructor，即不带参数的构造方法），所以在编写 Servlet 类时，不能只提供一个带参数的构造方法。 2. 调用 init() 方法进行初始化  加载和实例化完成后，Servlet 容器调用 init() 方法初始化 Servlet 实例。</p>
<p> 初始化的目的：让 Servlet 实例在处理请求之前完成一些初始化工作，例如建立数据库连接，获取配置信息等。</p>
<p> 在 Servlet 的整个生命周期内，init() 方法只能被调用一次。</p>
<p> 初始化期间，Servlet 实例可以通过 ServletConfig 对象获取在 web.xml 或者 @WebServlet 中配置的初始化参数。</p>
<h2 id="运行时阶段"><a href="#运行时阶段" class="headerlink" title="运行时阶段"></a>运行时阶段</h2><p>运行时阶段是 Servlet 生命周期中最重要的阶段。Servlet 容器接收到来自客户端请求时，容器会针对该请求分别创建一个 ServletRequst 对象和 ServletResponse 对象，将它们以参数的形式传入 service() 方法内，并调用该方法对请求进行处理。</p>
<p> 这里需要注意的是，执行 service() 方法前，init() 方法必须已成功执行。</p>
<p> 在 service() 方法中，Servlet 通过 ServletRequst 对象获取客户端的相关信息和请求信息。在请求处理完成后，通过 ServletResponse 对象将响应信息进行包装，返回给客户端。当 Servlet 容器将响应信息返回给客户端后，ServletRequst 对象与 ServletResponse 对象就会被销毁。</p>
<p> 在 Servlet 的整个生命周期内，对于 Servlet 的每一次请求，Servlet 容器都会调用一次 service() 方法，并创建新的 ServletRequest 和 ServletResponse 对象。即 service() 方法在 Servlet 的整个生命周期中会被调用多次。</p>
<h2 id="销毁阶段"><a href="#销毁阶段" class="headerlink" title="销毁阶段"></a>销毁阶段</h2><p>当 Servlet 容器关闭、重启或移除 Servlet 实例时，容器就会调用 destory() 方法，释放该实例使用的资源，例如：关闭数据库连接，关闭文件的输入流和输出流等，随后该实例被 Java 的垃圾收集器所回收。</p>
<p> 对于每个 Servlet 实例来说，destory() 方法只能被调用一次。</p>
<h2 id="Servlet-生命周期执行流程"><a href="#Servlet-生命周期执行流程" class="headerlink" title="Servlet 生命周期执行流程"></a>Servlet 生命周期执行流程</h2><p> Servlet 生命周期流程如下图所示。</p>
<p>  <img src="/images/python/clip_image002.png" alt="Servlet 生命周期"><br> 在 Servlet 的整个生命周期中，创建 Servlet 实例、init() 方法和 destory() 方法都只执行一次。当初始化完成后，Servlet 容器会将该实例保存在内存中，通过调用它的 service() 方法，为接收到的请求服务。</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p> 下面通过一个案例加深对 Servlet 生命周期的理解。</p>
<ol>
<li>在 servletDemo 项目中，对 MyServlet.java 进行修改，代码如下：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>	<span class="hljs-keyword">package</span> net.biancheng.www;<br><span class="hljs-number">2.</span>	<br><span class="hljs-number">3.</span>	<span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-number">4.</span>	<span class="hljs-keyword">import</span> java.io.PrintWriter;<br><span class="hljs-number">5.</span>	<br><span class="hljs-number">6.</span>	<span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-number">7.</span>	<span class="hljs-keyword">import</span> javax.servlet.annotation.WebInitParam;<br><span class="hljs-number">8.</span>	<span class="hljs-keyword">import</span> javax.servlet.annotation.WebServlet;<br><span class="hljs-number">9.</span>	<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-number">10.</span>	<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-number">11.</span>	<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-number">12.</span>	<br><span class="hljs-number">13.</span>	<span class="hljs-meta">@WebServlet(&quot;/MyServlet&quot;)</span><br><span class="hljs-number">14.</span>	<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;<br><span class="hljs-number">15.</span>	    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1L</span>;<br><span class="hljs-number">16.</span>	    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> initCount = <span class="hljs-number">0</span>;<br><span class="hljs-number">17.</span>	    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> httpCount = <span class="hljs-number">0</span>;<br><span class="hljs-number">18.</span>	    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> destoryCount = <span class="hljs-number">0</span>;<br><span class="hljs-number">19.</span>	<br><span class="hljs-number">20.</span>	    <span class="hljs-meta">@Override</span><br><span class="hljs-number">21.</span>	    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-number">22.</span>	        destoryCount++;<br><span class="hljs-number">23.</span>	        <span class="hljs-keyword">super</span>.destroy();<br><span class="hljs-number">24.</span>	        <span class="hljs-comment">// 向控制台输出destory方法被调用次数</span><br><span class="hljs-number">25.</span>	        System.out.println(<br><span class="hljs-number">26.</span>	                <span class="hljs-string">&quot;**********************************destroy方法：&quot;</span> + destoryCount + <span class="hljs-string">&quot;*******************************&quot;</span>);<br><span class="hljs-number">27.</span>	    &#125;<br><span class="hljs-number">28.</span>	<br><span class="hljs-number">29.</span>	    <span class="hljs-meta">@Override</span><br><span class="hljs-number">30.</span>	    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;<br><span class="hljs-number">31.</span>	        initCount++;<br><span class="hljs-number">32.</span>	        <span class="hljs-keyword">super</span>.init();<br><span class="hljs-number">33.</span>	        <span class="hljs-comment">// 向控制台输出init方法被调用次数</span><br><span class="hljs-number">34.</span>	        System.out.println(<span class="hljs-string">&quot;init方法：&quot;</span> + initCount);<br><span class="hljs-number">35.</span>	    &#125;<br><span class="hljs-number">36.</span>	<br><span class="hljs-number">37.</span>	    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">38.</span>	        httpCount++;<br><span class="hljs-number">39.</span>	        <span class="hljs-comment">// 控制台输出doGet方法次数</span><br><span class="hljs-number">40.</span>	        System.out.println(<span class="hljs-string">&quot;doGet方法：&quot;</span> + httpCount);<br><span class="hljs-number">41.</span>	        <span class="hljs-comment">// 设置返回页面格式与字符集</span><br><span class="hljs-number">42.</span>	        resp.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);<br><span class="hljs-number">43.</span>	        PrintWriter writer = resp.getWriter();<br><span class="hljs-number">44.</span>	        <span class="hljs-comment">// 向页面输出</span><br><span class="hljs-number">45.</span>	        writer.write(<span class="hljs-string">&quot;初始化次数:&quot;</span> + initCount + <span class="hljs-string">&quot;&lt;br/&gt;&quot;</span> + <span class="hljs-string">&quot;处理请求次数:&quot;</span> + httpCount + <span class="hljs-string">&quot;&lt;br/&gt;&quot;</span> + <span class="hljs-string">&quot;销毁次数:&quot;</span> + destoryCount);<br><span class="hljs-number">46.</span>	        writer.close();<br><span class="hljs-number">47.</span>	    &#125;<br><span class="hljs-number">48.</span>	<br><span class="hljs-number">49.</span>	    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="hljs-function">50.	            <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;<br><span class="hljs-number">51.</span>	    &#125;<br><span class="hljs-number">52.</span>	<br><span class="hljs-number">53.</span>	&#125;<br></code></pre></td></tr></table></figure>
<ol start="2">
<li>启动 Tomcat，在地址栏输入“<a target="_blank" rel="noopener" href="http://localhost:8080/servletDemo/MyServlet%E2%80%9D%EF%BC%8C%E5%A4%9A%E6%AC%A1%E8%AE%BF%E9%97%AE">http://localhost:8080/servletDemo/MyServlet”，多次访问</a> MyServlet，结果如下图。</li>
</ol>
<p><img src="/images/python/clip_image001-163765933330213.png" alt="Servlet生命周期"></p>
<ol start="3">
<li>控制台输出，如下图。</li>
</ol>
<p><img src="/images/python/clip_image003.png" alt="servlet生命周期1"></p>
<ol start="4">
<li>关闭 Tomcat 服务器，控制台输出如下图。 </li>
</ol>
<p><img src="/images/python/clip_image005.png" alt="Servlet 生命周期销毁"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">胡小宁</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://1905060202.github.io/2021/11/23/JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80-Servlet/">http://1905060202.github.io/2021/11/23/JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80-Servlet/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://1905060202.github.io" target="_blank">胡小宁的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web%E5%BC%80%E5%8F%91/">web开发</a><a class="post-meta__tags" href="/tags/Java-Web/">Java Web</a><a class="post-meta__tags" href="/tags/Servlet/">Servlet</a></div><div class="post_share"><div class="social-share" data-image="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/11/23/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90-%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/"><img class="prev-cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">算法设计与分析(算法分析技术)</div></div></a></div><div class="next-post pull-right"><a href="/2021/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%A0%E9%A2%98/"><img class="next-cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机网络习题</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/05/22/玩转JavaScript-一/" title="玩转JavaScript(一)"><img class="cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-22</div><div class="title">玩转JavaScript(一)</div></div></a></div><div><a href="/2021/05/23/玩转JavaScript-二/" title="玩转JavaScript(二)"><img class="cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-23</div><div class="title">玩转JavaScript(二)</div></div></a></div><div><a href="/2021/06/05/玩转Javascript-三/" title="玩转Javascript(三)"><img class="cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-05</div><div class="title">玩转Javascript(三)</div></div></a></div><div><a href="/2021/05/21/Vue项目实战-电商管理系统/" title="Vue项目实战-电商管理系统"><img class="cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-21</div><div class="title">Vue项目实战-电商管理系统</div></div></a></div><div><a href="/2021/06/15/基于SSM图书管理项目的各模块功能实现逻辑/" title="基于SSM图书管理项目的图书管理各模块功能实现逻辑"><img class="cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-15</div><div class="title">基于SSM图书管理项目的图书管理各模块功能实现逻辑</div></div></a></div><div><a href="/2021/06/16/基于SSM图书管理系统的图书预约功能实现逻辑/" title="基于SSM图书管理项目的图书预约功能实现逻辑"><img class="cover" src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-16</div><div class="title">基于SSM图书管理项目的图书预约功能实现逻辑</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/you.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">胡小宁</div><div class="author-info__description">虽千万人吾往矣</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">86</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">56</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1905060202"><i class="fab fa-github"></i><span>关注我</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/1905060202" target="_blank" title="关注我"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">四海之内皆兄弟</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80%EF%BC%88Servlet%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb编程基础（Servlet）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet"><span class="toc-number">1.1.</span> <span class="toc-text">Servlet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet-%E6%98%AF%E4%B8%80%E7%A7%8D%E8%A7%84%E8%8C%83"><span class="toc-number">1.2.</span> <span class="toc-text">Servlet 是一种规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.3.</span> <span class="toc-text">Servlet 接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSP"><span class="toc-number">1.4.</span> <span class="toc-text">JSP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E5%AE%B9%E5%99%A8%EF%BC%88Web%E5%AE%B9%E5%99%A8%EF%BC%89%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.</span> <span class="toc-text">Servlet容器（Web容器）是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text">Web 服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%EF%BC%88%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%89"><span class="toc-number">2.1.0.1.</span> <span class="toc-text">运行环境（运行时）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.1.0.2.</span> <span class="toc-text">数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">2.1.0.3.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-%E5%AE%B9%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">Web 容器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">2.2.0.1.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tomcat%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">Tomcat目录结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-bin-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.1.</span> <span class="toc-text">1. bin 目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-conf-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.2.</span> <span class="toc-text">2. conf 目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-lib-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.3.</span> <span class="toc-text">3. lib 目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-logs-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.4.</span> <span class="toc-text">4. logs 目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-temp-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.5.</span> <span class="toc-text">5. temp 目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-webapps-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.6.</span> <span class="toc-text">6. webapps 目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-work-%E7%9B%AE%E5%BD%95"><span class="toc-number">3.7.</span> <span class="toc-text">7. work 目录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E4%B8%89%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">Servlet三种创建方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E3%80%81GenericServlet-%E3%80%81HttpServlet-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">4.1.</span> <span class="toc-text">Servlet、GenericServlet 、HttpServlet 的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet-%E6%8E%A5%E5%8F%A3-1"><span class="toc-number">4.2.</span> <span class="toc-text">Servlet 接口</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">4.2.0.1.</span> <span class="toc-text">示例 1</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GenericServlet-%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">4.3.</span> <span class="toc-text">GenericServlet 抽象类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">4.3.0.1.</span> <span class="toc-text">示例 2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpServlet-%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">4.4.</span> <span class="toc-text">HttpServlet 抽象类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-3"><span class="toc-number">4.4.0.1.</span> <span class="toc-text">示例 3</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">4.5.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Servlet-%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.5.0.1.</span> <span class="toc-text">1) Servlet 接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-GenericServlet-%E7%B1%BB"><span class="toc-number">4.5.0.2.</span> <span class="toc-text">2) GenericServlet 类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-HttpServlet-%E7%B1%BB"><span class="toc-number">4.5.0.3.</span> <span class="toc-text">3) HttpServlet 类</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E7%9A%84%E9%83%A8%E7%BD%B2%E5%92%8C%E8%AE%BF%E9%97%AE"><span class="toc-number">5.</span> <span class="toc-text">Servlet的部署和访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaWeb-%E5%BA%94%E7%94%A8"><span class="toc-number">5.0.1.</span> <span class="toc-text">JavaWeb 应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2"><span class="toc-number">5.1.</span> <span class="toc-text">部署</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%BF%9B%E5%85%A5-Windows-DOS-%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AA%97%E5%8F%A3"><span class="toc-number">5.1.0.1.</span> <span class="toc-text">1. 进入 Windows DOS 命令行窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BC%95%E5%85%A5-javax-servlet-%E5%8C%85"><span class="toc-number">5.1.0.2.</span> <span class="toc-text">2. 引入 javax.servlet 包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BC%96%E8%AF%91-Servlet"><span class="toc-number">5.1.0.3.</span> <span class="toc-text">3. 编译 Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.0.4.</span> <span class="toc-text">4. 创建目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%B0%86-Servlet-%E7%A7%BB%E5%8A%A8%E5%88%B0-Tomcat-%E7%9B%AE%E5%BD%95%E4%B8%AD"><span class="toc-number">5.1.0.5.</span> <span class="toc-text">5. 将 Servlet 移动到 Tomcat 目录中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E9%85%8D%E7%BD%AE-web-xml"><span class="toc-number">5.1.0.6.</span> <span class="toc-text">6. 配置 web.xml</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE"><span class="toc-number">5.2.</span> <span class="toc-text">访问</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IDEA%E5%88%9B%E5%BB%BAServlet%E9%A1%B9%E7%9B%AE"><span class="toc-number">6.</span> <span class="toc-text">IDEA创建Servlet项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">6.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">6.2.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-Framework"><span class="toc-number">6.3.</span> <span class="toc-text">添加 Framework</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">6.4.</span> <span class="toc-text">新建文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5-servlet-api-jar"><span class="toc-number">6.5.</span> <span class="toc-text">导入 servlet-api.jar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-Servlet-%E6%B5%8B%E8%AF%95"><span class="toc-number">6.6.</span> <span class="toc-text">创建 Servlet 测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WebServlet%E6%B3%A8%E8%A7%A3%EF%BC%88Servlet%E6%B3%A8%E8%A7%A3%EF%BC%89"><span class="toc-number">7.</span> <span class="toc-text">@WebServlet注解（Servlet注解）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#WebServlet-%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">7.1.</span> <span class="toc-text">@WebServlet 注解的属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WebServlet-%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">7.2.</span> <span class="toc-text">@WebServlet 注解的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%90%AF%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81"><span class="toc-number">7.2.0.1.</span> <span class="toc-text">1. 启用注解支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-WebServlet-%E6%B3%A8%E8%A7%A3"><span class="toc-number">7.2.0.2.</span> <span class="toc-text">2. 使用 @WebServlet 注解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WebServlet-%E6%B3%A8%E8%A7%A3-%E5%92%8C-web-xml-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">7.3.</span> <span class="toc-text">@WebServlet 注解 和 web.xml 的优缺点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%88%E9%99%84%E5%B8%A6%E5%AE%9E%E4%BE%8B%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">Servlet生命周期（附带实例）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%98%B6%E6%AE%B5"><span class="toc-number">8.1.</span> <span class="toc-text">初始化阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E9%98%B6%E6%AE%B5"><span class="toc-number">8.2.</span> <span class="toc-text">运行时阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%80%E6%AF%81%E9%98%B6%E6%AE%B5"><span class="toc-number">8.3.</span> <span class="toc-text">销毁阶段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">8.4.</span> <span class="toc-text">Servlet 生命周期执行流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">8.5.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/11/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%A4%8D%E4%B9%A0/" title="大数据技术原理与应用复习"><img src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据技术原理与应用复习"/></a><div class="content"><a class="title" href="/2021/11/30/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%8A%80%E6%9C%AF%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8%E5%A4%8D%E4%B9%A0/" title="大数据技术原理与应用复习">大数据技术原理与应用复习</a><time datetime="2021-11-30T02:40:52.000Z" title="发表于 2021-11-30 10:40:52">2021-11-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/30/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-%E4%BB%A5%E4%BA%BA%E4%BA%8B%E6%8B%9B%E8%81%98%E4%B8%BA%E4%BE%8B%E7%9A%84%E8%AF%AF%E5%B7%AE%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD%E7%AE%97%E6%B3%95/" title="计算智能课程设计(以人事招聘为例的误差反向传播算法)"><img src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算智能课程设计(以人事招聘为例的误差反向传播算法)"/></a><div class="content"><a class="title" href="/2021/11/30/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-%E4%BB%A5%E4%BA%BA%E4%BA%8B%E6%8B%9B%E8%81%98%E4%B8%BA%E4%BE%8B%E7%9A%84%E8%AF%AF%E5%B7%AE%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD%E7%AE%97%E6%B3%95/" title="计算智能课程设计(以人事招聘为例的误差反向传播算法)">计算智能课程设计(以人事招聘为例的误差反向传播算法)</a><time datetime="2021-11-30T00:19:23.000Z" title="发表于 2021-11-30 08:19:23">2021-11-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/29/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-%E5%9F%BA%E4%BA%8E%E6%84%9F%E7%9F%A5%E6%9C%BA%E7%9A%84%E9%B8%A2%E5%B0%BE%E8%8A%B1%E5%88%86%E7%B1%BB/" title="计算智能课程设计(基于感知机的鸢尾花分类)"><img src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算智能课程设计(基于感知机的鸢尾花分类)"/></a><div class="content"><a class="title" href="/2021/11/29/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-%E5%9F%BA%E4%BA%8E%E6%84%9F%E7%9F%A5%E6%9C%BA%E7%9A%84%E9%B8%A2%E5%B0%BE%E8%8A%B1%E5%88%86%E7%B1%BB/" title="计算智能课程设计(基于感知机的鸢尾花分类)">计算智能课程设计(基于感知机的鸢尾花分类)</a><time datetime="2021-11-29T10:05:03.000Z" title="发表于 2021-11-29 18:05:03">2021-11-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/23/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90-%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/" title="算法设计与分析(算法分析技术)"><img src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="算法设计与分析(算法分析技术)"/></a><div class="content"><a class="title" href="/2021/11/23/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%88%86%E6%9E%90-%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/" title="算法设计与分析(算法分析技术)">算法设计与分析(算法分析技术)</a><time datetime="2021-11-23T08:58:16.000Z" title="发表于 2021-11-23 16:58:16">2021-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/23/JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80-Servlet/" title="JavaWeb编程基础(Servlet)"><img src="/images/%E5%B0%81%E9%9D%A2/%E5%9F%8E%E5%B8%821.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaWeb编程基础(Servlet)"/></a><div class="content"><a class="title" href="/2021/11/23/JavaWeb%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80-Servlet/" title="JavaWeb编程基础(Servlet)">JavaWeb编程基础(Servlet)</a><time datetime="2021-11-23T08:43:45.000Z" title="发表于 2021-11-23 16:43:45">2021-11-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 胡小宁</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --></body></html>