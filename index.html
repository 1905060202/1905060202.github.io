<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>胡小宁的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="胡小宁的博客"><meta name="msapplication-TileImage" content="/images/本人.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="胡小宁的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="胡小宁的博客"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="胡小宁的博客"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="胡小宁"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"胡小宁的博客","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"胡小宁"},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="1" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/%E6%9C%AC%E4%BA%BA.jpg" alt="胡小宁的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-22T13:15:57.000Z" title="2021/5/22 下午9:15:57">2021-05-22</time>发表</span><span class="level-item"><time dateTime="2021-05-22T15:01:54.334Z" title="2021/5/22 下午11:01:54">2021-05-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></span><span class="level-item">11 分钟读完 (大约1612个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/05/22/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8Typora%E6%96%B9%E4%BE%BF%E5%BF%AB%E6%8D%B7%E5%9C%B0%E5%86%99%E5%8D%9A%E5%AE%A2/">如何利用Typora方便快捷地写博客</a></h1><div class="content"><h2 id="Typora大法之乾坤大挪移"><a href="#Typora大法之乾坤大挪移" class="headerlink" title="Typora大法之乾坤大挪移"></a>Typora大法之乾坤大挪移</h2><p>因为我的博客是基于hexo搭建的，所以写博客用的文件都为.md的格式。起初写博客用的软件是Notepad++，因为是看CodeSheep的视频入门的，羊哥推荐的软件就是Notepad++，所以我就从21年一月初一直用到五月中旬。说句实话，在写博客的时候最让我头痛的事情就是导入图片这一块。比如要进行效果演示，在Notepad++的编辑器中书写格式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">![](/images/Javascript/xxx.png/jpg)<br></code></pre></td></tr></table></figure>
<p>格式看起来很简洁，写起来好像没什么困难的，的确如此。但是当我需要进行大量的效果演示的时候，这简洁代码背后隐藏的是大量的截图、保存截图的工作。一开始我只会用qq的【Ctrl+Alt+A】进行截图，截图过后还要手动保存在本地，手动调配文件保存路径，这就让我非常苦恼。好在现在没有了这种苦恼，因为我发现了Windows10自带的截图快捷键【Shift+Win+S】搭配上Typora会产生极其简单的导入图片操作。</p>
<p>不卖关子了，直接上干货。</p>
<h3 id="你必须要用相对路径写博客"><a href="#你必须要用相对路径写博客" class="headerlink" title="你必须要用相对路径写博客"></a>你必须要用相对路径写博客</h3><p>在上干货之前，还是要卖一点点小关子滴，嘿嘿！</p>
<p>首先，我们要知道相对路径是什么，以及如何使用相对路径来写博客。</p>
<blockquote>
<p>相对路径就是指由这个文件所在的路径引起的跟其它文件（或文件夹）的路径关系。使用相对路径可以为我们带来非常多的便利。HTML<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84/481185">绝对路径</a>(absolute path)指带域名的文件的完整路径。</p>
</blockquote>
<p>以上是百度百科对于相对路径的定义。为了更好的让大家理解什么是相对路径以及掌握使用相对路径的方法，请认真看如下图片</p>
<p><img src="/images/JavaScript/image-20210522213807326.png"></p>
<p>红框框中圈出的是绝对路径，它代表在电脑文件系统中的绝对位置。而相对路径是这样表示的：</p>
<p><img src="/images/JavaScript/image-20210522213955162.png"></p>
<p><strong>蓝线上方所示的就是相对路径。可以看出，相对路径对比于绝对路径少了前面的一部分。如上的相对路径中，../所代表的意思是，.md（就是本文的博客文件）文件所在的文件夹的上级文件夹的位置。所以../images代表的就是与.md文件所在的文件夹同级的文件夹images。如此一来，寻找文件依赖的就是此文件的上级文件夹，而并非绝对的文件路径。</strong>对我来说，相对路径使用最频繁的地方就在于写博客。因为博客要远端部署在github上，而部署在github上的博客文件中多多少少都会有图片引用，如果要引用图片那必须要指出图片所在的文件目录。文件目录必须要用相对路径来写，否则会产生灾难性的后果= =。</p>
<p>举个例子，我有一张图片存在D：/github/blog/source/images/中。我的博客文件的路径是D：/github/blog/source/posts/。如果我想在博客中用绝对路径引入这张图片，那必须要从D：/开始写（C：/也可以，看文件放在哪个盘），而部署在远端的文件中，并没有D：/这个目录，所以图片就GG了。但是要用相对路径的话，那就美滋滋啦。我直接写../images/xx.jpg就可以了（图片文件是.jpg格式的），具体原理在上面的粗体部分已经很详细的说过。</p>
<h3 id="超级干货来了"><a href="#超级干货来了" class="headerlink" title="超级干货来了"></a>超级干货来了</h3><p>在掌握了前面的知识后，你将会看到一场精彩绝伦的乾坤大挪移！</p>
<p><img src="/images/JavaScript/image-20210522220818365.png"></p>
<ol>
<li>打开偏好设置</li>
</ol>
<p><img src="/images/JavaScript/image-20210522220931268.png"></p>
<ol start="2">
<li><p>选择图像</p>
</li>
<li><p>填写相对路径</p>
<ul>
<li>举个例子，我有一张图片存在D：/github/blog/source/images/Javascript中。我写的这篇博客文件的路径是D：/github/blog/source/posts/。那么我要填写的相对路径就如图所示。</li>
</ul>
</li>
<li><p>利用Windows10自带的截图工具，快捷键【Shift+Win+S】截图</p>
</li>
<li><p>按Ctrl+V在Typora中直接粘贴（就这一点，是Typora最牛b的地方）</p>
</li>
<li><p>如果只是把Typora当作本地的笔记用，就不需要进行下一步了。如果是想把博客推送到远端，那么必须要进行第七步的操作。</p>
</li>
<li><p>点击引入的图片，做一些修改。如下图把橙色部分的文字都删掉，然后删掉..。</p>
<p><img src="/images/JavaScript/image-20210522221907769.png"></p>
</li>
</ol>
<p>把它变成：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">![](/)<br></code></pre></td></tr></table></figure>
<p>这种形式。</p>
<p><strong>完成了上面的操作，之后再进行图片的引入，只需要重复4、5、6、7步骤就好了，极其方便！</strong></p>
<h3 id="一些解释"><a href="#一些解释" class="headerlink" title="一些解释"></a>一些解释</h3><p>很多同学可能会对删除..有困惑，在给出的例子中，明明images在.md文件的上级，为什么要删掉..呢？</p>
<p><img src="/images/JavaScript/image-20210522224316025.png"></p>
<p>如上图所示，在我把文件推送到远端之后，文件的排布如上。这里我们要转变一下思想，本地端的相对地址同服务器端的相对地址是不一样的。本地端的相对地址是以本文件所在的位置为核心，例如../images，在本地端代表的意思是.md上级文件夹中的images文件的位置。他是从.md出发的。然而在服务器端，我们写的相对地址其实是在补充，他是从服务器端的ip地址开始的，如下图红色标注的部分</p>
<p><img src="/images/JavaScript/image-20210522225126179.png"></p>
<p>补充的是橙色标注部分后面的内容。</p>
<p><img src="/images/JavaScript/image-20210522225335173.png"></p>
<p>如上图所示，可以看到当路径补充完整后，其格式同我们上面的相对路径相同。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-22T07:50:28.000Z" title="2021/5/22 下午3:50:28">2021-05-22</time>发表</span><span class="level-item"><time dateTime="2021-05-22T13:16:00.678Z" title="2021/5/22 下午9:16:00">2021-05-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/">脚本语言</a></span><span class="level-item">10 分钟读完 (大约1428个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/05/22/%E7%8E%A9%E8%BD%ACJavaScript-%E4%B8%80/">玩转JavaScript(一)</a></h1><div class="content"><h2 id="初探JavaScript"><a href="#初探JavaScript" class="headerlink" title="初探JavaScript"></a>初探JavaScript</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>昨夜山河齐恸震，今朝大星辞九州。在写这篇博客的时候，袁老逝世了。在神农离去的两分钟后，吴孟超先生也离开了人世。两位巨人的远去，让我不禁感慨，我们无法抵抗浪潮，但会永远铭记灯塔。</p>
<h3 id="前端知识体系都有什么东东？"><a href="#前端知识体系都有什么东东？" class="headerlink" title="前端知识体系都有什么东东？"></a>前端知识体系都有什么东东？</h3><ol>
<li><p><strong>HTML：超文本标记语言（Hyper Text Markup Language），决定网页的结构和内容。</strong></p>
</li>
<li><p><strong>CSS：层叠样式表（Cascading Style Sheets），设定网页的表现形式。</strong></p>
<ul>
<li>CSS预处理器：CSS预处理器定义了一种新的语言，其基本思想是，用一种专门的编程语言，为CSS增加一些编程的特性，将CSS作为目标生成文件，然后开发者就只要使用这种语言进行CSS的编码工作。转化成通俗易懂的话来讲就是，<strong>“用一种专门的编程语言，进行Web页面样式设计，再通过编译器转化成为正常的CSS文件，以供项目使用”。</strong></li>
</ul>
</li>
<li><p><strong>JavaScript：是一种弱类型脚本语言，其源代码不需要经过编译，而是由浏览器解释运行，用于控制网页的行为。</strong></p>
</li>
<li><p><strong>JavaScript框架</strong>：</p>
<ul>
<li>jQuery：优点是简化了DOM操作，缺点是DOM操作太频繁，影响前端性能；在前端眼里使用它仅仅是为了兼容IE6\7\8；</li>
<li>Angular：Google收购的前端框架，由一群Java程序员开发，其特点是将后台的MVC模式搬到了前端并增加了模块化开发的理念，与微软合作，采用TypeScript语法开发；对后台程序员友好，对前端程序员不太友好；最大的缺点是版本迭代不合理（如1代-&gt;2代，除了名字，基本就是两个东西）</li>
<li>React：Facebook出品，一款高性能的JS前端框架；特点是提出了新概念【虚拟DOM】用于减少真实DOM操作，在内存中模拟DOM操作，有效提升了前端渲染效率；缺点是复杂，因为需要额外学习一门【JSX】语言；</li>
<li>Vue：一款渐进式JavaScript框架，所谓渐进式就是逐步实现新特性的意思，如实现模块化开发、路由、状态管理等新特性。其特点是综合了Angular（模块化）和React（虚拟DOM）的优点；</li>
<li>Axios：前端通信框架；因为Vue的边界很明确，就是为了处理DOM，所以并不具备通信能力，此时就需要额外使用一个通信框架与服务器交互；当然也可以直接选择使用jQuery提供的AJAX通信功能；</li>
</ul>
</li>
<li><p><strong>UI框架：</strong></p>
<ul>
<li>Ant-Design:阿里巴巴出品，基于React的UI框架；</li>
<li>ElementUI、iview、ice：饿了么出品，基于Vue的UI框架；</li>
<li>Bootstrap：Twitter推出的一个用于前端开发的开源工具包；</li>
<li>AmazeUI:又叫“妹子UI”，一款HTML5跨屏前端框架；</li>
</ul>
</li>
<li><p><strong>JavaScript构建工具：</strong></p>
<ul>
<li>Babel：JS编译工具，主要用于浏览器不支持的ES新特性，比如用于编译TypeScript；</li>
<li>WebPack：模块打包器，主要作用是打包、压缩、合并及按序加载；</li>
</ul>
</li>
</ol>
<h3 id="三端统一"><a href="#三端统一" class="headerlink" title="三端统一"></a>三端统一</h3><ol>
<li><p>混合开发（Hybrid App）：主要目的是实现一套代码三端统一（PC\Android:.apk\IOS:.ipa）并能够调用到设备底层硬件（如传感器、GPS、摄像头等），打包方式有如下两种：</p>
<ul>
<li>云打包：HBuild-&gt;HBuildX，DCloud出品；API Cloud；</li>
<li>本地打包：Cordova（前身是PhoneGap）；</li>
</ul>
</li>
<li><p>微信小程序：详见微信官网，这里就额是介绍一个方便微信小程序UI的框架：WeUI；</p>
</li>
</ol>
<h3 id="后端技术"><a href="#后端技术" class="headerlink" title="后端技术"></a>后端技术</h3><p>前端人员为了方便开发也需要掌握一定的后端技术，但我们Jaca后台人员知道后台体系极其庞大复杂，所以为了方便前端人员开发后台应用，就出现了Node.js这样的技术。</p>
<p>NodeJS的作者已经声称放弃了NodeJS（说是架构做的不好再加上笨重的node_modules，可能让作者不爽了吧），开始开发全新的架构Deno。</p>
<p>既然是后台技术，那肯定也需要框架和项目管理工具，NodeJS框架及项目管理工具如下：</p>
<ul>
<li>Express:NodeJS框架</li>
<li>Koa：Express简化版</li>
<li>NPM：项目综合管理工具，类似于Maven</li>
<li>YARN：NPM的代替方案，类似于Maven和Gradle的关系</li>
</ul>
<h2 id="什么是-JavaScript？"><a href="#什么是-JavaScript？" class="headerlink" title="什么是 JavaScript？"></a>什么是 JavaScript？</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h3><p>JavaScript是一门世界上最流行的脚本语言</p>
<p>然而Java和JavaScript鸡毛关系没有，JavaScript名字看起来带Java，实际上是在蹭Java的热度。</p>
<p><strong>一个合格的后端人员，必须要精通JavaScript</strong></p>
<h3 id="2-历史"><a href="#2-历史" class="headerlink" title="2.历史"></a>2.历史</h3><p>ECMAScript它可以理解为是JavaScript的一个标准，最新版本已经到了es6版本，但是大部分浏览器还只停留在支持es5代码上！</p>
<p>问题所在：开发环境–线下环境 不一致</p>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><h3 id="1-引入"><a href="#1-引入" class="headerlink" title="1.引入"></a>1.引入</h3><p>lesson1.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">alert(<span class="hljs-string">&#x27;你好啊，中国男孩！&#x27;</span>);<br></code></pre></td></tr></table></figure>


<p>lesson1.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--Script标签内写JavaScript代码--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;js/lesson1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-comment">&lt;!--javascript标签必须成对出现--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>效果：</p>
<p><img src="/images/JavaScript/image-20210522211240056.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-21T13:23:48.000Z" title="2021/5/21 下午9:23:48">2021-05-21</time>发表</span><span class="level-item"><time dateTime="2021-05-22T15:11:05.425Z" title="2021/5/22 下午11:11:05">2021-05-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></span><span class="level-item">2 分钟读完 (大约264个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/05/21/Vue%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%94%B5%E5%95%86%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">Vue项目实战-电商管理系统</a></h1><div class="content"><h2 id="0-项目概述"><a href="#0-项目概述" class="headerlink" title="0.项目概述"></a>0.项目概述</h2><h3 id="电商后台管理系统的功能"><a href="#电商后台管理系统的功能" class="headerlink" title="电商后台管理系统的功能"></a>电商后台管理系统的功能</h3><p>电商后台管理系统用于管理用户账号、商品分类、商品信息、订单、数据统计等业务功能。<br><img src="/images/web%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0.png"></p>
<h3 id="电商后台管理系统的开发模式（前后端分离）"><a href="#电商后台管理系统的开发模式（前后端分离）" class="headerlink" title="电商后台管理系统的开发模式（前后端分离）"></a>电商后台管理系统的开发模式（前后端分离）</h3><p>电商后台管理系统采用前后端分离的开发模式，其中前端项目是基于Vue技术栈的SPA项目。<br><img src="/images/Vue%E5%AE%9E%E6%88%98/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F.png"></p>
<h3 id="电商后台管理系统的技术选型"><a href="#电商后台管理系统的技术选型" class="headerlink" title="电商后台管理系统的技术选型"></a>电商后台管理系统的技术选型</h3><h4 id="前端项目技术栈"><a href="#前端项目技术栈" class="headerlink" title="前端项目技术栈"></a>前端项目技术栈</h4><ul>
<li>Vue</li>
<li>Vue-router</li>
<li>Element-UI</li>
<li>Axios</li>
<li>Echarts</li>
</ul>
<h4 id="后端项目技术栈"><a href="#后端项目技术栈" class="headerlink" title="后端项目技术栈"></a>后端项目技术栈</h4><ul>
<li>Node.js</li>
<li>Express</li>
<li>Jwt(状态保持工具,模拟Session)</li>
<li>Mysql(后台数据库)</li>
<li>Sequelize(操作数据库的框架)</li>
</ul>
<h2 id="1-项目初始化"><a href="#1-项目初始化" class="headerlink" title="1.项目初始化"></a>1.项目初始化</h2><h3 id="前端项目初始化步骤"><a href="#前端项目初始化步骤" class="headerlink" title="前端项目初始化步骤"></a>前端项目初始化步骤</h3><ol>
<li>安装Vue脚手架</li>
<li>通过Vue脚手架创建项目</li>
<li>配置Vue路由</li>
<li>配置Element-UI组件库</li>
<li>配置axios远程仓库</li>
<li>初始化git远程仓库</li>
<li>将本地项目托管到Github中</li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-05T13:45:20.000Z" title="2021/5/5 下午9:45:20">2021-05-05</time>发表</span><span class="level-item"><time dateTime="2021-05-05T14:17:39.088Z" title="2021/5/5 下午10:17:39">2021-05-05</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">4 分钟读完 (大约592个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/05/05/%E7%8E%A9%E8%BD%ACsocket%EF%BC%88%E5%85%AD%EF%BC%89/">玩转socket（六）</a></h1><div class="content"><h2 id="Windows下的Socket演示程序"><a href="#Windows下的Socket演示程序" class="headerlink" title="Windows下的Socket演示程序"></a>Windows下的Socket演示程序</h2><p>上节演示了Linux下的socket程序，这节来看一下Windows下的socket程序。同样，server.cpp为服务端代码，client为客户端代码。</p>
<p><strong>服务端代码 server.cpp：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;winsock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> comment(lib,<span class="hljs-meta-string">&quot;ws2_32.lib&quot;</span>) <span class="hljs-comment">//加载 ws2_32.dll</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-comment">//初始化DLL</span><br>	WSADATA wsaData;<br>	WSAStartup(MAKEWORD(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>),&amp;wsaData);<br>	<br>	<span class="hljs-comment">//创建套接字</span><br>	SOCKET servSock = socket(PF_INET,SOCK_STREAM,IPPROTO_TCP);<br>	<br>	<span class="hljs-comment">//绑定套接字</span><br>	sockaddr_in sockAddr;<br>	<span class="hljs-built_in">memset</span>(&amp;sockAddr,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(sockAddr));<span class="hljs-comment">//每个字节都用0填充</span><br>	sockAddr.sin_family = PF_INET;<span class="hljs-comment">//使用IPv4地址</span><br>	sockAddr.sin_addr.s_addr = inet_addr(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<span class="hljs-comment">//使用具体的IP地址</span><br>	sockAddr.sin_port = htons(<span class="hljs-number">1234</span>);<span class="hljs-comment">//端口</span><br>	bind(servSock,(SOCKADDR*)&amp;sockAddr,<span class="hljs-keyword">sizeof</span>(SOCKADDR));<br>	<br>	<span class="hljs-comment">//进入监听状态</span><br>	listen(servSock,<span class="hljs-number">20</span>);<br>	<br>	<span class="hljs-comment">//接收客户端请求</span><br>	SOCKADDR clntAddr;<br>	<span class="hljs-keyword">int</span> nSize = <span class="hljs-keyword">sizeof</span>(SOCKADDR);<br>	SOCKET clntSock = accept(servSock,(SOCKADDR*)&amp;clntAddr,&amp;nSize);<br>	<br>	<span class="hljs-comment">//向客户端发送数据</span><br>	<span class="hljs-keyword">char</span> *str = <span class="hljs-string">&quot;Hello World!&quot;</span>;<br>	send(clntSock,str,<span class="hljs-built_in">strlen</span>(str)+<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">char</span>),<span class="hljs-literal">NULL</span>);<br>	<br>	<span class="hljs-comment">//关闭套接字</span><br>	closesocket(clntSock);<br>	closesocket(servSock);<br>	<br>	<span class="hljs-comment">//终止DLL的使用</span><br>	WSACleanup();<br>	<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>客户端代码client.cpp：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;WinSock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> comment(lib, <span class="hljs-meta-string">&quot;ws2_32.lib&quot;</span>)  <span class="hljs-comment">//加载 ws2_32.dll</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-comment">//初始化DLL</span><br>    WSADATA wsaData;<br>    WSAStartup(MAKEWORD(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), &amp;wsaData);<br><br>    <span class="hljs-comment">//创建套接字</span><br>    SOCKET sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);<br><br>    <span class="hljs-comment">//向服务器发起请求</span><br>    sockaddr_in sockAddr;<br>    <span class="hljs-built_in">memset</span>(&amp;sockAddr, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(sockAddr));  <span class="hljs-comment">//每个字节都用0填充</span><br>    sockAddr.sin_family = PF_INET;<br>    sockAddr.sin_addr.s_addr = inet_addr(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<br>    sockAddr.sin_port = htons(<span class="hljs-number">1234</span>);<br>    connect(sock, (SOCKADDR*)&amp;sockAddr, <span class="hljs-keyword">sizeof</span>(SOCKADDR));<br><br>    <span class="hljs-comment">//接收服务器传回的数据</span><br>    <span class="hljs-keyword">char</span> szBuffer[MAXBYTE] = &#123;<span class="hljs-number">0</span>&#125;;<br>    recv(sock, szBuffer, MAXBYTE, <span class="hljs-literal">NULL</span>);<br><br>    <span class="hljs-comment">//输出接收到的数据</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Message form server: %s\n&quot;</span>, szBuffer);<br><br>    <span class="hljs-comment">//关闭套接字</span><br>    closesocket(sock);<br><br>    <span class="hljs-comment">//终止使用 DLL</span><br>    WSACleanup();<br><br>    system(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>将server.cpp和client.cpp分别编译为server.exe和client.exe，先运行server.exe，再运行client.exe，输出结果为：<br>Message form server：Hello World！</p>
<p>Windows下的Socket程序和Linux思路相同，但细节有所差别：</p>
<ul>
<li><p>Windows下的socket程序依赖Winsock.dll或ws2_32.dll，必须提前加载。DLL有两种加载方式：隐式加载(载入时加载)和显式加载(运行时加载)。</p>
</li>
<li><p>Linux使用“文件描述符”的概念，而Windows使用“文件句柄”的概念；Linux不区分socket文件和普通文件，而Windows区分；Linux下socket()函数的返回值为int类型，而Windows下为SOCKET类型，也就是句柄。</p>
</li>
<li><p>Linux下使用read()/write()函数读写，而Windows下使用recv()/send()函数发送和接收。</p>
</li>
<li><p>关闭socket时，Linux使用close()函数，而Windows使用closesocket()函数</p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-04T14:51:21.000Z" title="2021/5/4 下午10:51:21">2021-05-04</time>发表</span><span class="level-item"><time dateTime="2021-05-04T16:00:08.635Z" title="2021/5/5 上午12:00:08">2021-05-05</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">6 分钟读完 (大约968个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/05/04/%E7%8E%A9%E8%BD%ACsocket%EF%BC%88%E4%BA%94%EF%BC%89/">玩转socket（五）</a></h1><div class="content"><h2 id="Linux下的socket演示程序"><a href="#Linux下的socket演示程序" class="headerlink" title="Linux下的socket演示程序"></a>Linux下的socket演示程序</h2><p>本节演示了Linux下的代码，server.cpp是服务器端代码，client.cpp是客户端代码，要实现的功能是：客户端从服务器读取一个字符串并打印出来。</p>
<p><strong>服务器端代码 server.cpp：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;netinet/in.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-comment">//创建套接字</span><br>	<span class="hljs-keyword">int</span> serv_sock = socket(AF_INET,SOCK_STREAM,IPPROTP_TCP);<br>	<br>	<span class="hljs-comment">//将套接字和IP、端口绑定</span><br>	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">serv_addr</span>;</span><br>	<span class="hljs-built_in">memset</span>(&amp;serv_addr,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(serv_addr));<span class="hljs-comment">//每个字节都用0填充</span><br>	serv_addr.sin_family = AF_INET;<span class="hljs-comment">//使用IPv4地址</span><br>	serv_addr.sin_addr.s_addr = inet_addr(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<span class="hljs-comment">//使用具体IP地址</span><br>	serv_addr.sin_port = htons(<span class="hljs-number">1234</span>);<span class="hljs-comment">//端口</span><br>	bind(serv_sock,(struct sockaddr*)&amp;serv_addr,<span class="hljs-keyword">sizeof</span>(serv_addr));<br>	<br>	<span class="hljs-comment">//进入监听器，等待用户发起请求</span><br>	listen(serv_sock,<span class="hljs-number">20</span>);<br>	<br>	<span class="hljs-comment">//接收客户端请求</span><br>	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">clnt_addr</span>;</span><br>	<span class="hljs-keyword">socklen_t</span> clnt_addr_size = <span class="hljs-keyword">sizeof</span>(clnt_addr);<br>	<span class="hljs-keyword">int</span> clnt_sock = accept(serv_sock,(struct sockaddr*)&amp;clnt_addr,&amp;clnt_addr_size);<br>	<br>	<span class="hljs-comment">//向客户端发送数据</span><br>	<span class="hljs-keyword">char</span> str[] = <span class="hljs-string">&quot;http://1905060202.github.io&quot;</span>;<br>	write(clnt_sock,str,<span class="hljs-keyword">sizeof</span>(str));<br>	<br>	<span class="hljs-comment">//关闭套接字</span><br>	close(slnt_sock);<br>	close(serv_sock);<br>	<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>客户端代码 client.cpp:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;arpa/inet.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/socket.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-comment">//创建套接字</span><br>	<span class="hljs-keyword">int</span> sock = socket(AF_INET,SOCK_STREAM,<span class="hljs-number">0</span>);<br>	<br>	<span class="hljs-comment">//向服务器（特定的IP和端口）发起请求</span><br>	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">servaddr</span>;</span><br>	<span class="hljs-built_in">memset</span>(&amp;serv_addr,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(serv_addr));<span class="hljs-comment">//每个字节都用0填充</span><br>	serv_addr.<span class="hljs-built_in">sin</span>.family = AF_INET;<span class="hljs-comment">//使用IPv4地址</span><br>	serv_addr.sin_addr.s_addr = inet_addr(<span class="hljs-string">&quot;127.0.0.1&quot;</span>)<span class="hljs-comment">//具体的IP地址</span><br>	serv_addr.sin_port = htons(<span class="hljs-number">1234</span>);<span class="hljs-comment">//端口</span><br>	connect(sock,(struct sockaddr*)&amp;serv_addr,<span class="hljs-keyword">sizeof</span>(serv_addr));<br>	<br>	<span class="hljs-comment">//读取服务器传回的数据</span><br>	<span class="hljs-keyword">char</span> buffer[<span class="hljs-number">40</span>];<br>	read(sock,buffer,<span class="hljs-keyword">sizeof</span>(buffer)<span class="hljs-number">-1</span>);<br>	<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Message form server :%s\n&quot;</span>,buffer);<br>	<br>	<span class="hljs-comment">//关闭套接字</span><br>	close(sock);<br>	<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>启动一个终端（shell），先编译server.cpp并运行：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">[admin@loaclhost ~]$g++server.cpp -o server<br>[admin@localhost ~]$./client<br>Message form server.http:<span class="hljs-comment">//1905060202.github.io</span><br></code></pre></td></tr></table></figure>
<p>client接收到从server发送过来的字符串就运行结束了，同时server完成发送字符串的任务也运行结束了。大家可以通过两个打开的终端来观察。</p>
<p>client运行后，通过connect()函数向server发起请求，处于监听状态的server被激活，执行accept()函数，接收客户端的请求，然后执行write()函数向client传回数据。client接收到传回的数据后，connect()函数就运行结束了，然后使用read()将数据读取出来。</p>
<h3 id="源码解析"><a href="#源码解析" class="headerlink" title="源码解析"></a>源码解析</h3><p><strong>server.cpp：</strong></p>
<ul>
<li><p>第11行通过socket()函数创建了一个套接字，参数AF_INET表示使用IPv4地址，SOCK_STREAM表示使用面向连接的套接字，IPPROTP_TCP表示使用TCP协议。在Linux中，socket也是一种文件，有文件描述符，可以使用write()或read()函数进行I/O操作。</p>
</li>
<li><p>第19行通过bind()函数将套接字serv_sock与特定的IP地址和端口绑定，IP地址和端口都保存在sockaddr_in结构体中。</p>
</li>
<li><p>socket()函数确定了套接字的各种属性，bind()函数让套接字与特定的IP地址和端口对应起来，这样客户端才能连接到该套接字。</p>
</li>
<li><p>第22行让套接字处于被动监听的状态。所谓被动监听，是指套接字一直处于“睡眠”状态，直到客户端发起请求才会被“唤醒”</p>
</li>
<li><p>第27行的accept()函数用来接收客户端的请求。程序一旦执行到accept()就会被阻塞，直到客户端发起请求。</p>
</li>
<li><p>第31行的write()函数用来向套接字文件中写入数据，也就是向客户端发送数据。</p>
</li>
</ul>
<p><strong>client.cpp:</strong></p>
<ul>
<li><p>第18行代码通过connect()向服务器发起请求，服务器的IP地址和端口号保存至sockaddr_in结构体中。直到服务器传回数据后，connect()才结束运行。</p>
</li>
<li><p>第22行代码通过read()从套接字中读取文件。</p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-04-28T13:40:48.000Z" title="2021/4/28 下午9:40:48">2021-04-28</time>发表</span><span class="level-item"><time dateTime="2021-04-28T14:01:48.813Z" title="2021/4/28 下午10:01:48">2021-04-28</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">5 分钟读完 (大约729个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/04/28/%E6%B9%96%E5%8D%97%E7%A7%91%E5%A4%A7Web%E6%9C%9F%E4%B8%AD%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0%E5%8F%82%E8%80%83/">湖南科大Web期中考试复习参考</a></h1><div class="content"><h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h2><ul>
<li>Socket：套接字，网络上的两个程序通过一个双向的通信连接实现数据的交换，这个连接的一端称为一个Socket</li>
<li>JVM：Java虚拟机是运行所有Java程序的抽象计算机，是Java语言的运行环境。</li>
<li>Web：web是分布在全世界的、基于HTTP通信协议的、存储在web服务器中的所有互相连接的超文本集</li>
<li>C/S：Clien/Sever或客户/服务器模式</li>
<li>B/S：将web浏览器/web服务器工作模式简称为B/S</li>
<li>HTTP：超文本传输协议，是专门为web设计的一种网络通信协议</li>
<li>Html：超级文本标记语言是标准通用标记语言下的一个应用，也是一种规范，一种标准，它通过标记符号来标记要显示的网页中的各个部分</li>
<li>JS：JavaScript是一种嵌入在HTML文档中，具有跨平台、安全性，基于对象和事件驱动的解释型编程脚本语言</li>
<li>CSS：级联样式表是一种用来表现HTML或XML等文件样式的计算机语言</li>
<li>JSP：一种运行在服务器端的脚本语言</li>
<li>Tomcat：Tomcat服务器是一个免费的开放源码的Web应用服务器，属于轻量级应用服务器</li>
<li>ODBC：开放数据库连接是微软公司开放服务结构中有关数据库的一个组成部分，它建立了一组规范，并提供了一组对数据库访问的标准API</li>
<li>JDBC：JDBC是一种访问数据库的技术标准，它是一种能通过Java语言访问数据库的应用程序接口，由一组用Java语言编写的类和接口组成。</li>
<li>JavaBean：JavaBean是Java Web程序的重要组成部分，是一个可以重复使用的软件组件，是一个遵循特定写法的Java类，它封装了数据和业务逻辑，供JSP或Servlet调用，完成数据封装和数据处理功能</li>
<li>Servlet：Servlet是用Java语言编写的服务器端程序，它担当客户请求与服务器响应的中间层，属于JavaEE中间层技术，是由服务器端调用和执行，可以处理客户端传来的HTTP请求，并返回一个响应</li>
<li>XML：可扩展标记语言，标准通用标记语言的子集，是一种用于标记电子文件使其具有结构性的标记语言</li>
<li>Struts2：Struts2是Apache软件组织的一项开放源码项目，它是对经典设计模式MVC的一种实现，并且是基于webwork核心思想的一种全新架构</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-04-27T07:18:09.000Z" title="2021/4/27 下午3:18:09">2021-04-27</time>发表</span><span class="level-item"><time dateTime="2021-04-27T08:43:57.203Z" title="2021/4/27 下午4:43:57">2021-04-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">19 分钟读完 (大约2803个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/04/27/%E7%8E%A9%E8%BD%ACsocket%EF%BC%88%E5%9B%9B%EF%BC%89/">玩转socket（四）</a></h1><div class="content"><h2 id="OSI网络七层模型、TCP-IP协议族、IP、MAC和端口号"><a href="#OSI网络七层模型、TCP-IP协议族、IP、MAC和端口号" class="headerlink" title="OSI网络七层模型、TCP/IP协议族、IP、MAC和端口号"></a>OSI网络七层模型、TCP/IP协议族、IP、MAC和端口号</h2><p>本讲分三个部分：</p>
<ul>
<li><strong>OSI网络七层模型</strong></li>
<li><strong>TCP/IP协议族</strong></li>
<li><strong>IP、MAC和端口号</strong></li>
</ul>
<h3 id="OSI网络七层模型"><a href="#OSI网络七层模型" class="headerlink" title="OSI网络七层模型"></a>OSI网络七层模型</h3><p>如果你读过计算机专业，或者学习过网络通信（很遗憾，我的专业教学越过了网络通信），那你一定听说过OSI模型，它曾无数次让你头大。OSI是Open System Interconnection的缩写，译为“开放式系统互联”。</p>
<p>OSI模型把网络通信的工作分为七层，<strong>从下到上</strong>分别是物理层、数据链路层、网络层、传输层、会话层、表示层和应用层。</p>
<p>OSI只是存在于概念和理论上的一种模型，它的缺点是分层太多，增加了网络工作的复杂性，所以没有大规模应用。后来人们对OSI进行了简化，合并了一些层，最终只保留了4层，<strong>从下到上</strong>分别是接口层、网络层、传输层和应用层。这就是鼎鼎大名的TCP/IP模型。<br><img src="/images/socket/TCP.jpg"><br>图1：OSI 七层网络模型和 TCP/IP 四层网络模型的对比<br><img src="/images/socket/tcp_ip.png"><br>图2：OSI 七层网络模型和 TCP/IP 四层网络模型的对比</p>
<p><font color=red> 这个网络模型究竟是干什么的呢？简而言之就是进行数据封装的。 </font></p>
<p>我们平常使用的程序（或者说软件）一般都是通过应用层来访问网络的，程序产生的数据会一层一层地往下传输，直到最后的网络接口层，就通过网线发送到互联网上去了。数据每往下走一层，就会被这一层地协议增加一层包装，等到发送到互联网上时，已经比原始数据多了四层包装。整个数据封装的过程就像俄罗斯套娃。</p>
<p>当另一台计算机接收到数据包时，会从网络接口再一层一层往上传输，每传输一层就拆开一层包装，直到最后的应用层，就得到了最原始的数据，这才是程序要使用的数据。</p>
<p>给数据加包装的过程，实际上就是在数据头增加一个标志（一个数据块），表示数据经过了这一层，我已经处理了。给数据拆包的过程正好相反，就是去掉数据头部的标志，让它逐渐现出原形。</p>
<p>所以，在互联网上传输一份数据是多么的复杂！而我们却感受不到，这就是网络模型的厉害之处。我们只需要在代码中调用一个函数，就能让下面的所有网络层为我们工作。</p>
<p><font color = red> 我们所说的socket编程，是站在传输层的基础上，所以可以使用TCP/UDP协议，但是不能干访问网页这样的事情，因为访问网页所需要的http协议位于应用层。 </font></p>
<p>两台计算机进行通信时，必须遵循以下原则：</p>
<ul>
<li>必须是同一层次进行通信，比如，A计算机的应用层和B计算机的传输层就不能通信，因为它们不在一个层次，数据的拆包会遇到问题。</li>
<li>每一层的功能都必须相同，也就是拥有完全相同的网络模型。如果网络模型都不同，那不就乱套了，谁都不认识谁。</li>
<li>数据只能逐层传输，不能跃层。</li>
<li>每一层可以使用下层提供的服务，并向上层提供服务。</li>
</ul>
<h3 id="TCP-IP协议族"><a href="#TCP-IP协议族" class="headerlink" title="TCP/IP协议族"></a>TCP/IP协议族</h3><p>上面讲到，目前实际使用的网络模型时TCP/IP模型，它对OSI模型进行了简化，只包含了四层，<strong>从上到下</strong>分别是应用层、传输层、网络层和网络接口层，每一层都包含了若干协议。</p>
<p>协议(Protocol)就是网络通信过程中的约定或者合同，通信双方必须都遵循才能正常收发数据。协议有很多种，例如TCP、UDP、IP等，通信双方必须使用同一协议才能通信。协议是一种规范，由计算机组织制定，规定了很多细节，例如，如何建立连接，如何相互识别等。</p>
<blockquote>
<p>协议仅仅是一种规范，必须由计算机软件来实现。例如IP协议规定了如何找到目标计算机，那么各个开发商在开发自己的软件时就必须遵循该协议，不能另起炉灶。</p>
</blockquote>
<p>TCP/IP模型包含了TCP、IP、UDP、Telnet、FTP、SMTP等上百种互为关联的协议，其中TCP和IP是最常见的两种底层协议，所以把他们统称为“TCP/IP协议族”</p>
<p>也就是说，“TCP/IP”模型”中所涉及到的协议称为“TCP/IP协议族”，你可以区分这两个概念，也可以认为他们是等价的，随便你怎么想。</p>
<p>本文所讲的socket编程是基于TCP和UDP协议的，他们的层级关系如下：</p>
<p><img src="/images/socket/%E5%B1%82%E7%BA%A7%E5%85%B3%E7%B3%BB.png"><br>图3：TCP和UDP协议的层级关系</p>
<h4 id="开放式系统（Open-System）"><a href="#开放式系统（Open-System）" class="headerlink" title="开放式系统（Open System）"></a>开放式系统（Open System）</h4><p>把协议分成多个层次有哪些优点？协议设计更容易？当然这也足以成为优点之一。但是还有更重要的原因，就是为了通过标准化操作设计成开放式系统。</p>
<p>标准本身就是对外公开的，会引导更多的人遵守规范。以多个标准为依据设计的系统称为开放式系统，我们学习的TCP/IP协议族也属于其中之一。</p>
<p>接下来了解一下开放式系统具有哪些优点。</p>
<p>路由器用来完成IP层的交互任务。某个网络原来使用A公司的路由器，现要将其替换成B公司的，是否可行？这并非难事，并不一定要换成同一公司的同一型号路由器，因为所有生产商都会按照IP层标准制造。</p>
<p>再举个例子。大家的计算机是否装有网络接口卡，也就是所谓的网卡？尚未安装也无妨，其实很容易买到，因为所有网卡制造商都会遵循链路层的协议标准。这就是开放式系统的优点。</p>
<p>标注的存在意味着高速的技术发展，这也是开放式系统设计最大的原因所在。实际上，软件工程中的“面向对象”的诞生背景中也有标准化的影子也就是说，标准对于技术发展起着举足轻重的作用。</p>
<h3 id="IP、MAC和端口号"><a href="#IP、MAC和端口号" class="headerlink" title="IP、MAC和端口号"></a>IP、MAC和端口号</h3><p>在茫茫的互联网汪洋中，要找到一台计算机非常不容易，有三个要素必须具备，它们分别是IP地址、MAC地址和端口号。</p>
<h4 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h4><p>IP地址是Internet Protocol Address的缩写，译为“网际协议地址”。<br>目前大部分软件使用IPv4地址，但IPv6也正在被人们接受（实际上很多人已经在用IPv6了），尤其是在教育网中，已经大量使用。</p>
<p>一台计算机可以拥有一个独立的IP地址，一个局域网也可以拥有一个独立的IP地址（对外就好像只有一台计算机）。目前广泛使用的ipv4地址，它的资源是非常有限的，一台计算机一个IP地址是不现实的，往往是一个局域网才拥有一个IP地址。</p>
<p>在互联网上进行通信时，必须要知道对方的IP地址。实际上数据包中已经附带了IP地址，把数据包发送给路由器后，路由器会根据IP地址找到对方的地理位置，完成一次数据的传递。路由器有非常高效和智能的算法，很快会找到目标计算机。</p>
<h4 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a>MAC地址</h4><p>现实情况是，一个局域网往往才能拥有一个独立的IP；换句话说，IP地址只能定位到一个局域网，无法定位到具体的一台计算机。这可怎么办呀？这样也没法通信呀！</p>
<p>其实，真正能唯一标识一台计算机是MAC地址，每个网卡的MAC地址在全世界都是独一无二的。计算机出厂时，MAC地址已经被写死到网卡里了（当然，通过某些“奇淫巧技”也是可以修改的）。局域网中的路由器/交换机会记录每台计算机的MAC地址。</p>
<blockquote>
<p>MAC地址是Media Access Control Address的缩写，直译为“媒体访问控制地址”，也称为局域网地址（LAN Address），以太网地址或物理地址。</p>
</blockquote>
<p>数据包中除了会附带IP地址，还会附带对方的MAC地址，当数据包达到局域网以后，路由器/交换机会根据数据包中的MAC地址找到对应的计算机，然后把数据包转交给它；这样就完成了数据的传递。</p>
<h4 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h4><p>有了IP地址和MAC地址，虽然可以找到目标计算机，但仍不能进行通信。一台计算机可以同时提供多种网络服务，例如Web服务，FTP服务（文件传输服务）、SMTP服务（邮箱服务）等，仅有IP地址和MAC地址，计算机虽然可以正确地接收到数据包，但是却不知道要将数据包交给哪个网络程序来处理，所以通信失败。</p>
<p>为了区分不同的网络程序，计算机会为每个网络程序分配一个独一无二的端口号（Port Number），例如，Web服务的端口是80，FTP服务的端口是21，SMTP服务的端口是25.</p>
<p>端口（Port）是一个虚拟的、逻辑上的概念。可以将端口理解为一道门，数据通过这道门流入流出，每道门有不同的编号，就是端口号。</p>
<p><img src="/images/socket/%E7%AB%AF%E5%8F%A3.jpg"><br>图4：端口号对应的网络服务</p>
<p><strong>本节完</strong></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-04-27T06:26:49.000Z" title="2021/4/27 下午2:26:49">2021-04-27</time>发表</span><span class="level-item"><time dateTime="2021-04-27T06:57:57.434Z" title="2021/4/27 下午2:57:57">2021-04-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></span><span class="level-item">2 分钟读完 (大约313个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/04/27/hexo%E6%8E%A8%E9%80%81%E5%87%BA%E9%94%99%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F/">hexo推送出错如何解决？</a></h1><div class="content"><h3 id="Hexo报错-git-Failed-to-connect-to-github-com-port-443-Timed-out-或-OpenSSL-SSL-read-Connection-was-reset-errno-10054的解决"><a href="#Hexo报错-git-Failed-to-connect-to-github-com-port-443-Timed-out-或-OpenSSL-SSL-read-Connection-was-reset-errno-10054的解决" class="headerlink" title="Hexo报错(git)   Failed to connect to github.com port 443: Timed out 或 OpenSSL SSL_read: Connection was reset, errno 10054的解决"></a>Hexo报错(git)   Failed to connect to github.com port 443: Timed out 或 OpenSSL SSL_read: Connection was reset, errno 10054的解决</h3><h4 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h4><p><strong>在使用hexo博客运行 hexo d 出现报错</strong><br><img src="/images/%E6%88%AA%E5%9B%BE/git%E6%8E%A8%E9%80%81%E5%87%BA%E9%94%99.PNG"><br><strong>Time out</strong>,是代理的问题。如果你在科学上网，那么需要设置http代理端口,http.proxy。<br><img src="/images/%E6%88%AA%E5%9B%BE/%E7%AB%AF%E5%8F%A3%E5%8F%B7.PNG"><br>我的代理端口是8787.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global http.proxy 127.0.0.1:8787<br>git config --global https.proxy 127.0.0.1:8787<br></code></pre></td></tr></table></figure>
<p>如果之前已有设置，先取消再设置。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global --unset http.proxy<br>git config --global --unset https.proxy<br></code></pre></td></tr></table></figure>
<p>设置好之后再hexo d，部署成功！<br><img src="/images/%E6%88%AA%E5%9B%BE/10054%E8%A7%A3%E5%86%B3.PNG"></p>
<p>如果这种方法不奏效，使用下面的方法再试试。</p>
<h4 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h4><p>错误原因可能是网络不稳定，连接超时造成的，如果试了多次还是报错误，建议执行下面的命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global http.sslVerify &quot;false&quot;<br></code></pre></td></tr></table></figure>
<p>这个命令用来修改设置，解除 SSL 验证。<br><img src="/images/%E6%88%AA%E5%9B%BE/git%E8%A7%A3%E9%99%A4%E5%8D%8F%E8%AE%AE.PNG"><br>如果这个不奏效，可以试试上面的方法！</p>
<p><strong>以上就是两种错误的解决方案，在实际操作中，可以都尝试着用一下，说不定就柳暗花明了。</strong></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-04-23T14:27:37.000Z" title="2021/4/23 下午10:27:37">2021-04-23</time>发表</span><span class="level-item"><time dateTime="2021-04-23T14:43:33.519Z" title="2021/4/23 下午10:43:33">2021-04-23</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E9%97%B2%E8%A8%80%E7%A2%8E%E8%AF%AD/">闲言碎语</a></span><span class="level-item">1 分钟读完 (大约184个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/04/23/%E6%84%BF%E7%90%86%E6%83%B3%E4%B9%8B%E7%81%AB%E4%B8%8D%E7%81%AD/">愿理想之火不灭</a></h1><div class="content"><h3 id="人生如逆旅，我亦是行人"><a href="#人生如逆旅，我亦是行人" class="headerlink" title="人生如逆旅，我亦是行人"></a>人生如逆旅，我亦是行人</h3><p>一路求学，至今已有十四载春秋。<br>从黑龙江一隅考到湖南，跨越一千多公里的距离，去追寻最纯粹的理想。<br>突破了重重阻碍，才来到你的面前。<br>从最初的迷惘，到逐渐找到方向，我用了两年。<br>七百天的光阴如此短暂，却又如此漫长。<br>短到眨眼间的物是人非，长到侧身时的教材成山。<br>我一路追求完美，却最终妥协于完美。<br>虽然遗憾满程，但心中的火种仍在。<br>也许我无法燎原，但理想之火不灭。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-04-21T14:40:06.000Z" title="2021/4/21 下午10:40:06">2021-04-21</time>发表</span><span class="level-item"><time dateTime="2021-04-27T06:13:12.891Z" title="2021/4/27 下午2:13:12">2021-04-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">13 分钟读完 (大约1979个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/04/21/%E7%8E%A9%E8%BD%ACsocket%EF%BC%88%E4%B8%89%EF%BC%89/">玩转socket（三）</a></h1><div class="content"><h2 id="SOCK-STREAM和SOCK-DGRAM到底有什么区别？"><a href="#SOCK-STREAM和SOCK-DGRAM到底有什么区别？" class="headerlink" title="SOCK_STREAM和SOCK_DGRAM到底有什么区别？"></a>SOCK_STREAM和SOCK_DGRAM到底有什么区别？</h2><p>上一节《套接字有哪些类型》提到，Stream Sockets就是SOCK_STREAM，它基于TCP协议；Datagram Sockets就是SOCK_DGRAM，它基于UDP协议。<br>这给大家造成一种印象，Stream Sockets就是可靠连接，Datagram Sockets就是不可靠通信，实际情况真的如此吗？</p>
<p>另外，不管哪种数据传输方式，都得通过整个Internet网络的物理线路将数据传出去，从这个层面理解，所有的socket都是有物理连接的，为什么还有无连接的socket呢？</p>
<p>从字面上理解，Stream Sockets好像有一条管道，它连接发送端和接收端，数据包通过这条管道来传输。当然，两台计算机在通信之前必须先搭建好管道。<br>Datagram Sockets像是无头苍蝇乱撞，数据包从发送端到接收端没有固定的路线，爱怎么走就怎么走，只要能到达就行。每个数据包都比较自私，不和别人分享自己的线路，但是大家都能殊途同归，到达接收端。</p>
<p><img src="/images/%E7%AE%80%E5%8C%96%E4%BA%92%E8%81%94%E7%BD%91%E6%A8%A1%E5%9E%8B.gif"></p>
<p>上图是一个简化的互联网模型，H1-&gt;H6表示计算机，A-&gt;E表示路由器，发送端发送的数据必须经过路由器的转发才能达到接收端。</p>
<p>假设H1要发送若干个数据包给H6，那么有多条路径可以选择，比如：</p>
<ul>
<li>路径1：H1–&gt;A–&gt;C–&gt;E–&gt;H6</li>
<li>路径2：H1–&gt;A–&gt;B–&gt;E–&gt;H6</li>
<li>路径3：H1–&gt;B–&gt;D–&gt;E–&gt;H6</li>
<li>路径4：H1–&gt;A–&gt;B–&gt;C–&gt;E–&gt;H6</li>
<li>路径5：H1–&gt;A–&gt;C–&gt;B–&gt;D–&gt;E–&gt;H6</li>
</ul>
<blockquote>
<p>数据包的传输路径是由路由器根据算法出来的，算法会考虑很多因素，比如网络的拥堵状况、下一个路由器是否忙碌等。</p>
</blockquote>
<h3 id="Datagram-Sockets"><a href="#Datagram-Sockets" class="headerlink" title="Datagram Sockets"></a>Datagram Sockets</h3><p>对于Datagram Sockets，每个数据包可以选择不同的路径，比如第一个数据包选择路径4，第二个数据包选择路径1，第三个数据包选择路径2…当然，它们也可以选择相同的路径，那也只不过是巧合而已。<br>每个数据包之间都是独立的，各走各的路，谁也不影响谁，除了迷路的或者发生意外的数据包，最后都能到达H6.但是，到达的顺序是不确定的，比如：</p>
<ul>
<li>第一个数据包选择了一条比较长的路径（比如路径5），第三个数据包选择了一条比较短的路径（比如路径1），虽然一个数据包很早就出发了，但是走的路比较远，最终还是晚于第三个数据包达到。</li>
<li>第一个数据包选择了比较短的路径（比如路径1），第三个数据包选择了一条比较长的路径（比如路径5），按理说第一个数据包应该先到达，但是非常不幸，第一个数据包走的路比较拥堵，这条路上的数据量非常大，路由器处理的很慢，所以它还是晚于第三个数据包达到了。</li>
</ul>
<p>还有一些意外情况会发生，比如：</p>
<ul>
<li>第一个数据包选择了路径1，但是路由器C突然断电了，那他就到不了H6了</li>
<li>第三个数据包选择了路径2，虽然路不远，但是太拥堵，以至于他等待的时间太长，路由器把它丢弃了。</li>
</ul>
<p>总之，对于Datagram Sockets，数据包在传输过程中会发生各种不测，也会发生各种奇迹。H1只负责把数据包发出，至于她什么时候到达，先到达还是后到达，有没有成功到达，H1都不管了；H6也没有选择的权利，只能被动接收，收到什么算什么，爱用不用。</p>
<p>Datagram Sockets遵循的是【尽最大努力交付】的原则，就是尽力而为，实在做不了也没办法。Datagram Sockets提供的没有质量保证的服务。</p>
<h3 id="Stream-Sockets"><a href="#Stream-Sockets" class="headerlink" title="Stream Sockets"></a>Stream Sockets</h3><p>Stream Sockets在正式通信之前要先确定一条路径，没有特殊情况的话，以后就固定地使用这条路径来传递数据包了。当然，路径被破坏的话，比如某个路由器断电了，那么就会重新建立路径。<br><img src="/images/%E7%AE%80%E5%8C%96%E4%BA%92%E8%81%94%E7%BD%91%E6%A8%A1%E5%9E%8B2.gif"><br>这条路径是由路由器维护的，路径上所有的路由器都要存储该路径地信息（实际上只需要存储上游和下游两个路由器地位置就行），所以路由器是有开销的。<br>H1和H6通信完毕后，要断开连接，销毁路径，这个时候路由器也会把之前存储的路径信息擦除。</p>
<p>在很多网络通信教材中，这条预先建立好的路径被称为“虚电路”，就是一条虚拟的通信电路。</p>
<p>为了保障数据包准确、顺序地到达，发送端在发送数据包后，必须得到接收端地确认才发送下一个数据包；如果数据包发出去了，一段时间以后仍没有得到接收端地回应，那么发送端会重新再发送一次，直到得到接收端的回应。这样一来，发送端发送的所有数据包都能到达接收端，并且是按照顺序到达的。</p>
<blockquote>
<p>发送端发送一个数据包，如何得到接收端的确认呢？很简单，为每个数据包分配一个ID，接收端接收到数据包以后，再给发送端返回一个数据包，告诉发送端我接收到了ID为xxxxx的数据包。</p>
</blockquote>
<p>Stream Sockets会比Datagram Sockets多出很多数据包，因为发送端每发送一个数据包，接收端就会返回一个数据包。此外，建立连接和断开连接的过程也会传递很多数据包。</p>
<p>不但是数量多了，每个数据包也变大了：除了源端口和目的端口，Stream Sockets还包括序号、确认信号、数据偏移、控制标志（通常说的URG、ACK、PSH、RST、SYN、FIN）、窗口、检验和紧急指针、选项等信息；Datagram Sockets则只包含长度、校验和信息。</p>
<p>Stream Sockets的数据包比Datagram Sockets大很多，这意味着更大的负载和更大的带宽。许多即时聊天软件采用UDP协议（Datagram Sockets），与此有莫大的关系。</p>
<p><strong>总结：</strong></p>
<blockquote>
<ul>
<li>Datagram Sockets传输效率高，但是不可靠，有丢失数据包、捣乱数据的风险</li>
<li>Stream Sockets非常可靠，万无一失，但是传输效率低，耗费资源多。</li>
</ul>
</blockquote>
<p>两种套接字的特点决定了他们的应用场景，有些服务对可靠性要求比较高，必须数据包能完整无误地送达，那就得选择Stream Sockets（TCP服务），比如HTTP、FTP等；而另一些服务，并不需要那么高的可靠性，效率和实时才是它们所关心的，那就可以选择Datagram Sockets（UDP服务），比如DNS、即时聊天工具等。</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">上一页</a></div><div class="pagination-next"><a href="/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/you.jpg" alt="胡雅宁"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">胡雅宁</p><p class="is-size-6 is-block">虽千万人吾往矣</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">25</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">24</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/1905060202" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/1905060202"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.zhihu.com/people/little-ning-ge" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">知乎</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li><li><a class="level is-mobile" href="https://space.bilibili.com/24140963" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">bilibili</span></span><span class="level-right"><span class="level-item tag">space.bilibili.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"><span class="level-start"><span class="level-item">人工智能</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"><span class="level-start"><span class="level-item">数据分析</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/"><span class="level-start"><span class="level-item">经验分享</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">编程语言</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">脚本语言</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">计算机基础</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%97%B2%E8%A8%80%E7%A2%8E%E8%AF%AD/"><span class="level-start"><span class="level-item">闲言碎语</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><span class="level-start"><span class="level-item">项目实战</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C%E8%AF%AD%E8%A8%80%E4%B8%AD%E6%96%87%E7%BD%91/"><span class="tag">C语言中文网</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Error%E8%A7%A3%E5%86%B3/"><span class="tag">Error解决</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java-Web/"><span class="tag">Java Web</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue/"><span class="tag">Vue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/socket/"><span class="tag">socket</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web%E5%BC%80%E5%8F%91/"><span class="tag">web开发</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B9%A0%E9%A2%98/"><span class="tag">习题</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%BA%E7%94%9F/"><span class="tag">人生</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%9C%E4%B8%9A/"><span class="tag">作业</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E4%B9%A0/"><span class="tag">学习</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E7%94%9F%E5%85%9A/"><span class="tag">学生党</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E5%A6%99%E6%8B%9B/"><span class="tag">小妙招</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="tag">操作系统</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">数据库</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A1%86%E6%9E%B6/"><span class="tag">框架</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%99%BD%E5%AB%96/"><span class="tag">白嫖</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"><span class="tag">统计学习方法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><span class="tag">网络编程</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"><span class="tag">计算机组成原理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/"><span class="tag">课程设计</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="1" data-ad-slot="1" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-22T13:15:57.000Z">2021-05-22</time></p><p class="title"><a href="/2021/05/22/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8Typora%E6%96%B9%E4%BE%BF%E5%BF%AB%E6%8D%B7%E5%9C%B0%E5%86%99%E5%8D%9A%E5%AE%A2/">如何利用Typora方便快捷地写博客</a></p><p class="categories"><a href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-22T07:50:28.000Z">2021-05-22</time></p><p class="title"><a href="/2021/05/22/%E7%8E%A9%E8%BD%ACJavaScript-%E4%B8%80/">玩转JavaScript(一)</a></p><p class="categories"><a href="/categories/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/">脚本语言</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-21T13:23:48.000Z">2021-05-21</time></p><p class="title"><a href="/2021/05/21/Vue%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E7%94%B5%E5%95%86%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">Vue项目实战-电商管理系统</a></p><p class="categories"><a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-05T13:45:20.000Z">2021-05-05</time></p><p class="title"><a href="/2021/05/05/%E7%8E%A9%E8%BD%ACsocket%EF%BC%88%E5%85%AD%EF%BC%89/">玩转socket（六）</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-04T14:51:21.000Z">2021-05-04</time></p><p class="title"><a href="/2021/05/04/%E7%8E%A9%E8%BD%ACsocket%EF%BC%88%E4%BA%94%EF%BC%89/">玩转socket（五）</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/%E6%9C%AC%E4%BA%BA.jpg" alt="胡小宁的博客" height="28"></a><p class="is-size-7"><span>&copy; 2021 胡小宁</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>