<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>胡小宁的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="胡小宁的博客"><meta name="msapplication-TileImage" content="/images/本人.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="胡小宁的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="胡小宁的博客"><meta property="og:url" content="http://1905060202.github.io/"><meta property="og:site_name" content="胡小宁的博客"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://1905060202.github.io/img/og_image.png"><meta property="article:author" content="胡小宁"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://1905060202.github.io"},"headline":"胡小宁的博客","image":["http://1905060202.github.io/img/og_image.png"],"author":{"@type":"Person","name":"胡小宁"},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="1" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/%E6%9C%AC%E4%BA%BA.jpg" alt="胡小宁的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-16T13:32:13.000Z" title="2021/7/16 下午9:32:13">2021-07-16</time>发表</span><span class="level-item"><time dateTime="2021-07-16T13:34:04.608Z" title="2021/7/16 下午9:34:04">2021-07-16</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></span><span class="level-item">38 分钟读完 (大约5675个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/16/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6%EF%BC%9F/">如何阅读一本书？</a></h1><div class="content"><h1 id="《如何阅读一本书》——书评及内容纲要"><a href="#《如何阅读一本书》——书评及内容纲要" class="headerlink" title="《如何阅读一本书》——书评及内容纲要"></a><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html">《如何阅读一本书》——书评及内容纲要</a></h1><p><strong>文章目录</strong></p>
<p><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-1">★为啥要推荐这本书？</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-2">★此书的影响力</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-3">★阅读的目的</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-4">★主动阅读 VS 被动阅读</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-5">★阅读的层次</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-6">★如何读不同类型的书籍</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-7">★阅读与心智的成长</a><br><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/how-to-read-book.html#head-8">★下载</a></p>
<p>　　上星期的博文《<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/04/why-write-blog.html">为啥俺要写博客——动机的自我分析</a>》提到了“主题阅读”一词。当时俺提到：这是境界最高的阅读方式。为了让列位看官对“主题阅读”有所了解，今天特地推荐一下《如何阅读一本书》。</p>
<h2 id="★为啥要推荐这本书？"><a href="#★为啥要推荐这本书？" class="headerlink" title="★为啥要推荐这本书？"></a>★为啥要推荐这本书？</h2><p>　　俺写博客奉行一个宗旨——【<strong>授人以鱼不如授人以渔</strong>】。而《如何阅读一本书》是阅读方面非常非常重要的【渔】。<br>　　为啥俺要介绍阅读方面的【渔】？主要有两个原因：<br><strong>原因1</strong><br>　　想必大伙儿都意识到一个现象——如今大众的阅读水平是很差滴。即使一本不算难也不算厚的书，很多人也无法胜任。有些人甚至连阅读一篇较长的博文（超过1万字）都做不到——所以俺的大部分博文都尽量控制在几千字，以照顾某些阅读能力不够的同学。<br><strong>原因2</strong><br>　　还有一个原因促使俺推荐此书——最近半年分享了<a target="_blank" rel="noopener" href="https://github.com/programthink/books">很多电子书</a>。但是据俺收到的反馈，很多人虽然下载了，却没怎么读。俺猜测，还有些人是因为缺乏阅读技能，导致收获不大。</p>
<p>　　如果你也感觉自己的阅读能力有待提高，这本书是非常非常值得【从头看完】滴。</p>
<h2 id="★此书的影响力"><a href="#★此书的影响力" class="headerlink" title="★此书的影响力"></a>★此书的影响力</h2><p>　　俺单独写一篇博文来推荐的书，通常都是老书——这本也不例外。<br>　　此书最早出版于1940年（在这个年代，可能你的父母还没出生）当时立刻就成为畅销书，还被翻译成多种文字。到1972年又出了一个修订版，补充了很多的内容。本文介绍的就是上世纪70年代的那个版本。<br>　　一本书历经这么久，还值得还单独写一篇博文推荐，足以说明其价值。<br>　　下面，结合俺个人的体会，对此书做一下内容简介。<br>　　强调一下：<strong>光看俺的内容简介是远远不够滴，一定要花时间自己从头到尾看完！！！</strong></p>
<h2 id="★阅读的目的"><a href="#★阅读的目的" class="headerlink" title="★阅读的目的"></a>★阅读的目的</h2><p>　　在书的第1章（阅读的活力与艺术）就总结了阅读的三种目的：娱乐消遣、获取资讯、增进理解力。<br>　　啥是“娱乐消遣”捏？大伙儿应该都明白，俺就不说了。<br>　　“获取资讯”和“增进理解力”，可能很多人不太清楚这两者的区别。俺打一个不太恰当的比方：“获取资讯”如同在平地走路，而“增进理解力”如同爬山。</p>
<p><strong>以【获取资讯】为目的</strong><br>　　这种阅读目的，你只是获取信息，只需要动用“记忆力”。所以，这种阅读是比较【轻松】滴。轻松的代价就是——这样的阅读给你的帮助不够大。<br>　　比如：对新闻的阅读，就属于这类；对大部分小说的阅读，也属于这类。</p>
<p><strong>以【增进理解力】为目的</strong><br>　　如果某本书的内容超出了你的理解力，或者超出了你所熟悉的领域，那么你就需要花一定的力气才能读懂。这时候，光靠记忆力就远远不够了。你需要动用大脑的其它能力（分析、推理、总结、想像……）。显然，这种阅读过程伴随着更多的思考，可以让你的头脑提升到新的高度。</p>
<h2 id="★主动阅读-VS-被动阅读"><a href="#★主动阅读-VS-被动阅读" class="headerlink" title="★主动阅读 VS 被动阅读"></a>★主动阅读 VS 被动阅读</h2><p>　　所谓的“主动阅读”，指的是：你要带着问题去阅读，要一边阅读一边思考。俺称之为“挖掘式的阅读”。<br>　　“被动阅读”与之相反，在阅读过程中没有思考。俺称之为“灌输式的阅读”。<br>　　如果阅读目的是“增进理解力”，就是典型的主动阅读；如果是为了“娱乐消遣”，基本上是被动阅读；至于目的是“获取资讯”的阅读，则两者兼而有之。</p>
<p>　　如今大部分人只懂得“灌输式的阅读”，俺觉得主要原因有两个：<br><strong>1. 教育体制</strong><br>　　天朝的教育，从来都是“灌输式”的。这样的教育培养出来的人，显然比较适应被动的阅读（被动灌输），而无法进行主动的阅读（主动挖掘）。<br>　　另外，天朝的官方教育，从来就没有系统性地培养独立思维能力，尤其是“批判性思维”的能力（关于“批判性思维”的入门，请看俺之前的博文，在“<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2010/10/book-review-asking-right-questions.html">这里</a>”）<br><strong>2. 快餐文化</strong><br>　　而如今的网民，大部分人把大部分的时间花在消遣性的阅读，长期以往，主动阅读的能力就逐渐退化。<br>　　这方面的危害，微博客（microblog）尤甚——微博客不但碎片化很严重，而且助长了消遣性阅读的风气。（之前写过<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2012/02/microblog-and-time-management.html">一篇博文</a>，分析微博客的弊端）</p>
<p>　　那么，怎样才是“带着问题阅读”捏？作者写道：</p>
<blockquote>
<p>关于一本书，你一定要提出四个主要的问题。</p>
<p>(1) 整体来说，这本书到底在谈些什么？<br>你一定要想办法找出这本书的主题，作者如何依次发展这个主题，如何逐步从核心主题分解出从属的关键议题来。</p>
<p>(2) 作者在细部说了什么，怎么说的？<br>你一定要想办法找出主要的想法、声明与论点。这些组合成作者想要传达的特殊讯息。</p>
<p>(3) 这本书说得有道理吗？<br>是全部有道理，还是部分有道理？除非你能回答前两个问题，否则你没法回答这个问题。在你判断这本书是否有道理之前，你必须先了解整本书在说些什么才行。然而，等你了解了一本书，如果你又读得很认真的话，你会觉得有责任为这本书做个自己的判断。光是知道作者的想法是不够的。</p>
<p>(4) 这本书跟你有什么关系？<br>如果这本书给了你一些资讯，你一定要问问这些资讯有什么意义。为什么这位作者会认为知道这件事很重要？你真的有必要去了解吗？如果这本书不只提供了资讯，还启发了你，就更有必要找出其他相关的、更深的含意或建议，以获得更多的启示。</p>
</blockquote>
<p>　　更多内容，请看此书的第5章——如何做一个自我要求的读者</p>
<h2 id="★阅读的层次"><a href="#★阅读的层次" class="headerlink" title="★阅读的层次"></a>★阅读的层次</h2><p>　　此书的重点内容在于：介绍了4种阅读层次。<br>　　为啥称“层次”而不称“类型”，因为层次有“高低之分”，而且层次之间是递进关系而不是并列关系——上面的层次需要依赖下面层次的技能。</p>
<h3 id="◇基础阅读"><a href="#◇基础阅读" class="headerlink" title="◇基础阅读"></a>◇基础阅读</h3><p>　　顾名思义，这是最基本的阅读层次。在这个层次，只需要你做到“读懂书籍<strong>字面上</strong>的意思”。需要的技能仅仅是：识字、断句、联系上下文、等。<br>　　显然，列位看官都已经具备这个层次了——不具备这个层次的人，相当于半文盲。<br>　　对于这个层次，只是在第3章大概介绍了一下。因为咱们都不是学龄前儿童，所以这个层次不是重点。</p>
<h3 id="◇检视阅读"><a href="#◇检视阅读" class="headerlink" title="◇检视阅读"></a>◇检视阅读</h3><p>　　此书的第4章介绍“检视阅读”的各种技巧。<br>　　检视阅读有时候也可以称为“略读”。它要达到的目的就是：在非常有限的时间内，大致搞清楚一本书的内容和主题。<br>　　很多人可能看不起“略读”，其实这个技能是很有用滴。掌握这个技能，有助于你用尽可能短的时间，判断一本书的优劣。这样就避免在烂书上浪费太多时间。另外，在后续的“主题阅读”层次，也非常依赖“检视阅读”的能力。<br>　　举个例子：自从俺开始提供<a target="_blank" rel="noopener" href="https://github.com/programthink/books">电子书下载</a>，很多热心读者会主动分享电子书给俺。有些读者分享的电子书，俺从来没看过，如何判断此书要不要放到网盘上共享捏？这时候俺就会先采用“检视阅读”的各种技巧，快速判断该书的价值。</p>
<h3 id="◇分析阅读"><a href="#◇分析阅读" class="headerlink" title="◇分析阅读"></a>◇分析阅读</h3><p>　　分析阅读有时候也可以称为“精读”。一看到“精读”这个词，你就晓得这是重要的技能了。显然，只有对有价值的书，才值得花力气做“分析阅读”。“烂书或平庸的书”是没有这种待遇的。<br>　　这本书花了大量的篇幅来介绍“分析阅读”。这部分是此书【<strong>重点中的重点</strong>】。</p>
<p>　　分析阅读包括如下几个阶段：</p>
<p><strong>第1阶段——这本书在谈些啥</strong><br>主要在第7章介绍。这个阶段你需要做如下4件事情。<br>(1) 依照书本的种类与主题作分类。<br>(2) 用最简短的句子说出整本书在谈些什么。<br>(3) 按照顺序与关系，列出全书的重要部分。将全书的纲要拟出来之后，再将各个部分的纲要也一一列出。<br>(4) 找出作者在问的问题，或作者想要解决的问题。</p>
<p><strong>第2阶段——诠释整本书的内容</strong><br>主要在第8章和第9章介绍。这个阶段你需要做如下4件事情。<br>(5) 找出重要的、关键性的词汇，透过它们与作者达成共识<br>(6) 从最重要的句子里抓出作者的重要主旨。<br>(7) 找出作者在论述些啥，重新架构这些论述的因果关系，以明白作者的主张。<br>(8) 搞清楚作者已经解决了哪些问题，还有哪些是未解决的。在未解决的问题中，哪些是作者认为自己无法解决的。</p>
<p><strong>第3阶段——评价这本书</strong><br>主要在第10章和第11章介绍。<br>(9) 除非你已掌握某本书的架构，也能诠释整本书了，否则不要轻易评论。<br>(10) 不要争强好胜，非辩到底不可。<br>(11) 在说出评论之前，你要能区分出书中的“事实”与“观点”（参见俺的另一篇博文：《<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/05/difference-between-fact-and-opinion.html">批判性思维扫盲：学会区分”事实”与”观点”</a>》）<br>如果要做出<strong>批评性</strong>的评价，需要做到如下几条之一：<br>(12) 证明作者的知识不足。<br>(13) 证明作者的知识有误。<br>(14) 证明作者的逻辑错误（关于常见逻辑谬误，俺写过一篇扫盲，在“<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2011/03/logical-fallacies.html">这里</a>”）。<br>(15) 证明作者的分析与理由不够完整。</p>
<p>　　另外，在第12章介绍了辅助阅读。包括利用外在的工具和资源（比如工具书，百科全书、字典、等）辅助阅读某本书。<br>　　说到“百科全书”，稍微引申一下。<br>　　如今百科类的网站已经很成熟了。这类网站可以非常有效地作为阅读的辅助工具。在《<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/03/internet-resource-discovery-1.html">网站的类型和使用场景</a>》一文中，大致介绍了俺如何使用百科类网站。<br>在所有的百科类网站中，本人强烈推荐“<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/">维基百科</a>”——其内容之丰富是无与伦比的，而且包括多语种，有助于提升你阅读洋文的功底。</p>
<h3 id="◇主题阅读"><a href="#◇主题阅读" class="headerlink" title="◇主题阅读"></a>◇主题阅读</h3><p>　　关于主题阅读，主要在第20章介绍。<br>　　所谓的“主题阅读”，通俗而言就是：为了研究某个主题，阅读跟该主题相关的多本书籍。这种阅读主要包括5个步骤：</p>
<p><strong>1. 找到这几本书的相关章节</strong><br>　　这时候，“检视阅读”又派上用场了。</p>
<p><strong>2. 带引作者与你达成共识</strong><br>　　这个步骤有点类似于“分析阅读”的第2阶段。</p>
<p><strong>3. 厘清问题</strong><br>　　你可以列出一些问题，然后看看这几本书能否回答这些问题。</p>
<p><strong>4. 界定议题</strong><br>　　如果几本不同的书籍都能够回答同一个问题，并且答案有差异。那么，你可以根据答案的差异、作者的情况、进而判断出这个问题的价值。<br>　　比方说：如果某个问题，多本书的作者给出全然不同的答案，而且这几本书的作者在立场的客观性、分析的全面性、思维的深度等方面都足够。那么这个问题就是一个非常有价值的问题，值得深入思考。</p>
<p><strong>5. 分析讨论</strong><br>　　找到有价值的问题之后，就需要通过自己的综合分析，思考一下：【为什么】这几本书的作者，对同一个问题会有不同的答案。如果你能想明白，那么你对该主题所处的领域，就有了更深刻的理解。<br>　　稍微引申一下：<br>　　【WHY】类型的问题，通常是最值得思考的问题。前几年俺写过两篇博文《<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2009/02/study-technology-in-three-steps.html">学习技术的三部曲：WHAT、HOW、WHY</a>》、《<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2012/03/think-what-how-why.html">用提问来促进思维——兼谈【非】技术领域的 WHAT HOW WHY 三部曲</a>》，聊过其中的原因。</p>
<h2 id="★如何读不同类型的书籍"><a href="#★如何读不同类型的书籍" class="headerlink" title="★如何读不同类型的书籍"></a>★如何读不同类型的书籍</h2><p>　　这本书的如下章节，分别介绍了具体类型的书籍，有哪些阅读技巧。</p>
<blockquote>
<p>第13章 如何阅读实用型的书<br>第14章 如何阅读想像文学<br>第15章 如何阅读故事、戏剧、诗歌<br>第16章 如何阅读历史书<br>第17章 如何阅读科学与数学<br>第18章 如何阅读哲学书<br>第19章 如何阅读社会科学</p>
</blockquote>
<h2 id="★阅读与心智的成长"><a href="#★阅读与心智的成长" class="headerlink" title="★阅读与心智的成长"></a>★阅读与心智的成长</h2><p>　　这是此书最后一章的内容，包括如下几个小节：</p>
<h3 id="◇好书能带来什么帮助？"><a href="#◇好书能带来什么帮助？" class="headerlink" title="◇好书能带来什么帮助？"></a>◇好书能带来什么帮助？</h3><p>　　前面介绍的，都是关于“如何更好地阅读”，但是书籍本身的好坏也很重要。关于好书的重要性，俺摘录一段：</p>
<blockquote>
<p>读一本好书，却会让你的努力有所回报。最好的书对你的回馈也最多。当然，这样的回馈分成两种：第一，当你成功地阅读了一本难读的好书之后，你的阅读技巧必然增进了。第二（长期来说这一点更重要）一本好书能教你了解这个世界以及你自己。你不只更懂得如何读得更好，还更懂得生命。你变得更有智慧，而不只是更有知识—像只提供讯息的书所形成的那样。你会成为一位智者，对人类生命中永恒的真理有更深刻的体认。</p>
</blockquote>
<p>　　请注意这段提到的两个词【知识】和【智慧】——只提供讯息的书，带给你“知识”；而真正的好书带给你“智慧”。至于消遣性的书，既不会给你知识，也不会给你智慧。</p>
<h3 id="◇书籍的金字塔"><a href="#◇书籍的金字塔" class="headerlink" title="◇书籍的金字塔"></a>◇书籍的金字塔</h3><p>　　书籍的好坏是符合【二八原理】滴！（俺曾经写过一个系列《<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2009/02/80-20-principle-0-overview.html">无处不在的二八原理</a>》）。<br>　　关于书籍的金字塔，包括三层：</p>
<p><strong>第1层</strong><br>　　99% 的书籍对于你的能力提升是毫无帮助的。这 99% 里面，相当大一部分书是“消遣性”的，还有一些可能是跟你完全无关的领域。<br>　　显然，这些书籍是不需要进行“分析阅读”的。</p>
<p><strong>第2层</strong><br>　　这一层次的书籍，你至少要做一次完整的“分析阅读”。经过一次分析阅读之后，你基本上就“读通”了，知道这本书的主要精华。一旦读通，以后你就无需再去阅读。顶多是偶尔拿出来翻看个别重点，复习某些片段。</p>
<p><strong>第3层</strong><br>　　这一层次的书，非常非常少。它们的特点是：你无法通过一次完整的“分析阅读”，就把它读通。甚至有可能你进行了 N 次分析阅读，也无法尽其究竟。<br>　　为啥会这样捏？俺介绍一下第2层与第3层之间的微妙差异：</p>
<p><strong>第2层与第3层的差异</strong><br>　　第2层的书<br>　　当你进行多次分析阅读，每次的收获会变少。因为你的本人的积累增多了，理解力提升了，而书的内容是固定的。显然每次阅读，收获降低了。<br>　　第3层的书<br>　　随着你的能力提升，每一次对该书进行分析阅读，你的收获都是全新的。甚至有可能后面的阅读，收获会更多。为啥会这样捏？因为这类书的作者，境界远远高于你本人。有可能在你一生的不同阶段都可以反复阅读同一本书，始终有收获。因为你始终达不到该书作者的境界。</p>
<h3 id="◇生命与心智的成长"><a href="#◇生命与心智的成长" class="headerlink" title="◇生命与心智的成长"></a>◇生命与心智的成长</h3><p>　　这一节有两段话，俺摘录如下（粗体是俺标注滴）。希望能激发大伙儿对思考的热情。</p>
<blockquote>
<p>　　人类的心智有很奇怪的一点，主要是这一点划分了我们心智与身体的截然不同。我们的身体是<strong>有限制</strong>的，心智却<strong>没有限制</strong>。其中一个迹象是，在力量与技巧上，身体不能无限制地成长。人们到了30岁左右，身体状况就达到了巅峰，随着时间的变化，身体的状况只有越来越恶化，而<strong>我们的头脑却能无限地成长与发展下去</strong>。我们的心智不会因为到了某个年纪死就停止成长，只有当大脑失去活力，僵化了，才会失去了增加技巧与理解力的力量。</p>
<p>　　<strong>这是人类最明显的特质，也是万物之灵与其他动物最主要不同之处。</strong>其他的动物似乎发展到某个层次之后，便不再有心智上的发展。但是人类独有的特质，却也潜藏着巨大的危险。<strong>心智就跟肌肉一样，如果不常运用就会萎缩。</strong>心智的萎缩就是在惩罚我们不经常动脑。这是个可怕的惩罚，因为证据显示，心智萎缩也可能要人的命。除此之外，似乎也没法说明为什么许多工作忙碌的人一旦退休之后就会立刻死亡。他们活着是因为工作对他们的心智上有所要求，那是一种人为的支撑力量，也就是外界的力量。一旦外界要求的力量消失之后，他们又没有内在的心智活动，他们便停止了思考，死亡也跟着来了。</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-10T04:30:51.000Z" title="2021/7/10 下午12:30:51">2021-07-10</time>发表</span><span class="level-item"><time dateTime="2021-07-10T04:46:00.694Z" title="2021/7/10 下午12:46:00">2021-07-10</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">2 分钟读完 (大约256个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/10/2021%E6%9A%91%E5%81%87leetcode%E8%AE%AD%E7%BB%83%EF%BC%88%E4%B8%80%EF%BC%89/">2021暑假leetcode训练（一）</a></h1><div class="content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>因为还在学习C++，所以本次刷题所使用的编程语言为C。下学期我们会开一门叫做《计算机算法》的专业课，我想先提前玩一玩算法，所以就通过leetcode平台去刷题了。在每道算法题解中，我会给出两种或多种解法(我的解法和其他人比较好的解法)。</p>
<h2 id="1-二分查找"><a href="#1-二分查找" class="headerlink" title="1.二分查找"></a>1.二分查找</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。</p>
<p>示例 1:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">输入: nums = [-1,0,3,5,9,12], target = 9</span><br><span class="hljs-section">输出: 4</span><br><span class="hljs-section">解释: 9 出现在 nums 中并且下标为 4</span><br></code></pre></td></tr></table></figure>
<p>示例 2:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">输入: nums = [-1,0,3,5,9,12], target = 2</span><br><span class="hljs-section">输出: -1</span><br><span class="hljs-section">解释: 2 不存在 nums 中因此返回 -1</span><br></code></pre></td></tr></table></figure>

<p>提示：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">你可以假设 <span class="hljs-selector-tag">nums</span> 中的所有元素是不重复的。<br><span class="hljs-selector-tag">n</span> 将在 <span class="hljs-selector-attr">[1, 10000]</span>之间。<br><span class="hljs-selector-tag">nums</span> 的每个元素都将在 <span class="hljs-selector-attr">[-9999, 9999]</span>之间。<br></code></pre></td></tr></table></figure>
<h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-06T15:59:50.000Z" title="2021/7/6 下午11:59:50">2021-07-06</time>发表</span><span class="level-item"><time dateTime="2021-07-06T16:08:22.169Z" title="2021/7/7 上午12:08:22">2021-07-07</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a></span><span class="level-item">29 分钟读完 (大约4347个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/06/python%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A2%98%E5%BA%93/">python与数据分析题库</a></h1><div class="content"><h2 id="第一章-Python与数据分析"><a href="#第一章-Python与数据分析" class="headerlink" title="第一章 Python与数据分析"></a>第一章 Python与数据分析</h2><p><strong>一、选择题</strong></p>
<ol>
<li>数据分析第三方库包括（ A B C ）</li>
</ol>
<p>A. NumPy  B. Matplotlib  C.  Pandas   D.  Pygame</p>
<ol start="2">
<li>不是数据分析常用工具的是（ B ）</li>
</ol>
<p>A.  Python  B.  Java    C.  MATLAB  D.  R</p>
<p><strong>二、填空题</strong></p>
<ol>
<li><p>数据分析流程包括： 需求分析、数据获取、数据预处理、分析与建模、模型评价与优化、部署    等环节。</p>
</li>
<li><p>广义的数据分析包括    狭义数据分析  、  数据挖掘     两部分。</p>
</li>
</ol>
<p><strong>三、简单题</strong></p>
<ol>
<li>Python数据分析的优势。</li>
</ol>
<p>答：1. 语法简单精炼。比起其他编程语言，Python更容易学习和使用。</p>
<ol start="2">
<li><p>功能强大的库。大量优秀好用的第三方库，扩充了Python功能，提升了Python的能力，使Python如虎添翼。</p>
</li>
<li><p>功能强大。Python是一个混合体，丰富的工具使它介于传统的脚本语言和系统语言之间。Python不仅具备简单易用的特点，还提供了编译语言所具有的软件工程能力。</p>
</li>
<li><p>不仅适用于研究和原型构建，同时也适用于构建生产系统。研究人员和工程技术人员使用同一种编程工具，会给企业带来显著的组织效益，并降低企业的运营成本。</p>
</li>
<li><p>Python是一门胶水语言。Python程序能够以多种方式轻易地与其他语言的组件“粘接”在一起，例如Python的C语言API可以帮助Python程序灵活地调用C程序。因此可以根据需要给Python程序添加功能，或者其他环境系统中使用Python。</p>
</li>
<li><p>Python数据分析环境搭建。</p>
</li>
</ol>
<p>答：1. 安装Python</p>
<ol start="2">
<li>安装数据分析库</li>
</ol>
<p>（1）安装第三方数据分析库</p>
<p>第三方库的安装使用pip3命令，如下所示。</p>
<p>pip3 install numpy</p>
<p>pip3 install scipy</p>
<p>pip3 install matplotlib</p>
<p>pip3 install sklearn</p>
<p>pip3 install xlrd </p>
<p>pip3 install openpyxl</p>
<p>pip3 install seaborn</p>
<ol start="3">
<li>Jupyter Notebook的使用</li>
</ol>
<p>Jupyter Notebook是IPython Notebook的继承者，是一个交互式笔记本，支持运行40多种编程语言。它本质上是一个支持实施代码、数学方程、可视化和Markdown的Web应用程序。对于数据分析，Jupyter Notebook最大的优点是可以重现整个分析过程，并将说明文字、代码、图表、公式和结论都整合在一个文档中。用户可以通过电子邮件、Dropbox、GitHub和Jupyter Notebook Viewer将分析结果分享给其他人。</p>
<p>Jupyter Notebook是一个非常强大的工具，常用于交互式地开发和展示数据科学项目。它将代码和它的输出集成到一个文档中，并且结合了可视的叙述性文本、数学方程和其他丰富的媒体。它直观的工作流促进了迭代和快速的开发，使得Jypyter notebook 在当代数据科学、分析和越来越多的科学研究中越来越受欢迎。最重要的是，作为开源项目，它是完全免费的。</p>
<h2 id="第二章-NumPy数值计算"><a href="#第二章-NumPy数值计算" class="headerlink" title="第二章 NumPy数值计算"></a>第二章 NumPy数值计算</h2><p><strong>一、单选题</strong></p>
<ol>
<li><p>不是NumPy数组创建的函数是（ D ）。</p>
<p>A. array    B. ones_like   C. eye   D. reshape</p>
</li>
<li><p>能够产生正态分布的样本值的函数是（ C ）。</p>
<p>A. rand  B. randint  C. randn  D. seed</p>
</li>
<li><p>求数组转置的除了使用transpose函数外，还可以使用数据的（ A ）属性。</p>
<p>A. T    B. shape   C. size   D. dtype</p>
</li>
</ol>
<p><strong>二、填空题</strong></p>
<ol>
<li><p>分割数组的函数有  split  、  hsplit 、  vsplit 。</p>
</li>
<li><p>求数组的标准差函数是 std ，方差函数是 var 。</p>
</li>
<li><p>求矩阵特征值和特征向量的函数是  eigvals()  、  eig()  。</p>
</li>
</ol>
<p><strong>三、简答题</strong></p>
<ol>
<li>函数unique的参数。</li>
</ol>
<p>答：</p>
<p>参数arr：输入数组，如果不是一维数组则会展开。</p>
<p>return_index：如果为true，返回新列表元素在旧列表中的位置（下标），并以列表形式储。</p>
<p>return_inverse：如果为true，返回旧列表元素在新列表中的位置（下标），并以列表形式储。</p>
<p>return_counts：如果为true，返回去重数组中的元素在原数组中的出现次数。</p>
<ol start="2">
<li>数组可以广播的条件。</li>
</ol>
<p>答：</p>
<ol>
<li><p>数组拥有相同形状。</p>
</li>
<li><p>数组拥有相同的维数，每个维度拥有相同长度，或者长度为 1。</p>
</li>
<li><p>数组拥有极少的维度，可以在其前面追加长度为 1 的维度，使上述条件成立。</p>
</li>
<li><p>函数sort的排序算法。</p>
</li>
</ol>
<p>答：</p>
<table>
<thead>
<tr>
<th>种类</th>
<th>排序算法</th>
<th>最坏情况</th>
</tr>
</thead>
<tbody><tr>
<td>‘quicksort’</td>
<td>快速排序</td>
<td>O(n^2)</td>
</tr>
<tr>
<td>‘mergesort’</td>
<td>归并排序</td>
<td>O(n*log(n))</td>
</tr>
<tr>
<td>‘heapsort’</td>
<td>堆排序</td>
<td>O(n*log(n))</td>
</tr>
</tbody></table>
<p><strong>四、读程序</strong></p>
<ol>
<li>程序执行结果是     。<img src="/images/python/clip_image002.jpg"></li>
</ol>
<p>import numpy as np</p>
<p>a = np.arange(12).reshape(2,6)</p>
<p>c = a.ravel()</p>
<p>c[0]=100</p>
<p>print(a)</p>
<ol start="2">
<li>程序执行结果是     。<img src="/images/python/clip_image004.jpg"></li>
</ol>
<p>import numpy as np </p>
<p>a = np.arange(9) </p>
<p>b = np.split(a,3) </p>
<p>print (b) </p>
<ol start="3">
<li>程序执行结果是     。<img src="/images/python/clip_image006.jpg"></li>
</ol>
<p>import numpy as np </p>
<p>a = np.array([[1,2,3],[4,5,6]]) </p>
<p>print(np.append(a, [7,8,9]))</p>
<p>print(np.append(a, [[7,8,9]],axis = 0)) </p>
<p>print(np.append(a, [[5,5,5],[7,8,9]],axis = 1))</p>
<ol start="4">
<li>程序执行结果是     。<img src="/images/python/clip_image008.jpg"></li>
</ol>
<p>import numpy as np </p>
<p>a = np.array([5,2,6,2,7,5,6,8,2,9]) </p>
<p>u = np.unique(a) </p>
<p>u,indices = np.unique(a, return_index = True) </p>
<p>print(indices) </p>
<p>u,indices = np.unique(a,return_inverse = True) </p>
<p>print(u) </p>
<p>print(indices) </p>
<p>print(u[indices]) </p>
<p>u,indices = np.unique(a,return_counts = True) </p>
<p>print(u)</p>
<p>print(indices)</p>
<ol start="5">
<li>程序执行结果是     。<img src="/images/python/clip_image010.jpg"></li>
</ol>
<p>import numpy as np </p>
<p>a = np.array([10,100,1000]) </p>
<p>print(np.power(a,2)) </p>
<p>b = np.array([1,2,3]) </p>
<p>print(np.power(a,b))</p>
<ol start="6">
<li>程序执行结果是  <img src="/images/python/image-20210707000306679.png">   。</li>
</ol>
<p>import numpy as np </p>
<p>a = np.array([[3,7],[9,1]]) </p>
<p>print(np.sort(a)) </p>
<p>print(np.sort(a, axis = 0)) </p>
<p>dt = np.dtype([(‘name’, ‘S10’),(‘age’, int)]) </p>
<p>a = np.array([(“raju”,21),(“anil”,25),(“ravi”, 17), (“amar”,27)], dtype = dt) </p>
<p>print(np.sort(a, order = ‘name’))</p>
<ol start="7">
<li>程序执行结果是     。<img src="/images/python/clip_image012.jpg"></li>
</ol>
<p>import numpy as np </p>
<p>x = np.arange(100).reshape(10, 10) </p>
<p>condition = np.mod(x,2) == 0 </p>
<p>print(np.extract(condition, x))</p>
<p><strong>五、计算题</strong></p>
<p>1.计算下列行列式</p>
<p>（1）<img src="/images/python/clip_image014.gif">= <img src="/images/python/clip_image016.jpg"></p>
<ol start="2">
<li>求下列方阵的逆矩阵</li>
</ol>
<p>（1）<img src="/images/python/clip_image018.gif">= <img src="/images/python/clip_image020.jpg"></p>
<p>（2）<img src="/images/python/clip_image022.gif">= <img src="/images/python/clip_image024.jpg"></p>
<ol start="3">
<li>求下列线性方程组</li>
</ol>
<p>（1）设<img src="/images/python/clip_image026.gif">，<img src="/images/python/clip_image028.gif">，求X使AX=B；<img src="/images/python/clip_image030.jpg"></p>
<p>（2）<img src="/images/python/clip_image032.gif"> 无法求解。</p>
<ol start="4">
<li>求矩阵的特征值和特征向量。</li>
</ol>
<p><img src="/images/python/clip_image034.gif"> <img src="/images/python/clip_image036.jpg"></p>
<h2 id="第三章-Matplotlib数据可视化"><a href="#第三章-Matplotlib数据可视化" class="headerlink" title="第三章 Matplotlib数据可视化"></a>第三章 Matplotlib数据可视化</h2><p><strong>一、选择题</strong></p>
<ol>
<li>线形图中设置线宽的函数是（ C ）</li>
</ol>
<p>A. color B. linestyle C. linewidth D. marker</p>
<ol start="2">
<li>显示一个数据系列中各项的大小与各项总和的比例的图形时（ A ）</li>
</ol>
<p>A. 饼图 B. 直方图 C.柱形图  D. 散点图</p>
<ol start="3">
<li>图例位置upper left对应的编号是（ A ）</li>
</ol>
<p>A. 0 B. 1 C. 2  D. 3</p>
<p><strong>二、填空题</strong></p>
<ol>
<li><p>绘制饼图的函数是  pie()    。</p>
</li>
<li><p>pyplot设置x坐标取值范围的函数是  xlim    。</p>
</li>
<li><p>pyplot使用rcParams设置字体的属性是 font.sans-serif  。</p>
</li>
</ol>
<p><strong>三、简答题</strong></p>
<ol>
<li>创建子图的函数。</li>
</ol>
<p>答：</p>
<p>subplot函数</p>
<p>函数subplot (nrows, ncols, plot_number)创建子图，其中参数nrows，ncols表示行数和列数，决定了子图的个数；plot_number表示当前是第几个子图。</p>
<p>subplots函数</p>
<p>函数plt.subplots(nrows=1, ncols=1, sharex=False, sharey=False, squeeze=True, subplot_kw=None, gridspec_kw=None,**fig_kw) </p>
<p>参数nrows和ncols表示将画布分割成几行几列。   </p>
<p>sharex和sharey表示坐标轴的属性是否相同。</p>
<ol start="2">
<li>Matplotlib能够绘制哪些二维图形。</li>
</ol>
<p>答：折线图、散点图、柱状图、条形图、饼图、直方图、线形图等。</p>
<ol start="3">
<li>文本注解函数。</li>
</ol>
<p>答：</p>
<p>（1）在任意位置增加文本</p>
<p>plt.text(横坐标, 纵坐标, ‘显示文字’)</p>
<p>（2）在图形中增加带箭头的注</p>
<p>plt.annotate(‘文字’,xy=(箭头坐标),xytext=(文字坐标),arrowprops=dict(facecolor=’箭头颜色’))</p>
<h2 id="第四章-Pandas数据分析"><a href="#第四章-Pandas数据分析" class="headerlink" title="第四章 Pandas数据分析"></a>第四章 Pandas数据分析</h2><p>一、选择题</p>
<ol>
<li>函数应用与映射函数作用于DataFrame的列的是（ A  ）</li>
</ol>
<p>A pipe  B apply  C applymap   D map</p>
<ol start="2">
<li>重建索引函数（ D  ）</li>
</ol>
<p>A. rename  B. set_index  C. reset_index  D. reindex</p>
<ol start="3">
<li>求协方差的函数是（ B  ）</li>
</ol>
<p>A. pct_change  B. corr  C. rank  D. cov</p>
<p>二、填空题</p>
<ol>
<li><p>数据对象DataFrame的head函数的作用是   返回开头前n行  。</p>
</li>
<li><p>函数read_csv的参数sep的作用是指定  分隔符  。</p>
</li>
<li><p>数据对象DataFrame选取行的函数主要是loc函数和  iloc  函数。</p>
</li>
<li><p>透视表和交叉表的函数是  pivot_table  和  crosstab  。</p>
</li>
</ol>
<p>三、简答题</p>
<ol>
<li>Pandas有哪些数据结构。</li>
</ol>
<p>答：Pandas有三种数据结构：系列(Series)、数据帧(DataFrame)和面板(Panel)，这些数据结构可以构建在NumPy数组之上。</p>
<ol start="2">
<li>Pandas的统计函数。</li>
</ol>
<p>答：</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>count()</td>
<td>非空观测数量</td>
</tr>
<tr>
<td>sum()</td>
<td>所有值之和</td>
</tr>
<tr>
<td>mean()</td>
<td>所有值的平均值</td>
</tr>
<tr>
<td>median()</td>
<td>所有值的中位数</td>
</tr>
<tr>
<td>mode()</td>
<td>值的模值</td>
</tr>
<tr>
<td>std()</td>
<td>值的标准偏差</td>
</tr>
<tr>
<td>min()</td>
<td>所有值中的最小值</td>
</tr>
<tr>
<td>max()</td>
<td>所有值中的最大值</td>
</tr>
<tr>
<td>abs()</td>
<td>绝对值</td>
</tr>
<tr>
<td>prod()</td>
<td>数组元素的乘积</td>
</tr>
<tr>
<td>cumsum()</td>
<td>累计总和</td>
</tr>
<tr>
<td>cumprod()</td>
<td>累计乘积</td>
</tr>
<tr>
<td>describe</td>
<td>计算有关DataFrame列的统计信息的摘要</td>
</tr>
</tbody></table>
<p>变化率使用pct_change()函数求解，系列和DatFrames都可以通过pct_change()函数将每个元素与其前一个元素进行比较，并计算变化百分比。</p>
<p>Panda使用cov函数求解两个Series或DataFrame的列之间的协方差。如果数据对象中出现NaN数据，将被自动排除。</p>
<p>相关性DataFrame.corr(method=’pearson’, min_periods=1)</p>
<p>数据排名为元素数组中的每个元素生成排名，使用rank函数实现，其参数axis表示按照index（默认axis=0）还是按照column（axis=1）排名，参数methon表示排名依据：average（并列组平均排序等级）、min（组中最低的排序等级）、max（组中最高的排序等级）、first（按照它们出现在数组中的顺序分配队列）。</p>
<ol start="3">
<li>聚合函数有哪些。</li>
</ol>
<p>答：</p>
<ol>
<li>agg方法聚合</li>
</ol>
<p>方法agg是比较常用的聚合方法，agg的参数可以是一个函数，也可以是多个函数组成的列表。</p>
<ol start="2">
<li><p>apply方法聚合</p>
</li>
<li><p>transform方法聚合</p>
</li>
</ol>
<h2 id="第五章-数据预处理"><a href="#第五章-数据预处理" class="headerlink" title="第五章 数据预处理"></a>第五章 数据预处理</h2><p>一、选择题</p>
<ol>
<li>重复值删除的函数是（ A  ）</li>
</ol>
<p>A. drop_duplicates  B. duplicated C. isnull   D. notnull</p>
<ol start="2">
<li>不是数据规范化方法的是（ D  ）</li>
</ol>
<p>A. 离差规范化  B. 标准差规范化 C. 小数定标规范化  D. 平均值规范化</p>
<ol start="3">
<li>数据重塑方法有（ D  ）</li>
</ol>
<p>A. dropna  B. fillna  C. stack  D. concat</p>
<p>二、填空题</p>
<ol>
<li><p>数据清洗解决数据问题有 重复值  、 缺失值  、 异常值 。</p>
</li>
<li><p>虚拟变量的函数名称是  get_dummies  。</p>
</li>
<li><p>插值法包括  线性插值 、 多项式插值 、 样条插 。</p>
</li>
<li><p>函数merge的参数how取值有 left（左连接） 、  right（右连接） 、 outer（外连接） 和 inner（内连接） 。</p>
</li>
</ol>
<p>三、简答题</p>
<ol>
<li>缺失值处理方法。</li>
</ol>
<p>答：</p>
<p>（1）删除法</p>
<p>（2）固定值替换法</p>
<p>（3）填充法</p>
<p>（4）插值法</p>
<ol start="2">
<li>数据合并连接与重塑的函数。</li>
</ol>
<p>答：</p>
<p>pd.merge(left, right, how=’inner’, on=None, left_on=None, right_on=None, left_index=False, right_index=False, sort=True, suffixes=(‘_x’,’_y’))</p>
<p>DataFrame内置的join方法是一种快速合并的方法。它默认以index作为对齐的列。左右两个DataFrame具有重复列时需要指定重复列的前缀，加以分区，使用lsuffix和rsuffix实现。</p>
<p>pd.concat(objs, axis=0, join=’outer’, join_axes=None, ignore_index=False,</p>
<p>​    keys=None, levels=None, names=None, verify_integrity=False)</p>
<p>combine_first合并</p>
<p>数据重塑是将DataFrame的行或列进行旋转的操作，函数stack将DataFrame的列旋转为行，unstack将DataFrame的行旋转为列。</p>
<ol start="3">
<li>数据变换种类有哪些。</li>
</ol>
<p>答：</p>
<p>虚拟变量</p>
<p>函数变换</p>
<p>连续属性离散化</p>
<p>规范化</p>
<p>随机采样</p>
<h2 id="第六章-机器学习"><a href="#第六章-机器学习" class="headerlink" title="第六章 机器学习"></a>第六章 机器学习</h2><p>一、选择题</p>
<ol>
<li>监督学习包括（ B、C  ）</li>
</ol>
<p>A. 降维  B. 回归 C. 分类   D. 聚类</p>
<ol start="2">
<li>鸢尾花数据集属于（ A  ）</li>
</ol>
<p>A. load数据集  B. make数据集 C. 可在线下载的数据集 D. svmlight/libsvm格式的数据集</p>
<ol start="3">
<li>数据集拆分为训练集和测试集的函数是（ D  ）</li>
</ol>
<p>A. cross_val_score B. PCA  C. score  D. train_test_split</p>
<ol start="4">
<li>支持向量机用来回归分析的算法是（ B  ）</li>
</ol>
<p>A. SVM B. SVC C. SVR D. SVN</p>
<p>二、填空题</p>
<ol>
<li><p>机器学习可以分为监督学习和 无监督学习 。</p>
</li>
<li><p>数据预处理的模块是 preprocessing 。</p>
</li>
<li><p>函数sklearn .decomposition.PCA(n_components=’mle’,whiten=False,svd_solver=’auto’)中参数n_components取值’mle’用MLE算法根据特征的 方差分布情况  选择一定数量的主成分特征来降维。</p>
</li>
</ol>
<p>三、简答题</p>
<ol>
<li>朴素贝叶斯。</li>
</ol>
<p>答：朴素贝叶斯是基于贝叶斯定理与特征条件独立假设的分类方法。最为广泛的两种分类模型是决策树模型（Decision Tree Model）和朴素贝叶斯模型（Naive Bayesian Model，NBM）。</p>
<p>和决策树模型相比，朴素贝叶斯分类器（Naive Bayes Classifier，或NBC）发源于古典数学理论，有着坚实的数学基础，以及稳定的分类效率。同时，NBC模型所需估计的参数很少，对缺失数据不太敏感，算法也比较简单。理论上，NBC模型与其他分类方法相比具有最小的误差率。但是实际上并非总是如此，这是因为NBC模型假设属性之间相互独立，这个假设在实际应用中往往是不成立的，这给NBC模型的正确分类带来了一定影响。</p>
<ol start="2">
<li>模型评估。</li>
</ol>
<p>答：</p>
<p>模型评估是对预测质量的评估，即模型的评价，主要有三种方法。</p>
<ol>
<li>模型自带 score函数</li>
</ol>
<p>使用model.score(X_test,y_test)可以获得模型的评价，其值为[0,1]之间的数，1表示最好。</p>
<p>参数X_test表示测试集，参数y_test表示测试集对应的值。</p>
<ol start="2">
<li>cross_val_score </li>
</ol>
<p>函数cross_val_score会得到一个对于当前模型的评估得分。在该函数中最主要的参数有两个：scoring和cv。</p>
<p>scoring参数设定打分的方式，比如accuracy、average_precision等。</p>
<p>cv参数表示数据划分方式，通常默认的是KFold或者stratifiedKFold方法。</p>
<p>from sklearn.cross_validation import cross_val_score</p>
<p>scores = cross_val_score(knn, X, y, scoring=’accuracy’)</p>
<ol start="3">
<li>评估函数</li>
</ol>
<p>Sklearn预定义了一些评估函数，这些评估函数也可以用来设置corss_val_score的scoring的值，也可以调函函数名称获取评估值。</p>
<ol start="3">
<li>聚类分析。</li>
</ol>
<p>答：</p>
<p>聚类分析指将物理对象或抽象对象的集合分组为由类似的对象组成的多个类的分析过程。聚类分析的目标就是在相似的基础上收集数据来分类。聚类源于很多领域，包括数学、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/9132">计算机科学</a>、统计学、生物学和经济学等。</p>
<p>聚类与分类的不同在于聚类所要求划分的类是未知的。</p>
<p>聚类是将<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB">数据分类</a>到不同的类或者簇这样的一个过程，所以同一个簇中的对象有很大的相似性，而不同簇间的对象有很大的相异性。</p>
<p>从统计学的观点看，聚类分析是通过<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1">数据建模</a>简化数据的一种方法。传统的统计聚类分析方法包括<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E8%81%9A%E7%B1%BB">系统聚类</a>法、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%88%86%E8%A7%A3%E6%B3%95">分解法</a>、加入法、动态聚类法、有序样品聚类、有重叠聚类和模糊聚类等；目前流行的是K-<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9D%87%E5%80%BC">均值</a>、K-中心点等人工智能的聚类分析算法。</p>
<p>聚类分析是一种探索性的分析，能够从样本数据出发，自动进行分类。聚类分析所使用方法的不同，常常会得到不同的结论。</p>
<p>Sklearn实现了多种聚类算法，如表6-6所示。</p>
<p>表6-6 常用聚类算法</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>函数名称</th>
<th>参数</th>
<th>距离度量</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>K-Means</td>
<td>簇数</td>
<td>点之间距离</td>
</tr>
<tr>
<td>2</td>
<td>Spectral clustering</td>
<td>簇数</td>
<td>图距离</td>
</tr>
<tr>
<td>3</td>
<td>Ward hierarchical clustering</td>
<td>簇数</td>
<td>点之间距离</td>
</tr>
<tr>
<td>4</td>
<td>Agglomerative clustering</td>
<td>簇数、连接类型、距离</td>
<td>任意成对点线图间的距离</td>
</tr>
<tr>
<td>5</td>
<td>DBSCA</td>
<td>半径大小、最低成员数目</td>
<td>最近的点之间的距离</td>
</tr>
<tr>
<td>6</td>
<td>Birch</td>
<td>分支因子、阈值、可选全局集群</td>
<td>点之间的欧式距离</td>
</tr>
</tbody></table>
<blockquote>
<p>致谢：感谢老王提供的资源 ©老王</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-06T15:20:58.000Z" title="2021/7/6 下午11:20:58">2021-07-06</time>发表</span><span class="level-item"><time dateTime="2021-07-06T15:22:42.203Z" title="2021/7/6 下午11:22:42">2021-07-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">22 分钟读完 (大约3259个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/06/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%A2%98%E5%BA%93/">操作系统题库</a></h1><div class="content"><ol>
<li><p>虚拟内存方案为页表项使用了一个特殊的高速缓存，通常称为（ 转换检测缓冲区（TLB） ）。</p>
</li>
<li><p>根据操作系统内核是否能感知线程，可以把线程分为两类，其中（ 用户级线程 ）对程序员来说是可见的，而对内核来说却是不可见的。</p>
</li>
<li><p>当系统采用资源有序分配的方法预防死锁时，它破坏了死锁的必要条件中的（循环等待 ）条件</p>
</li>
<li><p>处理多个中断有两种方法，分别是（ 顺序处理 ）和（嵌套处理  ）；</p>
</li>
<li><p>页表项中有一个控制位用来表示当前页是否在内存中，它叫做（  存在位 ），当此控制位未置位时，产生一次内存访问故障，称为（ 缺页中断 ）</p>
</li>
<li><p>在最高响应比优先调度算法中，当各个进程的等待时间相同时，( 服务时间长 ) 的进程将优先调度；当各进程的服务时间相同时，( 等待时间长 ) 的进程将优先调度。</p>
</li>
<li><p>两级存储器提高性能的理论基础是 （局部性原理 ）  。</p>
</li>
<li><p>处理死锁通常有三种方法 （静态预防  ） 、 （动态避免  ）  、 （ 动态检测及解除 ） 。</p>
</li>
<li><p>现代操作系统进程管理的基本功能是 （创建 ） 、 （ 管理 ）、 （ 终止 ） 进程。</p>
</li>
<li><p>对I/O操作可能的三种技术 （ 程序I/O ）、（中断I/O ）、（ DMA ） 。</p>
</li>
<li><p>简述进程切换与模式切换的区别。</p>
</li>
</ol>
<p>模式切换是用户态和内核态之间的切换，因为他们的资源是共享的，所以效率高并且不改变正在运行的进程的状态。<br>进程切换是一个正在运行的进程被中断，操作系统指定另一个进程为运行态，并把控制权交给这个进程。进程切换可以在操作系统从当前正在运行的进程中获得控制权的任何时刻发生，由于进程之间不同状态的切换，需要重新分配各种资源，操作系统需要做更多的工作。</p>
<p>12.简述DMA概念<br>DMA是直接存储器访问技术，其功能由系统总线中的一个独立模块完成或并入到一个I/O模块。当CPU需要读写一块数据时，它给DMA模块发出一条命令，然后断续处理其他工作。DMA模块直接与存储器交互，此进程无需CPU参与，传送完毕之后，DMA发送中断信号给CPU。</p>
<ol start="13">
<li>请列举两种常用的页面置换算法，并简要说明其算法思想和优缺点。</li>
</ol>
<p>最佳置换OPT：选择置换下次访问距当前时间最长的那些页。OPT能导致最少的缺页中断，但是由于它要求操作系统必须知道将来的事件，显然这是不可能实现的。但是它仍然能作为一种标准来衡量其他算法的性能。<br>   先进先出FIFO：置换出驻留在内存中时间最长的页。FIFO是实现起来最简单的置换算法，只需要使用一个循环移动的指针。但是FIFO可能导致一些页会反复的被换入换出。<br>   最近最少使用LRU：置换内存中上次使用距离当前最远的页。LRU的性能接近于OPT。但LRU比较难于实现，而且实现的开销比较大。</p>
<ol start="14">
<li>说明动态分区存储管理中的最佳和首次适配算法的执行过程，以及他们的优缺点。</li>
</ol>
<p>最佳适配：选择与要求的大小最接近的空闲块。首次适配：从开始扫描内存，选择大小足够的第一个可用块。首次适配算法不仅是最简单的，而且通常是最快和最好的。但首次适配算法会使得内存的前端出现很多小的空闲分区，并且每当进行首次适配查找时，都要经过这些分区。最佳适配算法尽管称为“最佳”，但通常性能却是最差的。这个算法需要查找满足要求的最小块，因而它可能保证产生的碎片尽可能的小。尽管每次存储请求总是浪费最小的存储空间，但结果却使得内存中很快产生许多很小的块，这些块通常很小以至于不能满足任何内存分配请求。因此，最佳适配算法比其他算法需要更经常的进行内存压缩。</p>
<ol start="15">
<li>什么是进程？为什么要在操作系统中引入进程？</li>
</ol>
<p>进程是可并发执行且具有独立功能的程序在一个数据集合上的运行过程，它是操作系统进行资源分配和调度的基本单位。“进程”概念是人们为了使程序能够并发执行，并且能对并发的程序加以描述和控制而引入的。</p>
<ol start="16">
<li>简述什么是临界区？对临界区的互斥访问有哪些要求？ </li>
</ol>
<p>对临界区的互斥访问必须满足(1)必须强制实施互斥，即只允许一个进程进入临界区 (2)一个在非临界区停止的进程不能干涉其他进程 (3)绝不允许出现需要访问临界区的进程被无限延迟的情况，即不会死锁或饥饿 (4)当没有进程在临界区中时，任何需要进入临界区的进程必须能够立即进入 (5)对相关进程的执行速度和处理器的数目没有任何要求和限制 (6)一个进程驻留在临界区中的时间必须是有限的。<br> 使用临界资源的那一部分程序称为临界区。</p>
<ol start="17">
<li>处理器调度的层次有哪些？各层次的主要工作是什么？</li>
</ol>
<p>（2）中级调度：内存和外存之间的交换。系统内存使用紧张时，把内存中暂时不能运行的进程调到外存中等待，等内存有足够的空闲空间时，再将外存上的某些具备了运行条件的就绪进程调入内存<br>（1）高级调度：从驻留在外存后备队列中选择一个或多个作业调入内存，创建进程并放入就绪队列中，等待被调度执行。<br>（3）低级调度：按照一定的算法从就绪队列中选择一个进程，然后将处理器分配给它。<br>处理器调度的层次分为三级调度：高级调度、中级调度和低级调度。</p>
<ol start="18">
<li><p>一个计算机系统的虚拟存储器，其最大容量和实际容量分别由什么决定？<br>虚拟存储器的实际容量由指令中表示地址的字长决定，也就是计算机的地址结构决定的。<br>虚拟存储器的最大容量由主存和辅存的容量之和确定。</p>
</li>
<li><p>什么是内部碎片和外部碎片？固定分区分配、可变分区分配、分段存储管理和分页存储管理可能产生何种碎片？<br>内碎片：在一个分区或页的内部出现的碎片(即被浪费的空间)。外碎片：在所有分区之外新增的碎片称作外部碎片。固定分区分配、分页存储管理可能产生内碎片。可变分区分配、分段存储管理可能产生外碎片</p>
</li>
<li><p>请简述FCFS (先来先服务)、RR (轮转)、SPN (最短进程优先)进程调度算法的算法思想。</p>
</li>
</ol>
<p>(3)最短进程优先 SPN：选择预计处理时间最短的进程运行。<br>轮转RR：以一个时间间隔（时间片）产生时钟中断，当时钟中断发生时，当前正在运行的进程被置于就绪队列中，然后基于FCFS策略选择下一个就绪进程运行。<br>先来先服务FCFS：选择在就绪队列中存在时间最长的进程执行。</p>
<ol start="21">
<li>简述进程控制块的内容。</li>
</ol>
<p>进程控制块中包含标识符、状态、优先级、程序计数器、内存指针、上下文数据、I/O状态信息、记账信息。</p>
<ol start="22">
<li>semWait操作和semSignal操作是如何定义的？简述当进程调用了semWait和semSignal后，它自身的进程状态的改变情况。</li>
</ol>
<p>semWait操作：信号量减1，若值为负数，则执行semWait的进程被阻塞。否则进程继续执行。semSignal操作：信号量加1，若值小于或等于零，则被semWait操作阻塞的进程被解除阻塞。当进程调用了semWait，它自身的进程状态可能不改变，或由运行态变为阻塞态。当进程调用了semSignal，它自身的状态不变。</p>
<ol start="23">
<li>某杂技团进行走钢丝表演。在钢丝的A、B两端各有n名演员（n&gt;1）在等待表演。只要钢丝上无人时便允许一名演员从钢丝的一端走到另一端。现要求两端的演员交替地走钢丝，且从A端的一名演员先开始。请问，把A、B两端的演员各看作一个进程时，怎样用semWait操作和semSignal操作（PV操作）来进行控制？设置几个信号量，分别用于控制什么，信号量的初值是多少？请写出能进行正确管理的程序。</li>
</ol>
<p>（参考答案说明：信号量的命名可以任意）设置2个信号量S1、S2。S1用于A端演员是否可以走钢丝，由于A端演员先走，S1初值为1。S2用于B端演员是否可以走钢丝，由于B端演员后走，S2初值为0.。<br>A端：           B端：<br>semSignal(S2)       semSignal(S1)<br>semWait(S1)        semWait(S2)<br>走钢丝          走钢丝</p>
<ol start="24">
<li><p>简述进程与线程的概念。<br>进程是具有独立功能的程序在某个数据集合上的一次执行过程。进程是系统进行资源分配和调度的一个独立单位。在现代操作系统中，资源申请的基本单位是进程，进程由程序段、数据段和PCB（进程控制块）组成。线程是进程内的一个执行实体或执行单元，是比进程更小的能独立运行的基本单位。</p>
</li>
<li><p>简述文件及文件组织的概念。</p>
</li>
</ol>
<p>文件组织:堆、顺序文件、索引顺序文件、索引文件、直接或散列文件。<br>文件是一组相似记录的集合，它被用户和应用程序看做一个实体，可以通过名字访问。</p>
<p>26.简述抢占式处理器调度和非抢占式处理器调度。</p>
<p>抢占式处理器调度：当前正在运行的进程可能被操作系统中断并转移至就绪态，它可能会导致较大的开销，但对所有的进程会提供较好的服务。<br>非抢占式处理器调度：一旦进程开始运行，就不间断执行直到终止，或者为等待I/O或请求某些系统服务而阻塞自己。</p>
<ol start="27">
<li>简述在使用TLB的请求式分页内存管理方案中一次指令访问过程。</li>
</ol>
<p>首先进行逻辑地址转换为页号与页内偏移，根据页号查找TLB中的页表项，如果命中，则进行地址重定位；如果TLB没有命中，则在内存中查找页表，如果当前页在内存，则将此页表项添加到TLB，并将页帧号与页内偏移拼接形成物理地址，如果当前页不在内存，则产生缺页中断，将所缺页调入内存之后，再进行地址重定位。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-07-01T10:14:57.000Z" title="2021/7/1 下午6:14:57">2021-07-01</time>发表</span><span class="level-item"><time dateTime="2021-07-01T10:16:19.927Z" title="2021/7/1 下午6:16:19">2021-07-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">3 分钟读完 (大约429个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/01/%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/">磁盘调度算法的设计与实现</a></h1><div class="content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>操作系统课设的收尾</p>
<h3 id="实现源码"><a href="#实现源码" class="headerlink" title="实现源码"></a>实现源码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&quot;stdio.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&quot;stdlib.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> maxsize 1000 <span class="hljs-comment">//定义最大数组域</span></span><br><span class="hljs-comment">//先进先出调度算法</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FIFO</span><span class="hljs-params">(<span class="hljs-keyword">int</span> <span class="hljs-built_in">array</span>[],<span class="hljs-keyword">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> sum=<span class="hljs-number">0</span>,j,i,now;<br>    <span class="hljs-keyword">float</span> avg;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 请输入当前的磁道号： &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;now);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n FIFO 调度结果: &quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,now);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    sum=<span class="hljs-built_in">abs</span>(now-<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>]);<br>    <span class="hljs-keyword">for</span>(j=<span class="hljs-number">1</span>; j&lt;m; j++) sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[j]-<span class="hljs-built_in">array</span>[j<span class="hljs-number">-1</span>]); <span class="hljs-comment">//累计总的移动距离</span><br>    avg=(<span class="hljs-keyword">float</span>)sum/m;<span class="hljs-comment">//计算平均寻道长度</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 移动的总道数： %d \n&quot;</span>,sum);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 平均寻道长度： %f \n&quot;</span>,avg);<br>&#125;<br><span class="hljs-comment">//最短服务时间优先调度算法</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SSTF</span><span class="hljs-params">(<span class="hljs-keyword">int</span> <span class="hljs-built_in">array</span>[],<span class="hljs-keyword">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> temp;<br>    <span class="hljs-keyword">int</span> k=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">int</span> now,l,r;<br>    <span class="hljs-keyword">int</span> i,j,sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">float</span> avg;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(j=i+<span class="hljs-number">1</span>; j&lt;m; j++) <span class="hljs-comment">//对磁道号进行从小到大排列</span><br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[i]&gt;<span class="hljs-built_in">array</span>[j])<span class="hljs-comment">//两磁道号之间比较</span><br>            &#123;<br>                temp=<span class="hljs-built_in">array</span>[i];<br>                <span class="hljs-built_in">array</span>[i]=<span class="hljs-built_in">array</span>[j];<br>                <span class="hljs-built_in">array</span>[j]=temp;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>( i=<span class="hljs-number">0</span>; i&lt;m; i++) <span class="hljs-comment">//输出排序后的磁道号数组</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 请输入当前的磁道号： &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;now);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n SSTF 调度结果: &quot;</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[m<span class="hljs-number">-1</span>]&lt;=now)<span class="hljs-comment">//判断整个数组里的数是否都小于当前磁道号</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(i=m<span class="hljs-number">-1</span>; i&gt;=<span class="hljs-number">0</span>; i--) <span class="hljs-comment">//将数组磁道号从大到小输出</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>        sum=now-<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>];<span class="hljs-comment">//计算移动距离</span><br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>]&gt;=now)<span class="hljs-comment">//判断整个数组里的数是否都大于当前磁道号</span><br>    &#123;<br>        <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++) <span class="hljs-comment">//将磁道号从小到大输出</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>        sum=<span class="hljs-built_in">array</span>[m<span class="hljs-number">-1</span>]-now;<span class="hljs-comment">//计算移动距离</span><br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-built_in">array</span>[k]&lt;now)<span class="hljs-comment">//逐一比较以确定 K 值</span><br>        &#123;<br>            k++;<br>        &#125;<br>        l=k<span class="hljs-number">-1</span>;<br>        r=k;<br><span class="hljs-comment">//确定当前磁道在已排的序列中的位置</span><br>        <span class="hljs-keyword">while</span>((l&gt;=<span class="hljs-number">0</span>)&amp;&amp;(r&lt;m))<br>        &#123;<br>            <span class="hljs-keyword">if</span>((now-<span class="hljs-built_in">array</span>[l])&lt;=(<span class="hljs-built_in">array</span>[r]-now))<span class="hljs-comment">//判断最短距离</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[l]);<br>                sum+=now-<span class="hljs-built_in">array</span>[l];<span class="hljs-comment">//计算移动距离</span><br>                now=<span class="hljs-built_in">array</span>[l];<br>                l=l<span class="hljs-number">-1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[r]);<br>                sum+=<span class="hljs-built_in">array</span>[r]-now;<span class="hljs-comment">//计算移动距离</span><br>                now=<span class="hljs-built_in">array</span>[r];<br>                r=r+<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(l=<span class="hljs-number">-1</span>)<br>        &#123;<br>            <span class="hljs-keyword">for</span>(j=r; j&lt;m; j++)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[j]);<br>            &#125;<br>            sum+=<span class="hljs-built_in">array</span>[m<span class="hljs-number">-1</span>]-<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>];<span class="hljs-comment">//计算移动距离</span><br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">for</span>(j=l; j&gt;=<span class="hljs-number">0</span>; j--)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[j]);<br>            &#125;<br>            sum+=<span class="hljs-built_in">array</span>[m<span class="hljs-number">-1</span>]-<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>];<span class="hljs-comment">//计算移动距离</span><br>        &#125;<br>    &#125;<br>    avg=(<span class="hljs-keyword">float</span>)sum/m;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 移动的总道数： %d \n&quot;</span>,sum);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 平均寻道长度： %f \n&quot;</span>,avg);<br>&#125;<br><span class="hljs-comment">///扫描算法</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SCAN</span><span class="hljs-params">(<span class="hljs-keyword">int</span> <span class="hljs-built_in">array</span>[],<span class="hljs-keyword">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=i+<span class="hljs-number">1</span>; j&lt;m; j++) <span class="hljs-comment">//对磁道号进行从小到大排列</span><br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[i]&gt;<span class="hljs-built_in">array</span>[j])<span class="hljs-comment">//两磁道号之间比较</span><br>            &#123;<br>                <span class="hljs-keyword">int</span> temp=<span class="hljs-built_in">array</span>[i];<br>                <span class="hljs-built_in">array</span>[i]=<span class="hljs-built_in">array</span>[j];<br>                <span class="hljs-built_in">array</span>[j]=temp;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 请输入当前的磁道号： &quot;</span>);<br>    <span class="hljs-keyword">int</span> now;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;now);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n SCAN 调度结果：&quot;</span>);<br>    <span class="hljs-keyword">int</span> pos;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[i]&gt;=now)<br>        &#123;<br>            pos=i;<br>            sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[i]-now);<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=pos; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(i!=pos)<br>            sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[i]-<span class="hljs-built_in">array</span>[i<span class="hljs-number">-1</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    &#125;<br>    <span class="hljs-keyword">if</span>(pos&gt;=<span class="hljs-number">1</span>)<br>        sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[m<span class="hljs-number">-1</span>]-<span class="hljs-built_in">array</span>[pos<span class="hljs-number">-1</span>]);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=pos<span class="hljs-number">-1</span>; i&gt;=<span class="hljs-number">0</span>; i--)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(i)<br>            sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[i]-<span class="hljs-built_in">array</span>[i<span class="hljs-number">-1</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 移动的总道数：%d\n 平均寻道长度：%f\n&quot;</span>,sum,<span class="hljs-number">1.0</span>*sum/m);<br>&#125;<br><span class="hljs-comment">///循环扫描算法</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">CSCAN</span><span class="hljs-params">(<span class="hljs-keyword">int</span> <span class="hljs-built_in">array</span>[],<span class="hljs-keyword">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> sum=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=i+<span class="hljs-number">1</span>; j&lt;m; j++) <span class="hljs-comment">//对磁道号进行从小到大排列</span><br>        &#123;<br>            <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[i]&gt;<span class="hljs-built_in">array</span>[j])<span class="hljs-comment">//两磁道号之间比较</span><br>            &#123;<br>                <span class="hljs-keyword">int</span> temp=<span class="hljs-built_in">array</span>[i];<br>                <span class="hljs-built_in">array</span>[i]=<span class="hljs-built_in">array</span>[j];<br>                <span class="hljs-built_in">array</span>[j]=temp;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 请输入当前的磁道号： &quot;</span>);<br>    <span class="hljs-keyword">int</span> now;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;now);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n C-SCAN 调度结果：&quot;</span>);<br>    <span class="hljs-keyword">int</span> pos;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">array</span>[i]&gt;=now)<br>        &#123;<br>            pos=i;<br>            sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[i]-now);<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=pos; i&lt;m; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(i!=pos)<br>            sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[i]-<span class="hljs-built_in">array</span>[i<span class="hljs-number">-1</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    &#125;<br>    <span class="hljs-keyword">if</span>(pos&gt;=<span class="hljs-number">1</span>)<br>        sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[m<span class="hljs-number">-1</span>]-<span class="hljs-built_in">array</span>[<span class="hljs-number">0</span>]);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;pos; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(i)<br>            sum+=<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">array</span>[i]-<span class="hljs-built_in">array</span>[i<span class="hljs-number">-1</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,<span class="hljs-built_in">array</span>[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 移动的总道数：%d\n 平均寻道长度：%f\n&quot;</span>,sum,<span class="hljs-number">1.0</span>*sum/m);<br>&#125;<br><span class="hljs-comment">// 操作界面</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> c;<br>    <span class="hljs-keyword">int</span> count;<br><span class="hljs-comment">//int m=0;</span><br>    <span class="hljs-keyword">int</span> cidao[maxsize];<span class="hljs-comment">//定义磁道号数组</span><br>    <span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">int</span> b;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n --------------------------------------------------\n&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 磁盘调度算法模拟&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n --------------------------------------------------\n&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请先输入磁道数量： \n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;b);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请先输入磁道序列： \n&quot;</span>);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;b; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;cidao[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 磁道读取结果： \n&quot;</span>);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;b; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>,cidao[i]);<span class="hljs-comment">//输出读取的磁道的磁道号</span><br>    &#125;<br>    count=b;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n &quot;</span>);<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n 算法选择： \n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 1、先进先出算法（ FIFO） \n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 2、最短服务时间优先算法（ SSTF） \n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 3、扫描算法（ SCAN） \n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 4、循环扫描算法（ C-SCAN） \n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; 5. 退出\n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请选择： &quot;</span>);<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;c);<br>        <span class="hljs-keyword">if</span>(c&gt;<span class="hljs-number">5</span>)<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">switch</span>(c)<span class="hljs-comment">//算法选择</span><br>        &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>            FIFO(cidao,count);<span class="hljs-comment">//先进先出算法</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>            SSTF(cidao,count);<span class="hljs-comment">//最短服务时间优先算法</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>            SCAN(cidao,count);<span class="hljs-comment">//扫描算法</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>            CSCAN(cidao,count);<span class="hljs-comment">//循环扫描算法</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>            <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-30T14:00:34.000Z" title="2021/6/30 下午10:00:34">2021-06-30</time>发表</span><span class="level-item"><time dateTime="2021-07-04T12:48:28.989Z" title="2021/7/4 下午8:48:28">2021-07-04</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a></span><span class="level-item">16 分钟读完 (大约2358个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/06/30/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E7%BB%83%E4%B9%A0%E9%A2%98/">人工智能练习题</a></h1><div class="content"><h2 id="人工智能导论练习题（第二版-有答案）"><a href="#人工智能导论练习题（第二版-有答案）" class="headerlink" title="人工智能导论练习题（第二版-有答案）"></a>人工智能导论练习题（第二版-有答案）</h2><h3 id="第三章-图搜索与问题求解"><a href="#第三章-图搜索与问题求解" class="headerlink" title="第三章 图搜索与问题求解"></a>第三章 图搜索与问题求解</h3><ol>
<li><p>设有如图所示的一棵与或树，请指出解树；并分别按和代价及最大代价求解树代价；然后指出<br> 最优解树。</p>
<p><img src="/images/python/image-20210630220143020.png" alt="1图"></p>
</li>
</ol>
<p>题解：</p>
<p>该与或树有两棵解树，其一由 S0、A、D、t1、t2、t3 组成；另一 棵由 S0、B、E、t4、t5组成。</p>
<p>解树 2 的和代价为 18，最大代价为 14；  解树 1 的和代价为 12，最大代价为 10。  所以，最优解树为解树 2。</p>
<ol start="2">
<li><p>试用与或树描述下面不定积分的求解过程：</p>
<p><img src="/images/python/image-20210630220217177.png" alt="2图"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702105142567.png" alt="题解"></p>
</li>
<li><p>图3 是五大城市间的交通示意图，边上的数字是两城市间的距离。用图搜索技术编写程序，求解<br> 以下问题：<br> (1)任找一条西安到北京的旅行路线，并给出其距离。<br> (2) 找一条从西安到北京，必须途经上海的路径。<br> (3) 找一条从西安到北京，必须途经上海，但不能去昆明的路径。</p>
<p><img src="/images/python/image-20210630220305575.png" alt="3图"></p>
</li>
</ol>
<p>题解：</p>
<p>提示：这是一个加权状态图搜索问题，可用 分支界限法或者最近择优法求解。程序可参考 3.2.2 节例 3-11 中的通用程序，但这里open 表中每个状态节点（城市）还需要有代价（距离）项，而且从 open 表中取第一个节点前先要对 open 表中的节点按代价排序。</p>
<p><img src="/images/python/image-20210702105025464.png" alt="1"></p>
<p><img src="/images/python/image-20210702105042053.png" alt="2"></p>
<ol start="4">
<li><p>有一农夫带一只狼、一只羊和一筐菜欲从河的左岸乘船到右岸，但受下列条件限制：<br> (1) 船太小，农夫每次只能带一样东西过河；<br> (2) 如果没有农夫看管，则狼要吃羊，羊要吃菜。<br> 设计一个过河方案， 使得农夫、狼、羊、菜都能不受损失地过河。画出相应的状态变化图。<br> 提示： (1) 用四元组(农夫、狼、羊、菜)表示状态，其中每个元素都可为0或1，用0表示在左岸，<br> 用1表示在右岸。<br> (2) 把每次过河的一种安排作为一个算符，每次过河都必须有农夫，因为只有他可以划<br> 船。</p>
<p>题解：</p>
<p>方案一：Step1 农夫带羊过河；</p>
<p>​         Step2 农夫返回带菜过河 </p>
<p>​         Step3 农夫带羊回去，然后带狼过河；</p>
<p>​         Step4 农夫返回带羊过河；</p>
<p>​         设  A 农夫，B 羊，C 狼，D 菜，初始状态为（A0,B0,C0,D0）（未过河），最终状态为（A1, B1, C1, D1）(已过河） 。则相应的状态变化图如下： </p>
<p><img src="/images/python/image-20210702104629400.png" alt="题解1"></p>
<p>方案 2：Step1：农夫带羊过河；</p>
<p>​              Step2：农夫返回带狼过河；</p>
<p>​              Step3：农夫带羊返回去，然后把菜带过河；</p>
<p>​              Step4：农夫回去带羊过河；  则相应的状态变化图为：</p>
<p><img src="/images/python/image-20210702104820501.png" alt="题解2"></p>
</li>
<li><p>设有三只琴键开关一字排开，初始状态为“关、开、关”，问连按三次后是否会出现“开、 开、开”或<br> “关、关、关”的状态？<br> 要求每次必须按下一个开关，而且只能按一个开关。<br> 另外，画出这个琴键开关的状态空间图。<br> 注： 琴键开关有这样的特点，若第一次按下时它为“开”，则第二次按下时它就变成了“关”。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702111517149.png" alt="题解"></p>
</li>
</ol>
<h3 id="第四章-基于遗传算法的随机优化搜索"><a href="#第四章-基于遗传算法的随机优化搜索" class="headerlink" title="第四章 基于遗传算法的随机优化搜索"></a>第四章 基于遗传算法的随机优化搜索</h3><ol>
<li><p>举例说明遗传算法中的三种遗传操作。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702111933771.png" alt="题解"></p>
<p><img src="/images/python/image-20210702111956672.png" alt="题解"></p>
</li>
<li><p>画出基本遗传算法的流程图</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702111728363.png" alt="题解"></p>
</li>
</ol>
<h3 id="第五章-基于一阶谓词的机器推理"><a href="#第五章-基于一阶谓词的机器推理" class="headerlink" title="第五章 基于一阶谓词的机器推理"></a>第五章 基于一阶谓词的机器推理</h3><ol>
<li><p>将下列句子用一阶谓词形式表示。<br> (1)雪是白的。<br> (2)数a和数b之和大于数c。<br> (3) 201班的学生每人都有一台笔记本电脑。<br> (4)如果明天天气晴朗且我们有时间，则我们去郊游。<br> (5)一个三角形是等腰三角形，当且仅当其有两个角相等。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702105338375.png" alt="题解"></p>
</li>
<li><p>求下列谓词公式的子句集。</p>
<p><img src="/images/python/image-20210630220522087.png" alt="4图"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702105422303.png" alt="题解"></p>
<p><img src="/images/python/image-20210702105457052.png" alt="题解"></p>
<p><img src="/images/python/image-20210702105513353.png" alt="题解"></p>
</li>
<li><p>试判断下列子句集中哪些是不可满足的。</p>
<p><img src="/images/python/image-20210630220550609.png" alt="5图"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702105859505.png" alt="题解1"></p>
<p><img src="/images/python/image-20210702105917510.png" alt="题解2"></p>
<p><img src="/images/python/image-20210702105939547.png" alt="题解3"></p>
<p><img src="/images/python/image-20210702110001783.png" alt="题解4"></p>
<p><img src="/images/python/image-20210702110026718.png" alt="题解5"></p>
</li>
<li><p>对下列各题分别证明，G是否可肯定是F，F1，F2，…的逻辑结论。</p>
<p><img src="/images/python/image-20210630220613004.png" alt="6图"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110056512.png" alt="题解1"></p>
<p><img src="/images/python/image-20210702110116653.png" alt="题解2"></p>
<p><img src="/images/python/image-20210702110136691.png" alt="题解3"></p>
</li>
<li><p>设已知：</p>
<p>(1) 凡是清洁的东西就有人喜欢；<br>(2) 人们都不喜欢苍蝇。<br>  试用谓词公式表示这两个命题，并用归结原理证明：苍蝇是不清洁的。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110223409.png" alt="题解"></p>
<p><img src="/images/python/image-20210702110245553.png" alt="题解"></p>
</li>
<li><p>某公司招聘工作人员，有A, B, C三人应聘，经面试后，公司表示如下想法：<br> (1) 三人中至少录取一人；<br> (2) 如果录取A而不录取B，则一定录取C；<br> (3) 如果录取B，则一定录取C。<br> 试用谓词公式表示这三个命题，并用归结原理求证：公司一定录取C。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110317674.png" alt="题解"></p>
</li>
<li><p>张某被盗，公安局派出五个侦察员去调查。<br> 研究案情时，侦察员A说“赵与钱中至少有一人作案”；<br>侦察员B说“钱与孙中至少有一人作案”；<br> 侦察员C说“孙与李中至少有一人作案”；<br> 侦察员D说“赵与孙中至少有一人与此案无关”；<br> 侦察员E说“钱与李中至少有一人与此案无关”。<br> 假设这五个侦察员的话都是可信的，用谓词公式表示这五句话，并用归结原理推出谁是盗窃犯。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110346051.png" alt="题解"></p>
<p><img src="/images/python/image-20210702110402848.png" alt="题解"></p>
</li>
<li><p>试画出例5-28 的（线性）归结演绎树。</p>
<p><img src="/images/python/image-20210630220955740.png" alt="例5-28"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110426304.png" alt="题解"></p>
</li>
</ol>
<h3 id="第六章-基于产生式规则的机器推理"><a href="#第六章-基于产生式规则的机器推理" class="headerlink" title="第六章 基于产生式规则的机器推理"></a>第六章 基于产生式规则的机器推理</h3><p>试将本章给出的正向推理和反向推理算法用PROLOG语言或其他语言编程，实现一个推理机。</p>
<h3 id="第七章-几种结构化知识表示及其推理"><a href="#第七章-几种结构化知识表示及其推理" class="headerlink" title="第七章 几种结构化知识表示及其推理"></a>第七章 几种结构化知识表示及其推理</h3><ol>
<li><p>用三元组表示下列命题。 (1)雪是白的。 (2)小张身高1.80米。</p>
<p>题解：</p>
<p>(1) （雪，颜色，白）</p>
<p>(2) （小张，身高，1.80）</p>
</li>
<li><p>试写出“学生框架”的描述，并用PROLOG语言实现</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110545995.png" alt="题解"></p>
</li>
<li><p>请把下列命题表示的事实用一个语义网络表示出来，并用PROLOG语言实现。<br> (1) 树和草都是植物；<br> (2) 树和草都是有根有叶的；<br> (3) 水草是草，且长在水中；<br> (4) 果树是树，且会结果；<br> (5) 樱桃树是一种果树，它结樱桃。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110613529.png" alt="题解"></p>
</li>
</ol>
<h3 id="第八章-不确定和不确切性知识的表示与推理"><a href="#第八章-不确定和不确切性知识的表示与推理" class="headerlink" title="第八章 不确定和不确切性知识的表示与推理"></a>第八章 不确定和不确切性知识的表示与推理</h3><ol>
<li><p>举一个不确定性产生式规则实例，并用附有信度的规则形式表示，进而PROLOG语言表示。</p>
<p>  题解：</p>
<p>  <img src="/images/python/image-20210702110710073.png" alt="题解"></p>
</li>
<li><p>举一个不确切性产生式规则实例，并用程度化规则形式表示，进而PROLOG语言表示。</p>
<p>  题解:</p>
<p>  <img src="/images/python/image-20210702110738282.png" alt="题解"></p>
</li>
<li><p>写一个程度化框架和一个程度化语义网络，并用PROLOG语言表示。</p>
<p>  题解：</p>
<p>  <img src="/images/python/image-20210702110802597.png" alt="题解"></p>
</li>
<li><p>试写出天气“热”、“温和”、“冷”这三个软语言值的相容函数。</p>
<p>  题解：</p>
<p>  <img src="/images/python/image-20210702110832873.png" alt="题解"></p>
</li>
<li><p>设有如下一组规则：<br>  r1: If E1Then E2(0.6)</p>
<pre><code>r2: If E2 and E3 Then E4(0.8)
r3: If E4 Then H(0.7)
r4: If E5 Then H(0.9)
且已知 CF(E1)＝0.5，CF(E3)＝0.6，CF(E5)＝0.4
用确定性理论求CF(H)。</code></pre>
<p>  题解：</p>
<p>  <img src="/images/python/image-20210702110900371.png" alt="题解"></p>
</li>
<li><p>写出例8-11中软语言值“低”和“高”的相容函数。</p>
<p><img src="/images/python/image-20210630221738639.png" alt="例8-11"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702110923576.png" alt="题解"></p>
</li>
</ol>
<h3 id="第九章-机器学习：符号学习与交互学习"><a href="#第九章-机器学习：符号学习与交互学习" class="headerlink" title="第九章 机器学习：符号学习与交互学习"></a>第九章 机器学习：符号学习与交互学习</h3><ol>
<li><p>通过计算条件熵，完成9.3.3节例子中根节点以下节点的选择，并验证原所得决策树是否最简。</p>
<p>题解：</p>
<p><img src="/images/python/image-20210702111011202.png" alt="题解"></p>
<p><img src="/images/python/image-20210702111035520.png" alt="题解"></p>
<p><img src="/images/python/image-20210702111052313.png" alt="题解"></p>
</li>
<li><p>完成9.4.2节中图9-19中其余动作Q’值的更新，并给出一个最优策略*。</p>
<p><img src="/images/python/image-20210630221502600.png" alt="图9-19"></p>
<p>题解：</p>
<p><img src="/images/python/image-20210702111128476.png" alt="题解"></p>
</li>
</ol>
<blockquote>
<p>在此感谢老王的辛勤付出，为我们摘录了题目！©老王</p>
</blockquote>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-30T13:49:05.000Z" title="2021/6/30 下午9:49:05">2021-06-30</time>发表</span><span class="level-item"><time dateTime="2021-06-30T14:00:42.672Z" title="2021/6/30 下午10:00:42">2021-06-30</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a></span><span class="level-item">22 分钟读完 (大约3354个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/06/30/%E7%AB%99%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B8%88%E7%9A%84%E8%A7%92%E5%BA%A6%E8%B0%88%E8%B0%88%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E7%9A%84%E6%96%B9%E6%B3%95/">站在数据分析师的角度谈谈对数据的处理方法</a></h1><div class="content"><p>淘宝卖家数据显示：</p>
<p>胸最大的是新疆妹子，国内内衣消费最多的SIZE是B；</p>
<p>其中75B销量最好，占比41.45%，其次是A，占比 25.26%；</p>
<p>各种颜色中，黑色最为畅销，因为百搭。</p>
<p>…………</p>
<p>这些早已应用在内衣生产、备货、销售等关键环节。</p>
<p>网易云音乐数据显示：</p>
<p>90后用户占比高达59%，其次是80后（12%）；</p>
<p>除了流行歌曲，用户最喜欢的风格竟是电音，其中又以广东用户对电音最为热爱；</p>
<p>最青睐民谣的省份是：甘肃&amp;陕西，最喜欢舞曲的是新疆朋友；</p>
<p>小众音乐主要聚集在北上广深；</p>
<p>…………</p>
<p>这些数据也服务于网易云音乐的个性化推荐系统</p>
<p>但数据分析的应用还远不止如此，利用数据分析的方法，我们还可以得到很多有意思的结论。</p>
<p>比如谷歌的数据分析可以预测一个地区即将爆发的流感，从而进行针对性的预防；淘宝可以根据你浏览和消费的数据进行分析，为你精准推荐商品；口碑极好的网易云音乐，通过其相似性算法，为不同的人量身定制每日歌单……</p>
<p>数据正在变得越来越常见，而数据分析的价值也越来越凸显。在大型互联网企业（比如谷歌、阿里、腾讯、等）每天将产生海量的数据；就算是初创的互联网公司，日志、用户、运营等数据量也不可小觑；而一大波传统企业，在普及智能终端的情况下，所产生的数据，也非同小可。那么一个比较完善的数据分析流程是什么样的呢？</p>
<h2 id="1-问题定义"><a href="#1-问题定义" class="headerlink" title="1.问题定义"></a>1.问题定义</h2><p>比较典型的场景是我们需要针对企业的数据进行分析，比如公司通常会有销售数据、用户数据、运营数据、产品生产数据……你需要从这些数据里获得哪些有用的信息，对策略的制定进行指导呢？又比如你需要做的是一份市场调研或者行业分析，那么你需要知道你需要获得关于这个行业的哪些信息。</p>
<p>首先你需要确定去分析的问题是什么？你想得出哪些结论？</p>
<p>比如某地区空气质量变化的趋势是什么？</p>
<p>王者荣耀玩家的用户画像是什么样的？经常消费的是那类人？</p>
<p>影响公司销售额增长的关键因素是什么？</p>
<p>生产环节中影响产能和质量的核心指标是什么？</p>
<p>如何对分析用户画像并进行精准营销？</p>
<p>如何基于历史数据预测未来某个阶段用户行为？</p>
<p>…………</p>
<p>这些问题可能来源于你已有的经验和知识。比如你已经知道每周的不同时间用户购买量不一样，那么你可以通过分析得出销量和时间的精确关系，从而精准备货。又比如你知道北京最近几年的空气质量是在变坏的，可能的因素是工厂排放、沙尘暴、居民排放、天气因素等，那么在定义问题的时候你就需要想清楚，需要针对哪些因素进行重点分析。</p>
<p>有些问题则并不清晰，比如在生产环节中，影响质量的核心指标是什么，是原材料？设备水平？工人水平？天气情况？某个环节工艺的复杂度？某项操作的重复次数？……这些可能并不明显，或者你是涉足新的领域，并没有非常专业的知识，那么你可能需要定义的问题就需要更加宽泛，涵盖更多的可能性。</p>
<p>问题的定义可能需要你去了解业务的核心知识，并从中获得一些可以帮助你进行分析的经验。从某种程度上说，这也是我们经常提到的数据思维。数据分析很多时候可以帮助你发现我们不容易发现的相关性，但对问题的精确定义，可以从很大程度上提升数据分析的效率。</p>
<p>如何更好地定义问题？</p>
<p>这就需要你在长期的训练中找到对数据的感觉，开始的时候你拿到特别大的数据，有非常多的字段，可能会很懵逼，到底应该从什么地方下手呢？</p>
<p>但如果有一些经验就会好很多。比如，你要研究影响跑步运动员速度的身体因素，那么我们可能会去研究运动员的身高、腿长、体重、甚至心率、血压、臂长，而不太会去研究运动员的腋毛长度，这是基于我们已有的知识。又比如我们要分析影响一个地方房价的因素，那么我们可能会有一些通用的常识，比如城市人口、地理位置、GDP、地价、物价水平，更深入的可能会有产业格局、文化状态、气候情况等等，但一般我们不会去研究城市的女孩长相，美女占比。</p>
<p>所以当你分析的问题多了之后，你就会有一些自己对数据的敏感度，从而养成用数据分析、用数据说话的习惯。这个时候你甚至可以基于一些数据，根据自己的经验做出初步的判断和预测（当然是不能取代完整样本的精准预测），这个时候，你就基本拥有数据思维了。</p>
<h2 id="2-数据获取"><a href="#2-数据获取" class="headerlink" title="2.数据获取"></a>2.数据获取</h2><p>有了具体的问题，你就需要获取相关的数据了。比如你要探究北京空气质量变化的趋势，你可能就需要收集北京最近几年的空气质量数据、天气数据，甚至工厂数据、气体排放数据、重要日程数据等等。如果你要分析影响公司销售的关键因素，你就需要调用公司的历史销售数据、用户画像数据、广告投放数据等。</p>
<p>数据的获取方式有多种。</p>
<p>一是公司的销售、用户数据，可以直接从企业数据库调取，所以你需要SQL技能去完成数据提取等的数据库管理工作。比如你可以根据你的需要提取2017年所有的销售数据、提取今年销量最大的50件商品的数据、提取上海、广东地区用户的消费数据……，SQL可以通过简单的命令帮你完成这些工作。</p>
<p>第二种是获取外部的公开数据集，一些科研机构、企业、政府会开放一些数据，你需要到特定的网站去下载这些数据。这些数据集通常比较完善、质量相对较高。当然这种方式也有一些缺陷，通常数据会发布的比较滞后，但通常因为客观性、权威性，仍然具有很大的价值。</p>
<p>第三种是编写网页爬虫，去收集互联网上的数据。比如你可以通过爬虫获取招聘网站某一职位的招聘信息，爬取租房网站上某城市的租房信息，爬取豆瓣评分评分最高的电影列表，获取知乎点赞排行、网易云音乐评论排行列表。基于互联网爬取的数据，你可以对某个行业、某种人群进行分析，这算是非常靠谱的市场调研、竞品分析的方式了。</p>
<p>当然，比较BUG的一点是，你通常并不能够获得所有你需要的数据，这对你的分析结果是有一定影响的，但不不影响的是，你通过有限的可获取的数据，提取更多有用的信息。</p>
<h2 id="3-数据预处理"><a href="#3-数据预处理" class="headerlink" title="3.数据预处理"></a>3.数据预处理</h2><p>现实世界中数据大体上都是不完整，不一致的脏数据，无法直接进行数据分析，或分析结果差强人意。数据预处理有多种方法：数据清理，数据集成，数据变换，数据归约等。把这些影响分析的数据处理好，才能获得更加精确地分析结果。</p>
<p>比如空气质量的数据，其中有很多天的数据由于设备的原因是没有监测到的，有一些数据是记录重复的，还有一些数据是设备故障时监测无效的。</p>
<p>那么我们需要用相应的方法去处理，比如残缺数据，我们是直接去掉这条数据，还是用临近的值去补全，这些都是需要考虑的问题。</p>
<p>当然在这里我们还可能会有数据的分组、基本描述统计量的计算、基本统计图形的绘制、数据取值的转换、数据的正态化处理等，能够帮助我们掌握数据的分布特征，是进一步深入分析和建模的基础。</p>
<h2 id="4-数据分析与建模"><a href="#4-数据分析与建模" class="headerlink" title="4.数据分析与建模"></a>4.数据分析与建模</h2><p>在这个部分需要了解基本的数据分析方法、数据挖掘算法，了解不同方法适用的场景和适合的问题。分析时应切忌滥用和误用统计分析方法。滥用和误用统计分析方法主要是由于对方法能解决哪类问题、方法适用的前提、方法对数据的要求不清等原因造成的。</p>
<p>另外，选择几种统计分析方法对数据进行探索性的反复分析也是极为重要的。每一种统计分析方法都有自己的特点和局限，因此，一般需要选择几种方法反复印证分析，仅依据一种分析方法的结果就断然下结论是不科学的。</p>
<p>比如你发现在一定条件下，销量和价格是正比关系，那么你可以据此建立一个线性回归模型，你发现价格和广告是非线性关系，你可以先建立一个逻辑回归模型来进行分析。</p>
<p>一般情况下，回归分析的方法可以满足很大一部分的分析需求，当然你也可以了解一些数据挖掘的算法、特征提取的方法来优化自己的模型，获得更好地结果。</p>
<h2 id="5-数据可视化及数据报告的撰写"><a href="#5-数据可视化及数据报告的撰写" class="headerlink" title="5.数据可视化及数据报告的撰写"></a>5.数据可视化及数据报告的撰写</h2><p>分析结果最直接的结果是统计量的描述和统计量的展示。</p>
<p>比如我们通过数据的分布发现数据分析工资最高的5个城市，目前各种语言的流行度排行榜，近几年北京空气质量的变化趋势，避孕套消费的地区分布……这些都是我们通过简单数据分析与可视化就可以展现出的结果。</p>
<p>另外一些则需要深入探究内部的关系，比如影响产品质量最关键的几个指标，你需要对不同指标与产品质量进行相关性分析之后才能得出正确结论。又比如你需要预测未来某个时间段的产品销量，则需要你对历史数据进行建模和分析，才能对未来的情况有更精准的预测。</p>
<p>数据分析报告不仅是分析结果的直接呈现，还是对相关情况的一个全面的认识。我们经常看到一些行业分析报告从不同角度、深入浅析地剖析各种关系。所以你需要一个讲故事的逻辑，如何从一个宏观的问题，深入、细化到问题内部的方方面面，得出令人信服的结果，这需要从实践中不断训练。</p>
<p>数据分析的一般流程总的来说就是这几个步骤：问题定义、数据获取、数据预处理、数据分析与建模、数据可视化与数据报告的撰写。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-22T09:12:42.000Z" title="2021/6/22 下午5:12:42">2021-06-22</time>发表</span><span class="level-item"><time dateTime="2021-06-22T09:16:35.503Z" title="2021/6/22 下午5:16:35">2021-06-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">33 分钟读完 (大约4947个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/06/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-%E4%BA%94-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">操作系统课程设计(五)-内存管理</a></h1><div class="content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>又到了 一年一度期末课设的时候，距离考试还有12天的时间，此时胡小宁还没有复习(准确的说是学习)之前的课程，所以在这个平平无奇的周二，胡小宁就要开始做课设了！</p>
<h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><p>（1） 通过对 Windows xp/7“任务管理器”、“计算机管理”、“我的电脑”属性、“系统信息”、“系统监视器”等程序的应用，学习如何察看和调整 Windows 的内存性能，加深对操作系统内存管理、虚拟存储管理等理论知识的理解。</p>
<p>（2） 了解 Windows xp/7 的内存结构和虚拟内存的管理，理解进程的虚拟内存空间和物理内存的映射关系。</p>
<h2 id="总体设计"><a href="#总体设计" class="headerlink" title="总体设计"></a>总体设计</h2><h3 id="背景知识"><a href="#背景知识" class="headerlink" title="背景知识"></a>背景知识</h3><p>耗尽内存是 Windows 系统中最常见的问题之一。当系统耗尽内存时，所有进程对内存的总需求超出了系统的物理内存总量。随后，Windows 必须借助它的虚拟内存来维持系统和进程的运行。虚拟内存机制是 Windows 操作系统的重要组成部分，但它的速度比物理内存慢得多，因此，应该尽量避免耗尽物理内存资源，以免导致性能下降。解决内存不足问题的一个有效的方法就是添加更多的内存。但是，一旦提供了更多的内存，Windows 很可以会立即“吞食”。而事实上，添加更多的内存并非总是可行的，也可能只是推迟了实际问题的发生。因此，应该相信，优化所拥有的内存是非常关键的。</p>
<p>（1） 分页过程</p>
<p>当 Windows 求助于硬盘以获得虚拟内存时，这个过程被称为分页 (paging) 。分页就是将信息从主内存移动到磁盘进行临时存储的过程。当进程需要已经交换到硬盘上的代码或数据时，系统要将数据送回物理内存，并在必要时将其他信息传输到硬盘上，而硬盘与物理内存在性能上的差异极大。例如，硬盘的访问时间通常大约为 4-10 毫秒，而物理内存的访问时间为 60us，甚至更快。</p>
<p>（2） 内存共享</p>
<p>应用程序经常需要彼此通信和共享信息。为了提供这种能力，Windows 必须允许访问某些内存空间而不危及它和其他应用程序的安全性和完整性。从性能的角度来看，共享内存的能力大大减少了应用程序使用的内存数量。</p>
<p>（3） 未分页合并内存与分页合并内存</p>
<p>Windows 决定了系统内存组件哪些可以以及哪些不可以交换到磁盘上。显然，不应该将某些代码 (例如内核) 交换出主内存。因此，Windows 将系统使用的内存进一步划分为未分页合并内存和分页合并内存。分页合并内存是存储迟早需要的可分页代码或数据的内存部分。虽然可以将分页合并内存中的任何系统进程交换到磁盘上，但是它临时存储在主内存的这一部分，以防系统立刻需要它。在将系统进程交换到磁盘上之前，Windows 会交换其他进程。</p>
<p>未分页合并内存包含必须驻留在内存中的占用代码或数据。这种结构类似于早期的 MS-DOS</p>
<p>程序使用的结构，在 MS-DOS 中，相对较小的终止并驻留程序 (Terminate and Stay Resident，TSR) 在启动时加载到内存中。这些程序在系统重新启动或关闭之前一直驻留在内存的特定部分中。</p>
<p>（4）分页文件最重要的配置参数是大小。无论系统中有多少个分页文件，如果它们的大小不合适，那么系统就可能遇到性能问题。</p>
<p>如果初始值太小，那么系统可能必须扩大分页文件，以补偿额外的分页活动。当系统临时增加分页文件时，它必须在处理分页请求的同时创建新的空间。这时，系统将出现大量的页面错误，甚至可能出现系统失效。当系统必须在进程的工作区外部 (在物理内存或分页文件中的其他位置) 查找信息时，就会出现页面错误。当系统缺乏存储资源 (物理内存及虚拟内存) 来满足使用需求，从而遇到过多的分页时，就会出现系统失效。系统将花更多的时间来分页而不是执行应用程序。当系统失效时，Memory：Pages/see 计数器将持续高于每秒 100 页。系统失效严重降低了系统的性能。此外，动态扩展分页文件将导致碎片化。分页文件将散布在整个磁盘上而不是在启动时的连续空间中创建，从而增加了系统的开销，并导致系统性能降低。因此，应该尽量避免系统增加分页文件的大小。</p>
<h3 id="设计步骤"><a href="#设计步骤" class="headerlink" title="设计步骤"></a>设计步骤</h3><p>（1）观察和调整 Windows XP/7 的内存性能。</p>
<p>步骤 1：阅读“背景知识”，请回答：</p>
<ol>
<li><p>什么是“分页过程”？ </p>
</li>
<li><p>什么是“内存共享”？</p>
</li>
<li><p>什么是“未分页合并内存”和“分页合并内存”？</p>
</li>
</ol>
<p>Windows xp 中，未分页合并内存的最大限制是多少？</p>
<ol start="4">
<li>Windows xp 分页文件默认设置的最小容量和最大容量是多少？</li>
</ol>
<p>步骤 2：登录进入 Windows xp。</p>
<p>步骤 3：查看包含多个实例的应用程序的内存需求。</p>
<ol>
<li><p>启动想要监视的应用程序，例如 Word。</p>
</li>
<li><p>右键单击任务栏以启动“任务管理器”。</p>
</li>
<li><p>在“Windows 任务管理器”对话框中选定“进程”选项卡。</p>
</li>
<li><p>向下滚动在系统上运行的进程列表，查找想要监视的应用程序。</p>
</li>
</ol>
<p>请在表5-1中记录：</p>
<p>“内存使用”列显示了该应用程序的一个实例正在使用的内存数量。</p>
<ol start="5">
<li>启动应用程序的另一个实例并观察它的内存需求。</li>
</ol>
<p>请描述使用第二个实例占用的内存与使用第一个实例时的内存对比情况。</p>
<p>步骤 4：未分页合并内存。</p>
<p>估算未分页合并内存大小的最简单方法是使用“任务管理器”。未分页合并内存的估计值显示在“任务管理器”的“性能”选项卡的“核心内存”部分。见5.4</p>
<p>还可以使用“任务管理器”查看一个独立进程正在使用的未分页合并内存数量和分页合并内存数量。操作步骤如下：</p>
<ol>
<li><p>单击“Windows 任务管理器”的“进程”选项卡，然后从“查看”菜单中选择“选择列”命令，显示“进程”选项卡的可查看选项。</p>
</li>
<li><p>在“选择列”对话框中，选定“页面缓冲池”选项和“非页面缓冲池”选项旁边的复选框，然后单击“确定”按钮。</p>
</li>
</ol>
<p>返回 Windows Xp“任务管理器”的“进程”选项卡时，将看到其中增加显示了各个进程占用的分页合并内存数量和未分页合并内存数量。</p>
<p>仍以刚才打开观察的应用程序 (例如 Word) 为例，请在表5-2中记录：</p>
<p>从性能的角度来看，未分页合并内存越多，可以加载到这个空间的数据就越多。拥有的物理内存越多，未分页合并内存就越多。但未分页合并内存被限制为 256MB，因此添加超出这个限制的内存对未分页合并内存没有影响。</p>
<p>步骤 5：提高分页性能。</p>
<p>在 Windows xp 的安装过程中，将使用连续的磁盘空间自动创建分页文件(pagefile.sys) 。用户可以事先监视变化的内存需求并正确配置分页文件，使得当系统必须借助于分页时的性能达到最高。</p>
<p>虽然分页文件一般都放在系统分区的根目录下面，但这并不总是该文件的最佳位置。要想从分页获得最佳性能，应该首先检查系统的磁盘子系统的配置，以了解它是否有多个物理硬盘驱动器。</p>
<ol>
<li><p>在“开始”菜单中单击“设置” – “控制面板”命令，双击“管理工具”图标，再双击“计算机管理”图标。</p>
</li>
<li><p>在“计算机管理”窗口的左格选择“磁盘管理”管理单元来查看系统的磁盘配置。</p>
</li>
</ol>
<p>请在表5-3中记录：</p>
<p>如果系统只有一个硬盘，那么建议应该尽可能为系统配置额外的驱动器。这是因为：Windows</p>
<p>xp 最多可以支持在多个驱动器上分布的 16 个独立的分页文件。为系统配置多个分页文件可以实现对不同磁盘 I/O 请求的并行处理，这将大大提高 I/O 请求的分页文件性能。</p>
<p>步骤 6：计算分页文件的大小。</p>
<p>要想更改分页文件的位置或大小配置参数，可按以下步骤进行：</p>
<ol>
<li><p>右键单击桌面上的“我的电脑” （Win7 为计算机）图标并选定“属性” （Win7 为高级系统设置） 。</p>
</li>
<li><p>在“高级”选项卡上单击“性能选项”按钮。</p>
</li>
<li><p>单击对话框中的“虚拟内存”区域中的“更改”按钮。</p>
</li>
</ol>
<p>请记录：见5.4</p>
<ol start="4">
<li><p>要想将另一个分页文件添加到现有配置，在“虚拟内存”对话框中选定一个还没有分页文件的驱动器，然后指定分页文件的初始值和最大值 (以兆字节表示) ，单击“设置”，然后单击“确定”。</p>
</li>
<li><p>要想更改现有分页文件的最大值和最小值，可选定分页文件所在的驱动器。然后指定分页文件的初始值和最大值，单击“设置”按钮，然后单击“确定”按钮。</p>
</li>
<li><p>在“性能选项”对话框中单击“确定”按钮。</p>
</li>
<li><p>单击“确定”按钮以关闭“系统特性”对话框。</p>
</li>
</ol>
<p>（2）了解和检测进程的虚拟内存空间。</p>
<p>步骤 1：创建一个“Win32 Consol Application”工程，然后拷贝清单 5-1 中的程序，编译成</p>
<p>可执行文件。</p>
<p>步骤 2：在 VC 的工具栏单击“Execute Program”(执行程序) 按钮，或者按 Ctrl + F5 键，或者在“命令提示符”窗口运行步骤 1 中生成的可执行文件。</p>
<p>步骤 3：根据运行结果，回答下列问题。见5.4</p>
<p>按 committed、reserved、free 等三种虚拟地址空间分别记录实验数据。其中“描述”是指对该组数据的简单描述，例如，对下列一组数据：</p>
<p>00010000 – 00012000 &lt;8.00KB&gt;  Committed,  READWRITE,  Private</p>
<p>可描述为：具有 READWRITE 权限的已调配私有内存区。</p>
<p>将系统当前的自由区 (free) 虚拟地址空间按表5-4格式记录。</p>
<p>将系统当前的已调配区 (committed) 虚拟地址空间按表5-5格式记录。</p>
<p>将系统当前的保留区 (reserved) 虚拟地址空间按表5-6格式记录。</p>
<h2 id="详细设计"><a href="#详细设计" class="headerlink" title="详细设计"></a>详细设计</h2><p>（1）了解和检测进程的虚拟内存空间</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 工程 vmwalker</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;shlwapi.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iomanip&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> comment(lib, <span class="hljs-meta-string">&quot;Shlwapi.lib&quot;</span>)</span><br><span class="hljs-comment">// 以可读方式对用户显示保护的辅助方法。</span><br><span class="hljs-comment">// 保护标记表示允许应用程序对内存进行访问的类型</span><br><span class="hljs-comment">// 以及操作系统强制访问的类型</span><br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">TestSet</span><span class="hljs-params">(DWORD dwTarget, DWORD dwMask)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> ((dwTarget &amp;dwMask) == dwMask) ;&#125;<br><span class="hljs-meta"># <span class="hljs-meta-keyword">define</span> SHOWMASK(dwTarget, type) \</span><br><span class="hljs-keyword">if</span> (TestSet(dwTarget, PAGE_#<span class="hljs-meta">#type) ) \</span><br>&#123;<span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; <span class="hljs-meta">#type; &#125;</span><br><span class="hljs-keyword">void</span> ShowProtection(DWORD dwTarget)<br>&#123;<br>    SHOWMASK(dwTarget, READONLY) ;<br>    SHOWMASK(dwTarget, GUARD) ;<br>    SHOWMASK(dwTarget, NOCACHE) ;<br>    SHOWMASK(dwTarget, READWRITE) ;<br>    SHOWMASK(dwTarget, WRITECOPY) ;<br>    SHOWMASK(dwTarget, EXECUTE) ;<br>    SHOWMASK(dwTarget, EXECUTE_READ) ;<br>    SHOWMASK(dwTarget, EXECUTE_READWRITE) ;<br>    SHOWMASK(dwTarget, EXECUTE_WRITECOPY) ;<br>    SHOWMASK(dwTarget, NOACCESS) ;&#125;<br><span class="hljs-comment">// 遍历整个虚拟内存并对用户显示其属性的工作程序的方法</span><br><span class="hljs-keyword">void</span> WalkVM(HANDLE hProcess)<br>&#123;<br><span class="hljs-comment">// 首先，获得系统信息</span><br>    SYSTEM_INFO si;<br>    :: ZeroMemory(&amp;si, <span class="hljs-keyword">sizeof</span>(si) ) ;<br>    :: GetSystemInfo(&amp;si) ;<br><span class="hljs-comment">// 分配要存放信息的缓冲区</span><br>    MEMORY_BASIC_INFORMATION mbi;<br>    :: ZeroMemory(&amp;mbi, <span class="hljs-keyword">sizeof</span>(mbi) ) ;<br><span class="hljs-comment">// 循环整个应用程序地址空间</span><br>    LPCVOID pBlock = (LPVOID) si.lpMinimumApplicationAddress;<br>    <span class="hljs-keyword">while</span> (pBlock &lt; si.lpMaximumApplicationAddress)<br>    &#123;<span class="hljs-comment">// 获得下一个虚拟内存块的信息</span><br>        <span class="hljs-keyword">if</span> (:: VirtualQueryEx(<br>                    hProcess,            <span class="hljs-comment">// 相关的进程</span><br>                    pBlock, <span class="hljs-comment">// 开始位置</span><br>                    &amp;mbi, <span class="hljs-comment">// 缓冲区</span><br>                    <span class="hljs-keyword">sizeof</span>(mbi))==<span class="hljs-keyword">sizeof</span>(mbi) )   <span class="hljs-comment">// 大小的确认</span><br>        &#123;<span class="hljs-comment">// 计算块的结尾及其大小</span><br>            LPCVOID pEnd = (PBYTE) pBlock + mbi.RegionSize;<br>            TCHAR szSize[MAX_PATH];<br>            :: StrFormatByteSize(mbi.RegionSize, szSize, MAX_PATH) ;<br>            <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span>.fill (<span class="hljs-string">&#x27;0&#x27;</span>) ;<br>            <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span>&lt;&lt; <span class="hljs-built_in">std</span> :: hex &lt;&lt; <span class="hljs-built_in">std</span> :: setw(<span class="hljs-number">8</span>) &lt;&lt; (DWORD) pBlock &lt;&lt; <span class="hljs-string">&quot;-&quot;</span><br>                    &lt;&lt; <span class="hljs-built_in">std</span> :: hex &lt;&lt; <span class="hljs-built_in">std</span> :: setw(<span class="hljs-number">8</span>) &lt;&lt; (DWORD) pEnd<br>                    &lt;&lt; (:: <span class="hljs-built_in">strlen</span>(szSize)==<span class="hljs-number">7</span>? <span class="hljs-string">&quot; (&quot;</span> : <span class="hljs-string">&quot; (&quot;</span>) &lt;&lt; szSize&lt;&lt; <span class="hljs-string">&quot;) &quot;</span> ;<br>            <span class="hljs-keyword">switch</span>(mbi.State)<br>            &#123;<br>            <span class="hljs-keyword">case</span> MEM_COMMIT :<br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Committed&quot;</span> ; <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> MEM_FREE :<br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Free&quot;</span> ; <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> MEM_RESERVE : <br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Reserved&quot;</span> ; <span class="hljs-keyword">break</span>; &#125;<br>            <span class="hljs-keyword">if</span>(mbi.Protect==<span class="hljs-number">0</span> &amp;&amp; mbi.State!=MEM_FREE)<br>            &#123;<br>                mbi.Protect=PAGE_READONLY; &#125;<br>            ShowProtection(mbi.Protect);<br>            <span class="hljs-keyword">switch</span>(mbi.Type)<br>            &#123;<br>            <span class="hljs-keyword">case</span> MEM_IMAGE :<br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, Image&quot;</span> ; <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> MEM_MAPPED:<br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, Mapped&quot;</span>; <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> MEM_PRIVATE :<br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, Private&quot;</span> ; <span class="hljs-keyword">break</span>;&#125;<br><span class="hljs-comment">// 检验可执行的影像</span><br>            TCHAR szFilename [MAX_PATH] ;<br>            <span class="hljs-keyword">if</span> (:: GetModuleFileName (<br>                        (HMODULE) pBlock,    <span class="hljs-comment">// 实际虚拟内存的模块句柄</span><br>                        szFilename, <span class="hljs-comment">//完全指定的文件名称</span><br>                        MAX_PATH)&gt;<span class="hljs-number">0</span>) <span class="hljs-comment">//实际使用的缓冲区大小</span><br>            &#123;<br><span class="hljs-comment">// 除去路径并显示</span><br>                :: PathStripPath(szFilename) ;<br>                <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;, Module: &quot;</span> &lt;&lt; szFilename; &#125;<br>            <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">endl</span>;<br><span class="hljs-comment">// 移动块指针以获得下一下个块</span><br>            pBlock = pEnd; &#125; &#125; &#125;<br><span class="hljs-keyword">void</span> ShowVirtualMemory()<br>&#123;<br><span class="hljs-comment">// 首先，让我们获得系统信息</span><br>    SYSTEM_INFO si;<br>    :: ZeroMemory(&amp;si, <span class="hljs-keyword">sizeof</span>(si) ) ;<br>    :: GetSystemInfo(&amp;si) ;<br><span class="hljs-comment">// 使用外壳辅助程序对一些尺寸进行格式化</span><br>    TCHAR szPageSize[MAX_PATH];<br>    ::StrFormatByteSize(si.dwPageSize, szPageSize, MAX_PATH) ;<br>    <span class="hljs-number">26</span><br>    DWORD dwMemSize = (DWORD)si.lpMaximumApplicationAddress -(DWORD) si.lpMinimumApplicationAddress;<br>    TCHAR szMemSize [MAX_PATH] ;<br>    :: StrFormatByteSize(dwMemSize, szMemSize, MAX_PATH) ;<br><span class="hljs-comment">// 将内存信息显示出来</span><br>    <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Virtual memory page size: &quot;</span> &lt;&lt; szPageSize &lt;&lt; <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span>.fill (<span class="hljs-string">&#x27;0&#x27;</span>) ;<br>    <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Minimum application address: 0x&quot;</span>&lt;&lt; <span class="hljs-built_in">std</span> :: hex &lt;&lt; <span class="hljs-built_in">std</span> :: setw(<span class="hljs-number">8</span>)<br>                &lt;&lt; (DWORD) si.lpMinimumApplicationAddress&lt;&lt; <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Maximum application address: 0x&quot;</span>&lt;&lt; <span class="hljs-built_in">std</span> :: hex &lt;&lt; <span class="hljs-built_in">std</span> :: setw(<span class="hljs-number">8</span>)<br>                &lt;&lt; (DWORD) si.lpMaximumApplicationAddress&lt;&lt; <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Total available virtual memory: &quot;</span>&lt;&lt; szMemSize &lt;&lt; <span class="hljs-built_in">std</span> :: <span class="hljs-built_in">endl</span> ; &#125;<br><span class="hljs-keyword">void</span> main()<br>&#123;<br><span class="hljs-comment">//显示虚拟内存的基本信息</span><br>    ShowVirtualMemory();<br><span class="hljs-comment">// 遍历当前进程的虚拟内存</span><br>    ::WalkVM(::GetCurrentProcess()); &#125;<br></code></pre></td></tr></table></figure>


<h2 id="5-4实验结果和分析"><a href="#5-4实验结果和分析" class="headerlink" title="5.4实验结果和分析"></a>5.4实验结果和分析</h2><p>（1）观察和调整 Windows XP/7 的内存性能。</p>
<p><strong>步骤1**</strong>：**</p>
<ol>
<li><p>分页过程：当 Windows 求助于硬盘以获得虚拟内存时，这个过程被称为分页。分页就是将信息从主内存移动到磁盘进行临时存储的过程。</p>
</li>
<li><p>内存共享：应用程序需要彼此通信和共享信息。</p>
</li>
<li><p>未分页合并内存：包含必须驻留在内存中的占用代码或数据。</p>
</li>
</ol>
<p>分页合并内存：存储迟早需要的可分页代码或数据的内存部分。</p>
<p>Windows xp 中，未分页合并内存的最大限制是：256MB (在 Windows NT 4 中的限制为 128MB) </p>
<p>4） Windows xp 使用内存容量的1.5倍作为分页文件的最小容量，这个最小容量的两倍作为最大容量。</p>
<p>​     <strong>步骤3**</strong>：**</p>
<p>表5-1 应用内存需求实验记录</p>
<table>
<thead>
<tr>
<th>映像名称</th>
<th>PID</th>
<th>CPU</th>
<th>时间</th>
<th>内存使用</th>
</tr>
</thead>
<tbody><tr>
<td>Chrome</td>
<td>11704</td>
<td>00</td>
<td>0:01:07</td>
<td>10,844k</td>
</tr>
</tbody></table>
<p>​     <strong>步骤4**</strong>：**</p>
<p>​     总数 ：248MB     分页数：179MB    未分页 ：69MB</p>
<p>表5-2 应用内存使用实验记录</p>
<table>
<thead>
<tr>
<th>映像名称</th>
<th>PID</th>
<th>内存使用</th>
<th>页面缓冲池</th>
<th>非页面缓冲池</th>
</tr>
</thead>
<tbody><tr>
<td>Chrome</td>
<td>11704</td>
<td>00</td>
<td>399k</td>
<td>10k</td>
</tr>
</tbody></table>
<p>​     <strong>步骤5**</strong>：**</p>
<p>表5-3 磁盘配置实验记录</p>
<table>
<thead>
<tr>
<th>卷</th>
<th>布局</th>
<th>类型</th>
<th>文件系统</th>
<th>容量</th>
<th>状态</th>
</tr>
</thead>
<tbody><tr>
<td>（C：）</td>
<td>简单</td>
<td>基本</td>
<td>NTFS</td>
<td>80.00GB</td>
<td>状态良好（系统，启动，页面文件，活动，故障转储，主分区）</td>
</tr>
<tr>
<td>（D：）</td>
<td>简单</td>
<td>基本</td>
<td>NTFS</td>
<td>15.00GB</td>
<td>良好（逻辑驱动器）</td>
</tr>
<tr>
<td>（E：）</td>
<td>简单</td>
<td>基本</td>
<td>NTFS</td>
<td>15.00GB</td>
<td>良好（逻辑驱动器）</td>
</tr>
<tr>
<td>（F：）</td>
<td>简单</td>
<td>基本</td>
<td>FAT32</td>
<td>49.99GB</td>
<td>良好（逻辑驱动器）</td>
</tr>
</tbody></table>
<p>所选驱动器的页面文件大小：</p>
<p>1_驱动器：C:  可用空间：55653MB  初始大小(MB)：无  最大值(MB)：无</p>
<p>2_驱动器：D:  可用空间：14611MB  初始大小(MB)：无  最大值(MB)：无</p>
<p>3_驱动器：E:   可用空间：15260MB  初始大小(MB)：无   最大值(MB)：无</p>
<p>4_驱动器：F:   可用空间：14110MB  初始大小(MB)：无   最大值(MB)：无</p>
<p>5_所有驱动器页面文件大小的总数：</p>
<p>允许的最小值：16MB     推荐：5266MB    当前已分配：3511MB</p>
<p>（2）了解和检测进程的虚拟内存空间。</p>
<p><strong>步骤3**</strong>：**</p>
<p>虚拟内存每页容量为：4.00KB  最小应用地址：0x00010000</p>
<p>最大应用地址：0x7ffeffff    当前可供应用程序使用的内存空间为：1.99GB</p>
<p>当前计算机的实际内存大小为：4.00GB</p>
<p>理论上每个 Windows 应用程序可以独占的最大存储空间是：4.00GB</p>
<p>表5-4 自由区虚拟地址空间实验记录</p>
<table>
<thead>
<tr>
<th>地址</th>
<th>大小</th>
<th>虚拟地址空间类型</th>
<th>访问权限</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>00134000-00140000</td>
<td>48.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>00141000-00150000</td>
<td>60.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>001b7000-001c0000</td>
<td>36.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>00388000-00390000</td>
<td>32.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>00391000-003a0000</td>
<td>60.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>003a1000-003b0000</td>
<td>60.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>003b7000-003c0000</td>
<td>36.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>003c2000-00400000</td>
<td>248KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>00485000-00520000</td>
<td>620KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>00631000-00640000</td>
<td>60.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>01240000-01310000</td>
<td>832KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>01717000-73f10000</td>
<td>1.78GB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>770d7000-77130000</td>
<td>356KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>77131000-7f6f0000</td>
<td>133MB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>7f7f0000-7ffa0000</td>
<td>7.68MB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>7ffd3000-7ffd7000</td>
<td>16.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
<tr>
<td>7ffd8000-7ffdf000</td>
<td>28.0KB</td>
<td>Free</td>
<td>NOACCESS</td>
<td>具有NOACCESS权限的内存区</td>
</tr>
</tbody></table>
<p>表5-5已调配区虚拟地址空间实验记录</p>
<table>
<thead>
<tr>
<th>地址</th>
<th>大小</th>
<th>虚拟地址空间类型</th>
<th>访问权限</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>00010000-00020000</td>
<td>64.0KB</td>
<td>Committed</td>
<td>READWRITE</td>
<td>具有READWRITE权限的已调配Mapped内存区</td>
</tr>
<tr>
<td>00020000-00030000</td>
<td>64.0KB</td>
<td>Committed</td>
<td>READWRITE</td>
<td>具有READWRITE权限的已调配Mapped内存区</td>
</tr>
<tr>
<td>0012d000-0012e000</td>
<td>4.00KB</td>
<td>Committed</td>
<td>READWRITE</td>
<td>具有READWRITE权限的已调配私有内存区</td>
</tr>
<tr>
<td>0012e000-00130000</td>
<td>8.00KB</td>
<td>Committed</td>
<td>READWRITE</td>
<td>具有READWRITE权限的已调配Image内存区</td>
</tr>
<tr>
<td>00130000-00134000</td>
<td>16.0KB</td>
<td>Committed</td>
<td>READWRITE</td>
<td>具有READWRITE权限的已调配私有内存区</td>
</tr>
</tbody></table>
<p>表5-6保留区虚拟地址空间实验记录</p>
<table>
<thead>
<tr>
<th>地址</th>
<th>大小</th>
<th>虚拟地址空间类型</th>
<th>访问权限</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>00030000-0012d000</td>
<td>0.98MB</td>
<td>Reserved</td>
<td>READONLY</td>
<td>具有READONLY权限的已调配私有内存区</td>
</tr>
<tr>
<td>001c7000-00280000</td>
<td>740KB</td>
<td>Reserved</td>
<td>READONLY</td>
<td>具有READONLY权限的已调配私有内存区</td>
</tr>
<tr>
<td>00283000-00288000</td>
<td>20KB</td>
<td>Reserved</td>
<td>READONLY</td>
<td>具有READONLY权限的已调配私有内存区</td>
</tr>
<tr>
<td>00333000-00340000</td>
<td>52KB</td>
<td>Reserved</td>
<td>READONLY</td>
<td>具有READONLY权限的已调配Mapped内存区</td>
</tr>
<tr>
<td>0065f000-00740000</td>
<td>900KB</td>
<td>Reserved</td>
<td>READONLY</td>
<td>具有READONLY权限的已调配Mapped内存区</td>
</tr>
</tbody></table>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-22T06:28:20.000Z" title="2021/6/22 下午2:28:20">2021-06-22</time>发表</span><span class="level-item"><time dateTime="2021-06-22T08:52:29.614Z" title="2021/6/22 下午4:52:29">2021-06-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">15 分钟读完 (大约2318个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/06/22/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95%E7%9A%84%E6%A8%A1%E6%8B%9F%E4%B8%8E%E5%AE%9E%E7%8E%B0/">银行家算法的模拟与实现</a></h1><div class="content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>在这漫长的人生旅途中，我们总会遇到荆棘，难以逾越。有人选择放弃，有人忍痛前行。虽然两者并无高下之分，但我还是希望自己能够选择后者，无畏艰险，至死不渝。</p>
<h3 id="银行家算法的模拟与实现"><a href="#银行家算法的模拟与实现" class="headerlink" title="银行家算法的模拟与实现"></a>银行家算法的模拟与实现</h3><p>(1) 进一步理解进程的并发执行。<br>(2) 加强对进程死锁的理解，理解安全状态与不安全状态的概念。<br>(3) 掌握使用银行家算法避免死锁问题。</p>
<ol>
<li><p>基本概念</p>
<ul>
<li>死锁：多个进程在执行过程中，因为竞争资源会造成相互等待的局面。如果没有外力作用，这些进程将永远无法向前推进。此时称系统处于死锁状态或者系统产生了死锁。</li>
<li>安全序列：系统按某种顺序并发进程，并使它们都能达到获得最大资源而顺序完成的序列为安全序列。</li>
<li>安全状态：能找到安全序列的状态称为安全状态，安全状态不会导致死锁。</li>
<li>不安全状态：在当前状态下不存在安全序列，则系统处于不安全状态。</li>
</ul>
</li>
<li><p>银行家算法</p>
<p>银行家算法顾名思义是来源于银行的借贷业务，一定数量的本金要满足多个客户的借贷周转，为了防止银行家资金无法周转而倒闭，对每一笔贷款，必须考察其是否能限期归还。在操作系统中研究资源分配策略时也有类似问题，系统中有限的资源要供多个进程使用，必须保证得到的资源的进程能在有限的时间内归还资源，以供其它进程使用资源。如果资源分配不当，就会发生进程循环等待资源，则进程都无法继续执行下去的死锁现象。</p>
</li>
<li><p>当一进程提出资源申请时，银行家算法执行下列步骤以决定是否向其分配资源：<br>1）检查该进程所需要的资源是否已超过它所宣布的最大值。<br>2）检查系统当前是否有足够资源满足该进程的请求。<br>3）系统试探着将资源分配给该进程，得到一个新状态。<br>4）执行安全性算法，若该新状态是安全的，则分配完成；若新状态是不安全的，则恢复原状态，阻塞该进程。</p>
</li>
<li><p>本实验的内容是要通过编写和调试一个模拟系统动态分配资源的银行家算法程序，有效地避免死锁发生。具体要求如下：<br>（1） 初始化时让系统拥有一定的资源；<br>（2） 用键盘输入的方式允许进程动态申请资源；<br>（3） 如果试探分配后系统处于安全状态，则修改系统的资源分配情况，正式分配资源；<br>（4） 如果试探分配后系统处于不安全状态，则提示不能满足请求，恢复原状态并阻塞该进程。</p>
</li>
</ol>
<h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><p><strong>进程个数n</strong><br><strong>资源类数m</strong><br><strong>可利用资源向量Available</strong><br>含有m个元素的数组，其中的每一个元素代表一类可利用的资源数目。如果Available[j]=K，则表示系统中现有Rj类资源K个。<br><strong>最大需求矩阵Max</strong><br>n×m的矩阵，它定义了系统中n个进程中的每一个进程对m类资源的最大需求。如果Max[i,j]=K，则表示进程i需要Rj类资源的最大数目为K。<br><strong>分配矩阵Allocation</strong><br>n×m的矩阵，它定义了系统中每一类资源当前已分配给每一进程的资源数。如果Allocation[i,j]=K，则表示进程i当前已分得Rj类资源的 数目为K。<br><strong>需求矩阵Need</strong><br>n×m的矩阵，用以表示每一个进程尚需的各类资源数。如果Need[i,j]=K，则表示进程i还需要Rj类资源K个，方能完成其任务。<br>Need[i,j]=Max[i,j]-Allocation[i,j]</p>
<h3 id="安全检查算法"><a href="#安全检查算法" class="headerlink" title="安全检查算法"></a>安全检查算法</h3><ol>
<li>设置两个工作向量<br>Work 记录系统当前可用资源量，初值为Available;<br>finish 记录所有进程是否已被执行, 初值为长度为n，值均为False的向量。</li>
<li>从进程集合中找到一个满足下述条件的进程，<br>finish == False;<br>Need &lt;= Work;<br>如找到，执行3；否则，执行4。</li>
<li>假设进程获得资源，可顺利执行，直至完成，从而释放资源。<br>Work += Allocation;<br>Finish=True;<br>执行2</li>
<li>如所有的进程finish= True，则表示安全；否则系统不安全。</li>
</ol>
<h3 id="算法流程图"><a href="#算法流程图" class="headerlink" title="算法流程图"></a>算法流程图</h3><p><img src="/images/OS/banker_flush_chart.png" alt="图1"></p>
<h3 id="具体设计"><a href="#具体设计" class="headerlink" title="具体设计"></a>具体设计</h3><p>首先，将需要的变量定义为全局变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">int</span> n;  <span class="hljs-comment">//进程数</span><br><span class="hljs-keyword">int</span> m;  <span class="hljs-comment">//资源类数</span><br><span class="hljs-keyword">int</span> *Available; <span class="hljs-comment">//可使用资源向量</span><br><span class="hljs-keyword">int</span> **Max;  <span class="hljs-comment">//最大需求矩阵</span><br><span class="hljs-keyword">int</span> **Allocation;    <span class="hljs-comment">//分配矩阵</span><br><span class="hljs-keyword">int</span> **Need; <span class="hljs-comment">//需求矩阵</span><br><span class="hljs-keyword">bool</span> safe = False;<br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-keyword">int</span> id;  <span class="hljs-comment">//进程ID</span><br>    <span class="hljs-keyword">int</span> *req_src;  <span class="hljs-comment">//进程此次申请资源</span><br>&#125;Request;<br>Request* new_request;<br></code></pre></td></tr></table></figure>
<p>如上，用到了Bool型变量，因此要定义</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> True 1</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> False 0</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> <span class="hljs-keyword">bool</span>;<br></code></pre></td></tr></table></figure>
<p>下面列出了我们将要写的函数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initial</span><span class="hljs-params">()</span></span>;            <span class="hljs-comment">//初始化n,m,Available等的函数  </span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span></span>;		<span class="hljs-comment">//提出请求</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span></span>;			<span class="hljs-comment">//处理</span><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">safe_detect</span><span class="hljs-params">()</span></span>;		<span class="hljs-comment">//安全性检测</span><br><span class="hljs-comment">/*向量运算函数*/</span><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">vector_compare</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span></span>;		  <br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_sub</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span></span>;<br></code></pre></td></tr></table></figure>
<p>首先给出几个向量运算函数的定义：<br>定义a和b为两个等长向量,<br>a &gt;= b 表示 a 中的每个元素都大于相应位置上的 b 的元素；<br>a += b 表示 a 中的每个元素增加相应位置上的 b 的元素的值；<br>a -= b 表示 a 中的每个元素都大于相应位置上的 b 的元素的值；<br>例：<br>a = [1,2,3];<br>b = [1,1,1];<br>则<br>a &gt;= b;<br>a += b; //a=[2,3,4]<br>a -= b; //a=[0,1,2]</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">vector_compare</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span>    <span class="hljs-comment">// If vector a &gt;= vector b, return True</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(*(a+i)&lt;*(b+i))<br>            <span class="hljs-keyword">return</span> False;<br>        i++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> True;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span> <span class="hljs-comment">//vector a += vector b</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        *(a+i) += *(b+i);<br>        i++;<br>    &#125; <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_sub</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span> <span class="hljs-comment">//vector a -= vector b</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        *(a+i) -= *(b+i);<br>        i++;<br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure>
<p>下面按算法步骤给出 initial(), request(), process(), safe_request()</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initial</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i;<br>    <span class="hljs-keyword">int</span> j;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入进程数:\n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入资源类数:\n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;m);    <br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入可使用资源向量:\n&quot;</span>);<br>    Available = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;Available[i]);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入最大需求矩阵:\n&quot;</span>);<br>    Max = (<span class="hljs-keyword">int</span>**)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>*)*n);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        Max[i] = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; j&lt;m; j++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;Max[i][j]);<br>    &#125;<br><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入分配矩阵:\n&quot;</span>);<br>    Allocation = (<span class="hljs-keyword">int</span>**)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>*)*n);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        Allocation[i] = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; j&lt;m; j++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;Allocation[i][j]);<br>    &#125;<br><br>    Need = (<span class="hljs-keyword">int</span>**)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>*)*n);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        Need[i] = (<span class="hljs-keyword">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;m;j++)<br>            Need[i][j] = Max[i][j] - Allocation[i][j];<br>    &#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i,id;<br>    new_request = (Request*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Request));<br>    new_request-&gt;req_src = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入进程的ID\n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;id);<br>    new_request-&gt;id = id - <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入进程申请资源向量\n&quot;</span>);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;new_request-&gt;req_src[i]);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = new_request-&gt;id;<br>    <span class="hljs-keyword">if</span>(vector_compare(Need[i],new_request-&gt;req_src,m))<br>        &#123;<br>            <span class="hljs-keyword">if</span>(vector_compare(Available,new_request-&gt;req_src,m))<br>            &#123;<br>                vector_sub(Available,new_request-&gt;req_src,m);<br>                vector_add(Allocation[i],new_request-&gt;req_src,m);<br>                vector_sub(Need[i],new_request-&gt;req_src,m);<br>                safe_detect();<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;程序所申请资源大于系统当前所剩资源，推迟执行!\n&quot;</span>);  <br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>                              <br>        &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;程序所申请资源大于该程序所需资源，无法执行!\n&quot;</span>); <br>        <span class="hljs-keyword">return</span>;<br>    &#125;    <br>    <span class="hljs-keyword">if</span>(safe)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;系统安全,进程可以执行!\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;系统不安全,进程无法执行!\n&quot;</span>);<br>        vector_add(Available,new_request-&gt;req_src,m);<br>        vector_sub(Allocation[i],new_request-&gt;req_src,m);<br>        vector_add(Need[i],new_request-&gt;req_src,m);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>        <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">safe_detect</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> *work = Available;<br>    <span class="hljs-keyword">bool</span> *finish = (<span class="hljs-keyword">bool</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">bool</span>)*n);<br>    <span class="hljs-keyword">int</span> i;<br><br>    <span class="hljs-comment">//初始化finish</span><br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>        finish[i] = False;<br>    <br><br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(finish[i]==False&amp;&amp;vector_compare(work,Need[i],m))<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;尝试执行第%d进程\n&quot;</span>,i+<span class="hljs-number">1</span>);<br>            vector_add(work,Allocation[i],m);   <span class="hljs-comment">//尝试执行该进程，释放资源</span><br><br>            finish[i] = True;<br>            i = <span class="hljs-number">-1</span>;  <span class="hljs-comment">//尝试分配后，从头查找是否还有可以执行的进程，考虑到i++，故此处为-1</span><br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>        <span class="hljs-keyword">if</span>(finish[i]==False)<br>            <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">if</span>(i==n)<br>        safe = True;<br>    <span class="hljs-keyword">else</span><br>        safe = False;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实现完整源码"><a href="#实现完整源码" class="headerlink" title="实现完整源码"></a>实现完整源码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;malloc.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> True 1</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> False 0</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> <span class="hljs-keyword">bool</span>;<br><br><span class="hljs-keyword">int</span> n;  <span class="hljs-comment">//进程数</span><br><span class="hljs-keyword">int</span> m;  <span class="hljs-comment">//资源类数</span><br><span class="hljs-keyword">int</span> *Available; <span class="hljs-comment">//可使用资源向量</span><br><span class="hljs-keyword">int</span> **Max;  <span class="hljs-comment">//最大需求矩阵</span><br><span class="hljs-keyword">int</span> **Allocation;    <span class="hljs-comment">//分配矩阵</span><br><span class="hljs-keyword">int</span> **Need; <span class="hljs-comment">//需求矩阵</span><br><span class="hljs-keyword">bool</span> safe = False;<br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">int</span> *req_src;<br>&#125;Request;<br>Request* new_request;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initial</span><span class="hljs-params">()</span></span>;  <br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">safe_detect</span><span class="hljs-params">()</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">vector_compare</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span></span>;  <br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_sub</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> len)</span></span>;<br><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    initial();<br>    request();<br>    process();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; %d&quot;</span>,*(a+i));<br>        i++;<br>    &#125;<br>   <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br> <br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">vector_compare</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span>    <span class="hljs-comment">// If vector a &gt;= vector b, return True</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(*(a+i)&lt;*(b+i))<br>            <span class="hljs-keyword">return</span> False;<br>        i++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> True;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span> <span class="hljs-comment">//vector a += vector b</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        *(a+i) += *(b+i);<br>        i++;<br>    &#125; <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">vector_sub</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *a, <span class="hljs-keyword">int</span> *b, <span class="hljs-keyword">int</span> len)</span> <span class="hljs-comment">//vector a -= vector b</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span>(i&lt;len)<br>    &#123;<br>        *(a+i) -= *(b+i);<br>        i++;<br>    &#125; <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initial</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i;<br>    <span class="hljs-keyword">int</span> j;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入进程数:\n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入资源类数:\n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;m);    <br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入可使用资源向量:\n&quot;</span>);<br>    Available = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;Available[i]);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入最大需求矩阵:\n&quot;</span>);<br>    Max = (<span class="hljs-keyword">int</span>**)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>*)*n);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        Max[i] = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; j&lt;m; j++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;Max[i][j]);<br>    &#125;<br><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入分配矩阵:\n&quot;</span>);<br>    Allocation = (<span class="hljs-keyword">int</span>**)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>*)*n);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        Allocation[i] = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; j&lt;m; j++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;Allocation[i][j]);<br>    &#125;<br><br>    Need = (<span class="hljs-keyword">int</span>**)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>*)*n);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        Need[i] = (<span class="hljs-keyword">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>        <span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;m;j++)<br>            Need[i][j] = Max[i][j] - Allocation[i][j];<br>    &#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">request</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i,id;<br>    new_request = (Request*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Request));<br>    new_request-&gt;req_src = (<span class="hljs-keyword">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">int</span>)*m);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入进程的ID\n&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;id);<br>    new_request-&gt;id = id - <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请输入进程申请资源向量\n&quot;</span>);<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;m; i++)<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;new_request-&gt;req_src[i]);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">process</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> i = new_request-&gt;id;<br>    <span class="hljs-keyword">if</span>(vector_compare(Need[i],new_request-&gt;req_src,m))<br>        &#123;<br>            <span class="hljs-keyword">if</span>(vector_compare(Available,new_request-&gt;req_src,m))<br>            &#123;<br>                vector_sub(Available,new_request-&gt;req_src,m);<br>                vector_add(Allocation[i],new_request-&gt;req_src,m);<br>                vector_sub(Need[i],new_request-&gt;req_src,m);<br>                safe_detect();<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;程序所申请资源大于系统当前所剩资源，推迟执行!\n&quot;</span>);  <br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>                              <br>        &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;程序所申请资源大于该程序所需资源，无法执行!\n&quot;</span>); <br>        <span class="hljs-keyword">return</span>;<br>    &#125;    <br>    <span class="hljs-keyword">if</span>(safe)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;系统安全,进程可以执行!\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;系统不安全,进程无法执行!\n&quot;</span>);<br>        vector_add(Available,new_request-&gt;req_src,m);<br>        vector_sub(Allocation[i],new_request-&gt;req_src,m);<br>        vector_add(Need[i],new_request-&gt;req_src,m);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>        <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">safe_detect</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> *work = Available;<br>    <span class="hljs-keyword">bool</span> *finish = (<span class="hljs-keyword">bool</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">bool</span>)*n);<br>    <span class="hljs-keyword">int</span> i;<br><br>    <span class="hljs-comment">//初始化finish</span><br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>        finish[i] = False;<br>    <br><br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(finish[i]==False&amp;&amp;vector_compare(work,Need[i],m))<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;尝试执行第%d进程\n&quot;</span>,i+<span class="hljs-number">1</span>);<br>            vector_add(work,Allocation[i],m);   <span class="hljs-comment">//尝试执行该进程，释放资源</span><br><br>            finish[i] = True;<br>            i = <span class="hljs-number">-1</span>;  <span class="hljs-comment">//尝试分配后，从头查找是否还有可以执行的进程，考虑到i++，故此处为-1</span><br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>; i&lt;n; i++)<br>        <span class="hljs-keyword">if</span>(finish[i]==False)<br>            <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">if</span>(i==n)<br>        safe = True;<br>    <span class="hljs-keyword">else</span><br>        safe = False;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如图所示：</p>
<p><img src="/images/OS/image-20210622155346538.png" alt="效果"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-22T06:04:48.000Z" title="2021/6/22 下午2:04:48">2021-06-22</time>发表</span><span class="level-item"><time dateTime="2021-06-22T06:25:37.393Z" title="2021/6/22 下午2:25:37">2021-06-22</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span><span class="level-item">6 分钟读完 (大约959个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/06/22/%E7%AE%80%E5%8D%95-shell-%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%A7%A3%E9%87%8A%E5%99%A8-%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E-%E5%AE%9E%E7%8E%B0/">简单shell命令行解释器的设计与实现</a></h1><div class="content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>我们总会站在前人的肩膀上去眺望远方，无论是课程设计还是人生皆如此。</p>
<h3 id="简单shell命令行解释器的设计与实现"><a href="#简单shell命令行解释器的设计与实现" class="headerlink" title="简单shell命令行解释器的设计与实现"></a>简单shell命令行解释器的设计与实现</h3><p>要设计的 shell 类似于 sh,bash,csh 等，必须支持以下内部命令：</p>
<ul>
<li><strong>cd</strong> &lt;目录&gt;更改当前的工作目录到另一个&lt;目录&gt;。如果&lt;目录&gt;未指定，输出当前工作目录。如果&lt;目录&gt;不存在，应当有适当的错误信息提示。这个命令应该也能改变 <strong>PWD</strong> 的环境变量。</li>
<li><strong>environ</strong> 列出所有环境变量字符串的设置（类似于 Linux 系统下的 <strong>env</strong> 命令）。</li>
<li><strong>echo</strong> &lt; 内容 &gt; 显示 echo 后的内容且换行。</li>
<li><strong>help</strong> 简短概要的输出你的 shell 的使用方法和基本功能。</li>
<li><strong>jobs</strong> 输出 shell 当前的一系列子进程，必须提供子进程的命名和 PID 号。</li>
<li><strong>quit</strong>,<strong>exit</strong>,bye <strong>退出</strong> shell。</li>
</ul>
<p>提示：shell 的主体就是反复下面的循环过程</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br><span class="hljs-comment">//接收用户输入的命令行；</span><br><span class="hljs-comment">//解析命令行；</span><br><span class="hljs-keyword">if</span>(<span class="hljs-comment">//用户命令为内部命令)</span><br><span class="hljs-comment">//直接处理；</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-comment">//用户命令为外部命令)</span><br><span class="hljs-comment">//创建子进程执行命令；</span><br><span class="hljs-keyword">else</span><br><span class="hljs-comment">//提示错误的命令；</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>实现代码如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/types.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;errno.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">char</span> <span class="hljs-title">command</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *s)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;exit&quot;</span>,<span class="hljs-number">4</span>))        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;q&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;quit&quot;</span>,<span class="hljs-number">4</span>))   <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;q&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;bye&quot;</span>,<span class="hljs-number">4</span>))    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;q&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;cd&quot;</span>,<span class="hljs-number">2</span>))     <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;ls&quot;</span>,<span class="hljs-number">2</span>))     <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;rm&quot;</span>,<span class="hljs-number">2</span>))     <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;mkdir&quot;</span>,<span class="hljs-number">5</span>))  <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;echo&quot;</span>,<span class="hljs-number">4</span>))   <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;help&quot;</span>,<span class="hljs-number">4</span>))   <span class="hljs-keyword">return</span> <span class="hljs-number">6</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;env&quot;</span>,<span class="hljs-number">3</span>))    <span class="hljs-keyword">return</span> <span class="hljs-number">7</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!strncasecmp(s,<span class="hljs-string">&quot;jobs&quot;</span>,<span class="hljs-number">4</span>))   <span class="hljs-keyword">return</span> <span class="hljs-number">8</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!strncasecmp(s,<span class="hljs-string">&quot;clean&quot;</span>,<span class="hljs-number">5</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">9</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">help</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">printf</span>( <span class="hljs-string">&quot;\t*****************帮助********************\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   命令                     功能\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   cd            更改当前的工作目录到另一个&lt;目录&gt;\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   environ       列出所有环境变量字符串的设置\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   echo          显示echo后面的内容并换行\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   help          显示帮助信息\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   jobs          输出shell当前的一系列子进程，包括子进程的命名和PID号\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   ls            显示当前目录的所有文件\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   rm            删除当前目录下的文件或目录\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   mkdir         在当前目录下创建新目录\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   clean         清屏\n&quot;</span><br>            <span class="hljs-string">&quot;\t*   quit|exit|bye 退出shell\n&quot;</span><br>            <span class="hljs-string">&quot;\t*****************************************\n&quot;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">char</span> n[<span class="hljs-number">100</span>],n1[<span class="hljs-number">100</span>];<br>    <span class="hljs-keyword">char</span> b;<br>    <span class="hljs-keyword">pid_t</span> pid;<br>    help();<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-built_in">memset</span>(n,<span class="hljs-number">0</span>,<span class="hljs-number">100</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s_@_$：&quot;</span>,getcwd(n1,<span class="hljs-number">100</span>));           <span class="hljs-comment">// print the information;</span><br>        fgets(n,<span class="hljs-number">100</span>,<span class="hljs-built_in">stdin</span>);                         <span class="hljs-comment">//input cmdline;</span><br>        n[<span class="hljs-built_in">strlen</span>(n)<span class="hljs-number">-1</span>]=<span class="hljs-string">&#x27;\0&#x27;</span>;                        <span class="hljs-comment">//delete the &#x27;\n&#x27;;</span><br>        b=command(n);                               <span class="hljs-comment">//get the return values;</span><br>        <span class="hljs-keyword">if</span>(b==<span class="hljs-string">&#x27;q&#x27;</span>)<br>            <span class="hljs-keyword">break</span>;                                  <span class="hljs-comment">//exit the shell;</span><br>        <span class="hljs-keyword">switch</span>(b)<br>        &#123;<br>        <span class="hljs-comment">//change the directory</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">if</span>(chdir(n+<span class="hljs-number">3</span>)!=<span class="hljs-number">0</span>)<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   打开工作目录(%s)失败!\n&quot;</span>,n+<span class="hljs-number">3</span>);<span class="hljs-comment">//+3  = &#x27;c&#x27;,&#x27;d&#x27;,&#x27;\0&#x27;,后面的数字为输入命令的字符个数加+1（‘\0’占一个字符）;</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   当前工作目录：&#x27;%s&#x27;\n&quot;</span>,getcwd(n1,<span class="hljs-number">100</span>));<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//list</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>            <span class="hljs-keyword">if</span>((pid=fork())&lt;<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   fork error\n&quot;</span>);<br>                <span class="hljs-built_in">exit</span>(EXIT_FAILURE);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(pid==<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>,<span class="hljs-string">&quot;ls&quot;</span>,<span class="hljs-literal">NULL</span>)&lt;<span class="hljs-number">0</span>);<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   execl error\n&quot;</span>);<br>                <span class="hljs-built_in">exit</span>(EXIT_FAILURE);<br>            &#125;<br>            waitpid(pid,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//remove a directory</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>            remove(n+<span class="hljs-number">3</span>);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   文件已删除!\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//make a directory</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>            mkdir(n+<span class="hljs-number">6</span>,S_IRWXU);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   文件创建成功!\n&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//print something</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   %s\n&quot;</span>,n+<span class="hljs-number">5</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//help</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>            help();<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//environment</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>            <span class="hljs-keyword">if</span>((pid=fork())&lt;<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   fork error\n&quot;</span>);<br>                <span class="hljs-built_in">exit</span>(EXIT_FAILURE);<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(pid==<span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span>(execl(<span class="hljs-string">&quot;/bin/env&quot;</span>,<span class="hljs-string">&quot;env&quot;</span>,<span class="hljs-literal">NULL</span>)&lt;<span class="hljs-number">0</span>)<br>                    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;   execl error\n&quot;</span>);<br>                <span class="hljs-built_in">exit</span>(EXIT_FAILURE);<br>            &#125;<br>            waitpid(pid,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//ps the running process ;</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:<br>            system(<span class="hljs-string">&quot;ps&quot;</span>);<span class="hljs-comment">//systemcall_ps</span><br>            <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:<br>            system(<span class="hljs-string">&quot;clear&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//cmd can&#x27;t find;</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;PID: %ld.没有此命令，请重新输入正确的命令。\n&quot;</span>, (<span class="hljs-keyword">long</span>)getpid());<br>            help();<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>效果如图所示：</p>
<p><img src="/images/OS/image-20210622141841632.png" alt="效果"></p>
<p>输入不同的命令：</p>
<p><img src="/images/OS/image-20210622142014559.png" alt="environ"></p>
<p><img src="/images/OS/image-20210622142053363.png" alt="help"></p>
<p><img src="/images/OS/image-20210622142134813.png" alt="ls"></p>
<p><img src="/images/OS/image-20210622142202534.png" alt="clean"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>shell使用fork函数创建新的进程，用exec在新进程中运行用户指定的程序，最后shell用wait等待新进程的结束。wait系统调用同时从内核取得退出状态以告知子进程是如何结束的。</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">上一页</a></div><div class="pagination-next"><a href="/page/2/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/5/">5</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/you.jpg" alt="胡雅宁"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">胡雅宁</p><p class="is-size-6 is-block">虽千万人吾往矣</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">50</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/1905060202" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/1905060202"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.zhihu.com/people/little-ning-ge" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">知乎</span></span><span class="level-right"><span class="level-item tag">www.zhihu.com</span></span></a></li><li><a class="level is-mobile" href="https://space.bilibili.com/24140963" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">bilibili</span></span><span class="level-right"><span class="level-item tag">space.bilibili.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"><span class="level-start"><span class="level-item">人工智能</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"><span class="level-start"><span class="level-item">数据分析</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/"><span class="level-start"><span class="level-item">经验分享</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">编程语言</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">脚本语言</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">计算机基础</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%97%B2%E8%A8%80%E7%A2%8E%E8%AF%AD/"><span class="level-start"><span class="level-item">闲言碎语</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><span class="level-start"><span class="level-item">项目实战</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">五月 2021</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/BootStrap/"><span class="tag">BootStrap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C%E8%AF%AD%E8%A8%80%E4%B8%AD%E6%96%87%E7%BD%91/"><span class="tag">C语言中文网</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Error%E8%A7%A3%E5%86%B3/"><span class="tag">Error解决</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java-Web/"><span class="tag">Java Web</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SpringMVC/"><span class="tag">SpringMVC</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vue/"><span class="tag">Vue</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leetcode/"><span class="tag">leetcode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/programthink/"><span class="tag">programthink</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/socket/"><span class="tag">socket</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/web%E5%BC%80%E5%8F%91/"><span class="tag">web开发</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B9%A0%E9%A2%98/"><span class="tag">习题</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"><span class="tag">人工智能</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%BA%E7%94%9F/"><span class="tag">人生</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%9C%E4%B8%9A/"><span class="tag">作业</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E5%AE%A2/"><span class="tag">博客</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E4%B9%A0/"><span class="tag">学习</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E7%94%9F%E5%85%9A/"><span class="tag">学生党</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%8F%E5%A6%99%E6%8B%9B/"><span class="tag">小妙招</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%A7%E6%95%99%E8%82%B2/"><span class="tag">性教育</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="tag">操作系统</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">数据库</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/"><span class="tag">期末复习</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A1%86%E6%9E%B6/"><span class="tag">框架</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%88%AC%E8%99%AB/"><span class="tag">爬虫</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%99%BD%E5%AB%96/"><span class="tag">白嫖</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"><span class="tag">统计学习方法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"><span class="tag">网络编程</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/"><span class="tag">计算机组成原理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BA%E6%96%87/"><span class="tag">论文</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1/"><span class="tag">课程设计</span><span class="tag">9</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="1" data-ad-slot="1" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-16T13:32:13.000Z">2021-07-16</time></p><p class="title"><a href="/2021/07/16/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6%EF%BC%9F/">如何阅读一本书？</a></p><p class="categories"><a href="/categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-10T04:30:51.000Z">2021-07-10</time></p><p class="title"><a href="/2021/07/10/2021%E6%9A%91%E5%81%87leetcode%E8%AE%AD%E7%BB%83%EF%BC%88%E4%B8%80%EF%BC%89/">2021暑假leetcode训练（一）</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-06T15:59:50.000Z">2021-07-06</time></p><p class="title"><a href="/2021/07/06/python%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A2%98%E5%BA%93/">python与数据分析题库</a></p><p class="categories"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-06T15:20:58.000Z">2021-07-06</time></p><p class="title"><a href="/2021/07/06/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%A2%98%E5%BA%93/">操作系统题库</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-01T10:14:57.000Z">2021-07-01</time></p><p class="title"><a href="/2021/07/01/%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/">磁盘调度算法的设计与实现</a></p><p class="categories"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/%E6%9C%AC%E4%BA%BA.jpg" alt="胡小宁的博客" height="28"></a><p class="is-size-7"><span>&copy; 2021 胡小宁</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>